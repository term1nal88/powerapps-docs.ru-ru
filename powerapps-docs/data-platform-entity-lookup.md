---
title: "Связь между сущностями через поле подстановки | Документация Майкрософт"
description: "Установите связь между сущностями с помощью поля подстановки."
services: powerapps
documentationcenter: na
author: kfend
manager: kfend
editor: 
tags: 
ms.service: powerapps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 12/09/2016
ms.author: kfend
ms.openlocfilehash: 51138467e93dc4ef3fd2a08163536971c3811d23
ms.sourcegitcommit: e827813cd898ca9a1046b5952ea5e32ce2989a65
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2018
---
# <a name="build-a-relationship-between-entities"></a>Создание связи между сущностями
Данные в одной сущности часто связаны с данными в другой. Например, у вас могут быть сущности **Клиенты** и **Заказы**, а сущность **Заказы** может быть связана отношением подстановки с сущностью **Клиенты** для показа информации о клиенте, который разместил заказ. Поле подстановки можно использовать для показа сведений о разместившем заказ клиенте из сущности **Клиенты**. Дополнительные сведения см. в статье о [связях между сущностями и полях подстановки](https://docs.microsoft.com/common-data-service/entity-reference/relationships).

## <a name="define-a-relationship"></a>Установка связи
Вы можете создать несколько типов связей от одной сущности к другой (или внутри самой сущности). Для каждой сущности можно установить связи с несколькими сущностями. Кроме того, одна сущность может иметь несколько связей с другой. Ниже перечислены некоторые распространенные типы связей:

* **Обычная**. Это тип связи между двумя сущностями.
* **Собственная**. Это тип связи внутри самой сущности.
* **Один к одному**. При таком типе связи каждая запись в сущности А может соответствовать только одной записи в сущности Б, и наоборот. Текущая версия Common Data Service не поддерживает этот тип связи для настраиваемых сущностей.
* **Один ко многим**. При таком типе связи каждая запись в сущности A может соответствовать нескольким записям в сущности Б, но каждая запись в сущности Б может соответствовать только одной записи в сущности A.
* **Многие ко многим**. При таком типе связи каждая запись в сущности A может соответствовать нескольким записям в сущности Б, и наоборот. Текущая версия Common Data Service не поддерживает этот тип связи.

## <a name="add-a-lookup-relation"></a>Добавление отношения подстановки
Чтобы добавить в сущность отношение подстановки, необходимо создать связь на вкладке **Relationships** (Связи) и указать другую сущность, с которой вы хотите связать текущую.

1. На сайте [powerapps.com](https://web.powerapps.com) разверните раздел **Common Data Service** и щелкните или нажмите на элемент **Entities** (Сущности) на панели навигации слева.
2. В списке сущностей выберите одну для отображения ее полей. Чтобы отфильтровать список сущностей, в строке поиска над списком введите несколько символов имени сущности.
3. В верхней части экрана щелкните или нажмите **Relationships** (Связи). На этой вкладке показаны все связи для сущности. Щелкните **New relationship** (Создать связь).
4. На странице **Create relationship** (Создание связи) укажите сущность, с которой хотите установить связь, а затем — имя и отображаемое имя этой связи.
5. Нажмите кнопку **Сохранить**, чтобы применить изменения. Будет автоматически создано поле подстановки с тем же именем.

## <a name="use-a-lookup-field-in-an-app"></a>Использование поля подстановки в приложении
При [автоматическом создании приложения](data-platform-create-app.md) из сущности, содержащей поле подстановки, отображается **раскрывающийся список**, который содержит данные из поля **первичного ключа** связанной сущности в свернутом виде. Чтобы увидеть в раскрывающемся списке два поля, когда он развернут, необходимо добавить поле PrimaryId и второе поле в группу **Default Lookup** (Поля подстановки по умолчанию) сущности, связанной отношением подстановки.

## <a name="delete-a-record-with-a-lookup-relation"></a>Удаление записи с отношением подстановки
Если сущность A связана отношением подстановки с сущностью Б:

* В сущности А можно удалить любую запись без ограничений.
* Если запись в сущности Б соответствует одной или нескольким записям в сущности A, необходимо удалить все совпадающие записи в сущности A, перед тем как удалить запись в сущности Б.

> [!NOTE]
> Если сущность Б является стандартной сущностью, которая имеет родительскую связь с сущностью А, то удаление записи из сущности А повлечет за собой удаление всех соответствующих записей в сущности Б.

Сведения об удалении поля см. в статье [Управление настраиваемыми полями в модели общих данных](data-platform-manage-fields.md).

## <a name="next-steps"></a>Дальнейшие действия
* [Создание приложения с помощью базы данных Common Data Service](data-platform-create-app.md)
* [Create an app from scratch using a Common Data Service database](data-platform-create-app-scratch.md) (Создание приложения "с нуля" с помощью базы данных Common Data Service)

