---
title: Использование веб-служб Common Data Service для приложений | Документы Майкрософт
description: Узнайте, как разработчики могут использовать веб-службы Common Data Service для приложений.
services: ''
suite: powerapps
documentationcenter: na
author: JimDaly
manager: faisalmo
editor: ''
tags: ''
ms.service: powerapps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 02/26/2018
ms.author: jdaly
ms.openlocfilehash: 7f89a74b37ebf322137d680e165c007cd8fa6d26
ms.sourcegitcommit: 59785e9e82da8f5bd459dcb5da3d5c18064b0899
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2018
---
# <a name="use-common-data-service-for-apps-web-services"></a>Использование веб-служб Common Data Service для приложений

Common Data Service для приложений предоставляет две-веб-службы, которые можно применять для взаимодействия с данными. Выберите ту из них, которая лучше всего соответствует вашим требованиям и навыкам. Дополнительные сведения см. в статье [Руководство по Dynamics 365 Customer Engagement для разработчика. Выбор стиля разработки для Dynamics 365 Customer Engagement](/dynamics365/customer-engagement/developer/choose-development-style).

## <a name="web-api"></a>Веб-API
Веб-API представляет собой конечную точку OData версии 4 с поддержкой REST. Его можно использовать с любым языком программирования, поддерживающим HTTP-запросы и проверку подлинности посредством OAuth 2.0.

Дополнительные сведения см. в статье [Руководство по Dynamics 365 Customer Engagement для разработчика. Использование веб-API Dynamics 365 Customer Engagement](/dynamics365/customer-engagement/developer/use-microsoft-dynamics-365-web-api).

## <a name="organization-service"></a>Служба организации

Служба организации является основным компонентом платформы Common Data Service для приложений. Это служба Windows Communication Foundation (WCF), которая в настоящее время предоставляет только конечную точку SOAP. Разработчики на платформе .NET могут использовать сборки пакета SDK для выполнения операций с данными. В подключаемом модуле служба организации доступна только посредством сборок пакета SDK.
> [!NOTE]
> Разработчики могут использовать конечную точку SOAP службы организации, не применяя сборки пакета SDK для .NET, однако так как веб-API поддерживает REST, эти сборки являются гораздо более предпочтительной альтернативой.

Дополнительные сведения см. в статье [Руководство по Dynamics 365 Customer Engagement для разработчика. Использование службы организации Dynamics 365](/dynamics365/customer-engagement/developer/use-microsoft-dynamics-365-organization-service).

## <a name="about-the-web-services-and-the-platform"></a>Веб-службы и платформа

Важно понимать, что именно служба организации определяет платформу. Веб-API предоставляет возможности программирования на основе REST, однако в конечном итоге все операции с данными осуществляются через базовую службу организации. 

В службе организации поддерживаемые операции определяются как сообщения. Каждое сообщение имеет имя. В сборках пакета SDK каждое сообщение имеет соответствующие классы *&lt;имя сообщения&gt;*`Request` и *&lt;имя сообщения&gt;*`Response`. [Интерфейс IOrganizationService](/dotnet/api/microsoft.xrm.sdk.iorganizationservice) в библиотеке `Microsoft.Xrm.Sdk.dll` определяет несколько вспомогательных методов для стандартных операций создания, чтения, обновления и удаления, а также [метод Execute](/dotnet/api/microsoft.xrm.sdk.iorganizationservice.execute), который можно использовать для вызова сообщений. Все сообщения используют базовый [класс OrganizationRequest](/dotnet/api/microsoft.xrm.sdk.organizationrequest).

Веб-API предоставляет те же операции, что и служба организации, но представляет их в стиле с поддержкой REST с использованием протокола OData версии 4. OData версии 4 обеспечивает именованные операции посредством *функций* или *действий*. Почти каждое сообщение, доступное в службе организации, предоставляется в виде соответствующей именованной функции или действия. Сообщения, соответствующие операциям создания, чтения, обновления и удаления, недоступны в веб-API, так как в службе с поддержкой REST они реализованы посредством методов HTTP GET, POST, PATCH и DELETE.

Сборки пакета SDK .NET для конечной точки SOAP службы организации близко моделируют базовые службы платформы на основе [интерфейса IOrganizationService](/dotnet/api/microsoft.xrm.sdk.iorganizationservice). Однако они не идентичны, и их не следует путать друг с другом. 

Конечная точка SOAP для службы организации появилась в версии 2011. Она была объявлена нерекомендуемой. Это означает, что она продолжит работать и будет поддерживаться, пока мы не удалим ее. Мы также объявили о том, что сборки пакета SDK для .NET будут обновляться и продолжать работать после удаления конечной точки SOAP. Это означает, что до удаления конечной точки SOAP будут доступны обновленные сборки пакета SDK и в какой-то момент разработчикам потребуется обновить свой код для использования этих новых сборок.

## <a name="discovery-services"></a>Службы обнаружения

Каждый пользователь Common Data Service для приложений может получать доступ к нескольким экземплярам Common Data Service для приложений. Службы обнаружения позволяют писать код для предоставления пользователям списка экземпляров, к которым они могут подключаться с помощью собственных учетных записей Майкрософт. Каждый экземпляр имеет URL-адрес, по которому можно подключаться к этому экземпляру. 

Служба обнаружения доступна посредством веб-API или службы организации.

- Сведения о доступе посредством веб-API см. в статье [Руководство по Dynamics 365 Customer Engagement для разработчика. Обнаружение URL-адреса для организации с помощью веб-API](/dynamics365/customer-engagement/developer/webapi/discover-url-organization-web-api).
- Сведения о доступе посредством службы организации см. в статье [Руководство по Dynamics 365 Customer Engagement для разработчика. Обнаружение URL-адреса для организации с помощью службы организации](/dynamics365/customer-engagement/developer/org-service/discover-url-organization-organization-service).

## <a name="use-custom-actions"></a>Применение пользовательских действий

Одной из декларативных возможностей для процессов является создание *пользовательских действий*. Создавая пользовательское действие, вы фактически создаете новое сообщение в службе организации. С помощью пользовательских действий можно объединить набор операций в именованную операцию, допускающую повторное использование. Например, можно создать сообщение с именем *new_Escalate*, которое объединяет стандартный набор операций, связанных с уведомлением соответствующих лиц в случае, когда у важного клиента возникает серьезная проблема.

При определении пользовательского действия вы выбираете сигнатуру операции, определяя входные параметры и свойства, которые должны включаться в возвращаемый результат. После этого пользовательское действие можно вызывать из декларативного процесса с помощью конструктора или в коде. 

Уникальное преимущество пользовательских действий заключается в том, что пользователи, не являющиеся разработчиками, могут с помощью конструктора изменять содержащиеся в них операции, не затрагивая другие вызывающие эти действия процессы или код.  Это справедливо до тех пор, пока сигнатура действия не меняется. Если нужны другие входные параметры или выходные свойства, следует создать другое пользовательское действие, чтобы не нарушить работу процессов или кода, в которых используется существующее действие.

Когда в среде определяется пользовательское действие, посредством веб-API доступно новое действие OData версии 4, а в службе организации пользовательское действие может вызываться с помощью [класса OrganizationRequest](/dotnet/api/microsoft.xrm.sdk.organizationrequest) напрямую или с помощью строго типизированного класса, созданного с помощью *средства формирования кода (CrmSvcUtil.exe)*.

Дополнительные сведения: 
- [Руководство по Dynamics 365 Customer Engagement для разработчика. Общие сведения о действиях](/dynamics365/customer-engagement/customize/actions)
- [Руководство по Dynamics 365 Customer Engagement для разработчика. Создание собственных действий](/dynamics365/customer-engagement/developer/create-own-actions)
- [Руководство по Dynamics 365 Customer Engagement для разработчика. Использование действий веб-API > применение пользовательского действия](/dynamics365/customer-engagement/developer/webapi/use-web-api-actions#use-a-custom-action)

## <a name="metadata-services"></a>Службы метаданных

Как в веб-API, так и в службе организации есть возможности для выполнения операций создания, чтения, обновления и удаления применительно к схеме сущностей. Эти операции можно выполнять посредством кода, однако, как правило, для добавления, обновления или удаления пользовательских элементов схемы применяются конструкторы. Для применения изменений к схеме требуются права администратора, однако считывать метаданные могут все пользователи.

Более распространенным способом применения служб метаданных является извлечение метаданных среды, в которой работает расширение. Так как у каждой среды есть свои особенности, а метаданные схемы могут содержать значительную часть сведений о конфигурации среды, может потребоваться извлечь эти сведения, чтобы ваши расширения адаптировались к настройкам среды.

Вот несколько примеров.
- Число параметров, доступных в атрибуте набора параметров, может меняться. Вместо того чтобы жестко задавать значения в коде для среды, можно попробовать определить наличие разных параметров. Чтобы определить, имеет ли текущая среда другие параметры, можно выполнить запрос к системе.
- Отображаемое имя сущности может измениться. Отображаемое имя по умолчанию для сущности учетной записи — *Учетная запись*. Его можно изменить на *Организация*. Если вы хотите выводить сообщение для пользователя, в котором вы ссылаетесь на имя сущности, его не следует жестко задавать в коде. Вместо этого используйте привычное для пользователя значение и отображаемое имя, извлеченное из метаданных сущности.

Ясное представление о том, как используются метаданные в системе, может помочь вам понять, как работает платформа Common Data Service для приложений. В конструкторах для изменения метаданных могут отображаться не все сведения из них. Вы можете установить приложение на основе модели, которое называется *Браузер метаданных*, чтобы просматривать все скрытые сущности и свойства метаданных, найденные в системе. 

Дополнительные сведения см. в статье [Руководство по Dynamics 365 Customer Engagement для разработчика. Просмотр метаданных, имеющихся в организации](/dynamics365/customer-engagement/developer/browse-your-metadata).

Дополнительные сведения о работе с метаданными программными средствами см. в следующих статьях:
- [Руководство по Dynamics 365 Customer Engagement для разработчика. Использование веб-API с метаданными](/dynamics365/customer-engagement/developer/webapi/use-web-api-metadata)
- [Руководство по Dynamics 365 Customer Engagement для разработчика. Использование службы организации с метаданными Dynamics 365](/dynamics365/customer-engagement/developer/org-service/use-organization-service-metadata)
 
### <a name="see-also"></a>См. также

[Common Data Service for Apps: общие сведения для разработчиков](overview.md)

