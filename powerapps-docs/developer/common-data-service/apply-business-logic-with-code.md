---
title: Применение бизнес-логики с помощью кода | Документы Майкрософт
description: Сведения о том, как разработчики могут использовать код, чтобы применять бизнес-логику в Common Data Service for Apps.
services: ''
suite: powerapps
documentationcenter: na
author: JimDaly
manager: faisalmo
editor: ''
tags: ''
ms.service: powerapps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 02/26/2018
ms.author: jdaly
ms.openlocfilehash: 12925c57103b1ecc00dc19205af5f32d165bdc63
ms.sourcegitcommit: 59785e9e82da8f5bd459dcb5da3d5c18064b0899
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2018
---
# <a name="apply-business-logic-with-code"></a>Применение бизнес-логики с помощью кода

Когда требуется определить бизнес-логику, следует по мере возможности рассмотреть возможность применения нескольких вариантов декларативного процесса. См. раздел [Руководство по настройке Dynamics 365 Customer Engagement. Создание настраиваемой бизнес-логики с помощью процессов](/dynamics365/customer-engagement/customize/guide-staff-through-common-tasks-processes).

Когда декларативный процесс не отвечает требованиям, вы как разработчик можете использовать разные подходы. Этот раздел описывает распространенные подходы к написанию кода.

## <a name="create-a-workflow-extension"></a>Создание расширения рабочего процесса

Вы можете создать сборку .NET, чтобы предоставить новые возможности в конструкторе процессов. Этот метод предоставляет пользователям конструктора рабочих процессов новую возможность для применения условия или выполнения нового действия. После этого расширение рабочего процесса может повторно использоваться сотрудниками, не являющимися разработчиками, для применения логики в вашем коде.

Дополнительные сведения см. в разделе [Руководство по Dynamics 365 Customer Engagement для разработчика. Настраиваемые действия рабочих процессов (сборки рабочих процессов)](/dynamics365/customer-engagement/developer/custom-workflow-activities-workflow-assemblies).

## <a name="create-a-plug-in"></a>Создание подключаемого модуля

Вы можете создать сборку .NET для подключения к потоку транзакций данных, чтобы применить бизнес-логику на сервере. Common Data Service for Apps предоставляет платформу, позволяющую регистрировать определенные события для выполнения кода, определенного в классе сборки. Этот класс наследует определенный интерфейс, предоставляющий [метод Execute](/dotnet/api/microsoft.xrm.sdk.iplugin.execute). При возникновении зарегистрированного события метод `Execute` класса вызывается и получает контекстные данные о событии.

Для регистрации своих сборок вам понадобится *средство регистрации подключаемых модулей*.

В пределах метода `Execute` вы можете использовать объектную модель, определенную в сборках пакета SDK, для оценки контекстных данных события и выполнения соответствующих действий для достижения следующих целей:
- Определение потребности в отмене операции путем вывода ошибки.
- Внесение изменений в контекстные данные, передаваемые методу Execute.
- Выполнение дополнительных операций для автоматизации процессов, использующих службу организации.

### <a name="synchronous-and-asynchronous-plug-ins"></a>Синхронные и асинхронные подключаемые модули
Подключаемые модули можно зарегистрировать для синхронного выполнения в рамках транзакции или отложить и отправить в очередь, чтобы применить логику тогда, когда это окажет наименьшее влияние на сервер. По этой причине предпочтительнее использовать асинхронные подключаемые модули.

При регистрации подключаемого модуля для синхронного выполнения для события можно указать, когда нужно выполнять код. Существует три этапа:

|Мероприятие  |Описание  |
|---------|---------|
|Предварительная проверка|Имеет место перед началом транзакции базы данных. Хорошо подходит для применения бизнес-логики, чтобы определить, следует ли отменить операцию перед началом транзакции во избежание снижения производительности, связанного с откатом транзакции.|
|Предварительная операция|Имеет место после начала транзакции базы данных. Отмена операции на этом этапе требует отката транзакции.|
|Последующая операция|Имеет место в рамках транзакции базы данных после завершения основной операции с данными. Включает все изменения, примененные в более ранних событиях, однако подразумевает еще большее снижение производительности при отмене операции.|

> [!NOTE]
> Синхронные подключаемые модули имеют ограничения на объем системных ресурсов, которые они могут использовать. Если подключаемый модуль превышает пороговые значения или перестает отвечать, выдается исключение для отмены операции.

Дополнительные сведения см. в разделе [Руководство по Dynamics 365 Customer Engagement для разработчика. Создание подключаемых модулей для расширения бизнес-процессов](/dynamics365/customer-engagement/developer/write-plugin-extend-business-processes).

### <a name="see-also"></a>См. также

[Common Data Service for Apps: общие сведения для разработчиков](overview.md)
