---
title: Метаданные сущностей | Документы Майкрософт
description: Сведения об использовании метаданных сущностей в Common Data Service for Apps.
services: ''
suite: powerapps
documentationcenter: na
author: JimDaly
manager: faisalmo
editor: ''
tags: ''
ms.service: powerapps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 03/19/2018
ms.author: jdaly
search.audienceType:
- developer
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: 60fafa90df656bb6d135a8cf7e2c2f3b4f8457da
ms.sourcegitcommit: 429b83aaa5a91d5868e1fbc169bed1bac0c709ea
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/24/2018
ms.locfileid: "42840753"
---
# <a name="entity-metadata"></a>Метаданные сущностей

Каждая сущность позволяет хранить структурированные данные. Для разработчиков сущности соответствуют классам, которые будут использоваться при работе с данными в Common Data Service for Apps.

## <a name="entity-names"></a>Имена сущностей
Каждая сущность имеет уникальное имя, определенное при ее создании. Это имя указывается несколькими способами:

|Имя свойства |Описание|
|---------|---------|
|`SchemaName`|Обычно версия логического имени в регистре Pascal. Например, Account.|
|`CollectionSchemaName`|Множественная форма имени схемы. Например, Accounts.|
|`LogicalName`|Версия имени схемы, состоящая только из строчных букв. Например, account.|
|`LogicalCollectionName`|Версия имени схемы коллекции, состоящая только из строчных букв. Например, accounts.|
|`EntitySetName`|Используется для идентификации коллекций с веб-API. По умолчанию совпадает с логическим именем коллекции.<br />Можно изменить имя набора сущностей, программно обновив метаданные. Но это следует делать только до написания кода веб-API для сущности. Дополнительные сведения см. в разделе [Руководство по Dynamics 365 Customer Engagement для разработчика. Типы и операции веб-API > Изменение имени набора сущностей](/dynamics365/customer-engagement/developer/webapi/web-api-types-operations#change-the-name-of-an-entity-set).|

> [!NOTE]
> При создании настраиваемой сущности в начало выбранного вами имени будет добавлено значение префикса настройки для издателя, связанного с решением, где была создана сущность. После создания вы уже не сможете изменить никакие имена сущностей, кроме имени набора сущностей. Если вы хотите обеспечить согласованные имена для элементов метаданных в решении, их следует создавать в контексте решения, связанного с издателем, который имеет требуемый префикс настройки. Дополнительные сведения см. в разделе [Создание издателя решения и решения](introduction-solutions.md#create-a-solution-publisher-and-solution).

Каждая сущность также имеет три свойства, которые могут отображать локализованные значения:


|Имя  |Описание  |
|---------|---------|
|`DisplayName`|Обычно совпадает с именем схемы, но может содержать пробелы. Например, Account.|
|`DisplayCollectionName`|Множественная форма отображаемого имени. Например, Accounts.|
|`Description`|Короткое предложение, описывающее сущность, например: *Компания, представляющая существующего или потенциального клиента. Компания, которой выставляется счет в деловых транзакциях*.|

Это локализуемые значения, используемые для ссылки на сущности в приложении. Эти значения можно изменить в любое время. Сведения о том, как добавить или изменить локализованные значения, см. в разделе [Руководство по настройке Dynamics 365. Перевод настроенного теста поля и сущности на другие языки](/dynamics365/customer-engagement/customize/export-customized-entity-field-text-translation).


## <a name="primary-key"></a>Первичный ключ

Значение свойства `PrimaryIdAttribute` — это логическое имя атрибута, являющегося первичным ключом для сущности.

По умолчанию все сущности имеют один атрибут уникального идентификатора GUID. Обычно он имеет вид *&lt;логическое имя сущности&gt;*+ `Id`.

## <a name="primary-name"></a>Первичное имя

Значение свойства `PrimaryNameAttribute` — это логическое имя атрибута, хранящего строковое значение, которое идентифицирует запись сущности. Это значение отображается в ссылке для открытия записи в пользовательском интерфейсе.

**Пример**. Сущность Contact использует атрибут `fullname` в качестве атрибута первичного имени.

> [!NOTE]
> Не каждая сущность будет иметь первичное имя. Некоторые из них не предназначены для отображения в пользовательском интерфейсе.

## <a name="entity-images"></a>Изображения сущностей

Значение свойства `PrimaryImageAttribute` — это логическое имя атрибута, хранящего данные изображения для записи сущности. Каждая сущность может иметь всего один атрибут изображения, а логическое имя атрибута всегда имеет вид `entityimage`.

**Пример**. Атрибут [EntityImage](reference/entities/contact.md#BKMK_EntityImage) [сущности Contact](reference/entities/contact.md) может хранить изображение контакта.

Из соображений производительности изображения сущностей не включаются в операции извлечения, если не были запрошены явно.

Каждая сущность, поддерживающая изображения сущностей, имеет три вспомогательных атрибута.

|SchemaName|Тип|Описание|
|--|--|--|
|`EntityImage_Timestamp` |`BigIntType`|Это значение указывает время последнего обновления изображения и используется для того, чтобы гарантировать скачивание и кэширование на клиенте последней версии изображения.|
|`EntityImage_URL`|`StringType`|Абсолютный URL-адрес для отображения изображения сущности в клиенте.|
|`EntityImageId`|`UniqueIdentifierType`|Уникальный идентификатор изображения.|

Дополнительные сведения: 
- [Руководство по Dynamics 365 Customer Engagement для разработчика. Атрибуты изображений](/dynamics365/customer-engagement/developer/image-attributes)
- [Руководство по Dynamics 365 Customer Engagement для разработчика. Задание и извлечение изображений сущностей](/dynamics365/customer-engagement/developer/sample-set-retrieve-entity-images)

> [!NOTE]
> Не следует путать это со значком, отображаемым для сущности в приложениях на основе моделей. Свойство `IconVectorName` содержит имя веб-ресурса SVG, который задает это значение.

## <a name="types-of-entities"></a>Типы сущностей

Возможности и поведение сущностей зависят от нескольких свойств сущности. Большинство из них относительно просты и имеют понятные имена. Дополнительные пояснения нужны для четырех из них: *владение*, *сущности действий*, *сущность Activityparty* и *дочерние сущности*.

### <a name="entity-ownership"></a>Владение сущностью

Сущности можно классифицировать по типу владения содержащихся в них данных. Это важная концепция, связанная со способом применения мер безопасности к сущностям. Эти сведения указаны в свойстве `OwnershipType`. Следующая таблица описывает разные типы владения:

|Тип владения  |Описание  |
|---------|---------|
|Business|Данные принадлежат бизнес-единице. Доступ к данным может контролироваться на уровне бизнес-единицы.|
|Нет|Данные не принадлежат другой сущности.|
|Организация|Данные принадлежат организации. Доступ к данным управляется на уровне организации.|
|Пользователь или рабочая группа|Данные принадлежат пользователю или группе. Действиями, которые можно выполнить с этими записями, можно управлять на уровне пользователя.|

При создании сущностей доступны только варианты **Организация** и **Пользователь или рабочая группа**. После выбора этого параметра его невозможно изменить. Выберите **Пользователь или рабочая группа**, чтобы более детально управлять тем, кто может просматривать записи и выполнять с ними действия. Если такой уровень управления не требуется, выберите **Организация**. 

### <a name="activity-entities"></a>Сущности действий

Действие — это задача, которую пользователь выполняет или должен выполнить. Это может быть любое действие, для которого можно создать запись в календаре. 

Действия моделируются не так, как другие типы сущностей, в которых хранятся бизнес-данные. Данные о действиях часто отображаются совместно в виде списка, однако каждому типу действия требуются уникальные свойства. Вместо использования одной сущности действия с каждым из возможных свойств существуют отдельные виды сущностей действий, каждый из которых наследует свойства от базовой [сущности ActivityPointer](reference/entities/activitypointer.md). У этих сущностей свойство `IsActivity` имеет значение true.


|Учреждение |Описание  |
|---------|---------|
|[Appointment](reference/entities/appointment.md)|Обязательство, представляющее временной интервал с временем начала и окончания и длительностью.|
|[Email](reference/entities/email.md)|Действие, выполняемое с помощью протоколов электронной почты.|
|[Fax](reference/entities/fax.md)|Действие, которое отслеживает результаты звонков и число страниц для факса, а также может хранить электронную копию документа.|
|[Letter](reference/entities/letter.md)|Действие, отслеживающее доставку письма. Может содержать электронную копию письма.|
|[PhoneCall](reference/entities/phonecall.md)|Действие для отслеживания телефонного звонка.|
|[RecurringAppointmentMaster](reference/entities/recurringappointmentmaster.md)|Главная встреча в ряде повторяющихся встреч.|
|[SocialActivity](reference/entities/socialactivity.md)|Только для внутреннего использования.|
|[Task](reference/entities/task.md)|Универсальное действие, представляющее работу, которую нужно выполнить.|

Когда кто-то создает одну из таких записей сущностей действий, создается соответствующая запись сущности `ActivityPointer` с тем же значением атрибута уникального идентификатора `ActivityId`. Вы не можете создавать, обновлять или удалять экземпляры сущности `ActivityPointer`, но можете извлекать их. Это позволяет представить все типы действий вместе в виде списка.

Вы можете создать настраиваемые сущности действий с аналогичным поведением.
<!-- TODO: Add link to topic about creating an activity entity -->

### <a name="activityparty-entity"></a>Сущность ActivityParty

Эта сущность позволяет добавить структуру в атрибуты `PartyListType` сущности действия, которые содержат ссылки на другие сущности. Эта сущность вам пригодится при задании значений для атрибутов сущностей, таких как `Email.to` или `PhoneCall.from`. Внутри [сущности ActivityParty](reference/entities/activityparty.md) нужно задать атрибут [ParticipationTypeMask](reference/entities/activityparty.md#BKMK_ParticipationTypeMask), чтобы определить роль, которую выполняет ссылка. В число ролей входят `Sender`, `ToRecipient`, `Organizer` и многие другие.

Вы можете запрашивать сущность `ActivityParty`, но не можете создавать, получать, обновлять или удалять сторону действия вне того действия, с которым она связана.
Дополнительные сведения: 
- [Руководство по Dynamics 365 Customer Engagement для разработчика. Сущность ActivityParty](/dynamics365/customer-engagement/developer/activityparty-entity)


### <a name="child-entities"></a>Дочерние сущности

Сущности, у которых свойство `IsChildEntity` имеет значение true, никогда не будут иметь заданные привилегии либо принадлежать пользователю или рабочей группе. Операции, которые можно выполнить для дочерней сущности, привязаны к сущности, с которой они имеют связь "многие к одному". Пользователи могут выполнять операции с дочерними сущностями только в том случае, если они могут выполнить аналогичную операцию со связанной сущностью. Дочерние сущности удаляются автоматически при удалении записи сущности, от которой они зависят.

Например, `PostComment`, `PostLike` и `PostRole` являются дочерними элементами сущности `Post`.

## <a name="entity-keys"></a>Ключи сущностей

Каждое определение альтернативного ключа описывает один или несколько атрибутов, которые однозначно идентифицируют экземпляр сущности. Альтернативные ключи обычно применяются только для интеграции с внешними системами. Альтернативные ключи можно определить для однозначной идентификации записи. Это удобно при интеграции данных в систему, которая не поддерживает ключи уникального идентификатора GUID. Вы можете определить одно значение поля или их комбинацию, чтобы однозначно идентифицировать сущность. Добавление альтернативного ключа применит ограничение уникальности к этим атрибутам. Вы не сможете создать или обновить другую запись сущности, чтобы получить те же значения.

Дополнительные сведения: 
 - [Руководство по настройке Dynamics 365 Customer Engagement. Определение альтернативных ключей для ссылки на записи Dynamics 365](/dynamics365/customer-engagement/customize/define-alternate-keys-reference-records)
 - ["Руководство по Dynamics 365 Customer Engagement для разработчика. Определение альтернативных ключей для сущности" и "Руководство для разработчика. Синхронизация данных Dynamics 365 с внешними системами"](/dynamics365/customer-engagement/developer/synchronize-dynamics-365-data-with-external-systems)

## <a name="entity-states"></a>Состояния сущностей

Большинство сущностей имеют два свойства для отслеживания состояния записи. Это `StateCode` и `StatusCode`, которые в приложениях на основе моделей называются **состоянием** и **причиной состояния**, соответственно. 

Оба атрибута содержат набор параметров, которые отображают допустимые значения. Значения атрибутов `StateCode` и `StatusCode` связаны таким образом, что для заданного `StateCode` допустимы только определенные параметры `StatusCode`.

Это может зависеть от конкретной сущности, однако общий шаблон для многих сущностей и поведение по умолчанию для настраиваемых сущностей имеют следующий вид:

|Параметры StateCode  |Параметры StatusCode  |
|---------|---------|
|0: Active|1: Active|
|1: Inactive|2: Inactive|

Некоторые сущности будут иметь разные наборы параметров. 

**Например**, параметры `StateCode` и `StatusCode` сущности `PhoneCall`.


|`StateCode`|`StatusCode`|
|---------|---------|
|0: Open|1: Open|
|1: Completed|2: Made <br />4: Received|
|2: Cancelled|3: Cancelled|

Набор допустимых кодов StateCode для сущности не настраивается, а коды StatusCode можно настроить. Вы можете добавить дополнительные параметры `StatusCode` для соответствующего `StateCode`.

Для настраиваемых сущностей можно определить дополнительные критерии допустимых переходов между состояниями. Дополнительные сведения: 
- [Руководство по Dynamics 365 Customer Engagement для разработчика. Настройка метаданных атрибутов сущностей](/dynamics365/customer-engagement/developer/customize-entity-attribute-metadata)
- [Руководство по Dynamics 365 Customer Engagement для разработчика. Определение переходов для настраиваемой модели состояний](/dynamics365/customer-engagement/developer/define-custom-state-model-transitions)

### <a name="see-also"></a>См. также

[Сущности в Common Data Service for Apps](entities.md)
