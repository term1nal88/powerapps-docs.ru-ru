---
title: "Устранение неполадок. Не удается создать или получить гибридное веб-приложение для этой базы данных | Документация Майкрософт"
description: "Устранение проблем при создании настраиваемых сущностей с помощью CDS и Power Query путем изменения ограничений администратора AAD."
services: 
suite: powerapps
documentationcenter: na
author: mllopis
manager: kfend
editor: 
tags: 
ms.service: powerapps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/18/2017
ms.author: millopis
ms.openlocfilehash: 230ad9f61185caff93fb3a5f56c62176b4f78c16
ms.sourcegitcommit: 43be6a4e08849d522aabb6f767a81c092419babc
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/07/2017
---
# <a name="troubleshooting---unable-to-create-or-retrieve-a-mashup-for-this-database"></a>Устранение неполадок. Не удается создать или получить гибридное веб-приложение для этой базы данных
При использовании функции **Новые сущности данных (предварительная техническая версия)** вы можете столкнуться с такой ошибкой:

    *Unable to create or retrieve a mashup for the current database*

Это может произойти, когда вы используете эту функцию для создания *настраиваемых сущностей* в **Common Data Service (CDS)** на основе данных из внешних источников с помощью **Power Query**. Такая ошибка появляется, когда **Power Query** не может получить доступ к данным организации в **PowerApps или CDS**. Это может произойти в двух ситуациях:

* Администратор клиента **Azure Active Directory** (AAD) запретил пользователям предоставлять приложениям разрешение на доступ к данным компании от своего имени.
* Использование неуправляемого клиента Active Directory. Неуправляемый клиент представляет собой каталог без глобального администратора, который был создан для самостоятельной регистрации. Чтобы предотвратить такое развитие событий, пользователи должны *сначала* преобразовать каталог в управляемый клиент, а затем применить одно из двух решений этой проблемы, описанных в следующем разделе.

## <a name="how-to-fix-the-issue"></a>Устранение проблемы
Проблему, описанную выше, можно устранить двумя способами:

* Попросить администратора AAD изменить ограничения, чтобы пользователи могли разрешать приложениям получать доступ к данным компании.
* Попросить администратора AAD предоставить **Power Query** доступ к данным.

Далее описано, как применить эти решения.

### <a name="allowing-users-to-give-apps-consent-to-access-company-data"></a>Разрешение пользователям предоставлять приложениям доступ к данным компании
Обратитесь к администратору клиента AAD и попросите его выполнить приведенные ниже действия, чтобы пользователи моли разрешать любому приложению получать доступ к данным компании.

1. Перейдите на сайт [https://portal.azure.com](https://portal.azure.com).
2. Откройте колонку **Azure Active Directory**.
3. Выберите раздел **Параметры пользователей**.
4. Выберите значение **Да** рядом с параметром **Пользователи могут разрешать приложениям доступ к корпоративным данным от своего имени**, а затем нажмите кнопку **Сохранить**.
5. После выполнения этих действий проблема будет устранена.

Это самый простой способ, но он предоставляет более широкие права, чем следующее решение.

### <a name="allowing-power-query-to-access-company-data"></a>Предоставление Power Query доступа к данным компании
Второй вариант решения — попросить администратора клиента дать разрешение на доступ **Power Query** без изменения разрешений на уровне клиента. Попросите администратора клиента выполнить следующие действия:

1. Установить [Azure PowerShell](https://docs.microsoft.com/powershell/azure/install-azurerm-ps).
2. Выполнить следующие команды PowerShell:
   * Login-AzureRmAccount (а затем войти как администратор клиента);
   * New-AzureRmADServicePrincipal -ApplicationId f3b07414-6bf4-46e6-b63f-56941f3f4128.

Этот подход по сравнению с изменением разрешений в масштабах клиента является более целенаправленным. Он подготавливает только субъект-службу **Power Query**, но не изменяет другие разрешения в клиенте.

