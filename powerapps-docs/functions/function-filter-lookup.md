---
title: "Функции Filter, Search и LookUp | Документация Майкрософт"
description: "Справочные сведения о функциях Filter и LookUp в PowerApps, в том числе описание синтаксиса."
services: 
suite: powerapps
documentationcenter: na
author: gregli-msft
manager: anneta
editor: 
tags: 
ms.service: powerapps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 02/05/2017
ms.author: gregli
ms.openlocfilehash: f55b66e615b79852b86cc5ea88ee9fbef321f8aa
ms.sourcegitcommit: 6afca7cb4234d3a60111c5950e7855106ff97e56
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/23/2018
---
# <a name="filter-search-and-lookup-functions-in-powerapps"></a>Функции Filter, Search и LookUp в PowerApps
Эти функции выполняют поиск [записей](../working-with-tables.md#records) в [таблице](../working-with-tables.md).

## <a name="description"></a>Описание
Функция **Filter** находит записи в таблице, соответствующие заданным условиям формулы.  Используйте функцию **Filter**, чтобы найти набор записей, соответствующих одному или нескольким условиям, или удалить наборы, не соответствующие заданным условиям.

Функция **LookUp** находит первую запись в таблице, соответствующую условиям формулы.  Используйте функцию **LookUp**, чтобы найти отдельную запись, соответствующую одному или нескольким условиям.

В обоих случаях формула вычисляется для каждой записи этой таблицы.  Записи, возвращающие значение *true*, включаются в результат.  Помимо обычных [операторов](operators.md) формулы, вы можете использовать операторы поиска соответствий подстроки **[in](operators.md#in-and-exactin-operators)** и **[exactin](operators.md#in-and-exactin-operators)**.

[!INCLUDE [record-scope](../includes/record-scope.md)]

Функция **Search** находит записи в таблице, содержащие строку в одном из столбцов. Строка может находиться в любом месте столбца. Например, выполняя поиск по фразе rob или bert, соответствие может быть обнаружено в столбце со словом Robert. При поиске регистр не учитывается. В отличие от функций **Filter** и **LookUp**, функция **Search** выполняет поиск при помощи одной строки, а не формулы.

Функции **Filter** и **Search** возвращают таблицу, которая содержит те же столбцы, что и исходная таблица, и записи, соответствующие заданным условиям. В то время как функция **LookUp** возвращает только первую найденную запись после применения формулы для сведения записи к одному значению. Если записи не обнаружены, функции **Filter** и **Search** возвращают [пустую](function-isblank-isempty.md) таблицу, а функция **LookUp** — *пустое значение*.  

[Таблицы](../working-with-tables.md) в PowerApps представлены значением, как любая строка или число. Их можно передавать в функции и получать в качестве результата выполнения функций.  Функции **Filter**, **Search** и **LookUp** не изменяют исходную таблицу, а принимают ее в качестве аргумента и возвращают таблицу, запись или отдельное значение из нее. Подробнее это описано [здесь](../working-with-tables.md).

[!INCLUDE [delegation](../includes/delegation.md)]

## <a name="syntax"></a>Синтаксис
**Filter**( *Table*, *Formula1* [, *Formula2*, ... ] )

* *Table* — обязательный аргумент. Таблица для поиска.
* *Formula(s)* — обязательный параметр. Формула, по которой вычисляется каждая запись этой таблицы. Функция возвращает все записи, возвращающие значение **true**. Можно ссылаться на любые столбцы в таблице. Если указано несколько формул, их результаты объединяются с результатами функции **[And](function-logicals.md)**.

**Search**( *Table*, *SearchString*, *Column1* [, *Column2*, ... ] )

* *Table* — обязательный аргумент. Таблица для поиска.
* *SearchString* — обязательный параметр. Строка для поиска. Если указать *пустое значение* или пустую строку, возвращаются все записи.
* *Column(s)* — обязательный параметр. Имена столбцов в *таблице* для поиска. Столбцы для поиска должны содержать текст. Имена столбцов должны быть строками, заключенными в двойные кавычки. Тем не менее эти имена должны быть статическими и не могут вычисляться с помощью формулы. Если параметр *SearchString* найден в данных любого из этих столбцов в виде частичного совпадения, возвращается полная запись.

> [!NOTE]
> Для источников данных SharePoint и Excel, содержащих имена столбцов с пробелами, вместо каждого пробела укажите **"\_x0020\_"**. Например, **Имя столбца** укажите как **Имя_x0020_столбца**.

**LookUp**( *Table*, *Formula* [, *ReductionFormula* ] )

* *Table* — обязательный аргумент. Таблица для поиска. В пользовательском интерфейсе синтаксис показан как *источник* над полем функции.
* *Formula* — обязательный аргумент.
  Формула, по которой вычисляется каждая запись этой таблицы. Функция возвращает первую запись, которая возвращает значение **true**. Можно ссылаться на любые столбцы в таблице. В пользовательском интерфейсе синтаксис показан как *условие* над полем функции.
* *ReductionFormula* — необязательный параметр. Эта формула вычисляется по найденной записи, а затем эта запись сводится к одному значению. Можно ссылаться на любые столбцы в таблице. Если этот параметр не задан, функция возвращает полную запись из таблицы. В пользовательском интерфейсе синтаксис показан как *результат* над полем функции.

## <a name="examples"></a>Примеры
В приведенных ниже примерах используется [источник данных](../working-with-data-sources.md) **IceCream**.

![](media/function-filter-lookup/icecream.png)

| Формула | Описание | Возвращаемый результат |
| --- | --- | --- |
| **Filter( IceCream, OnOrder > 0 )** |Возвращает записи, где **OnOrder** больше нуля. |<style> img { max-width: none; } </style> ![](media/function-filter-lookup/icecream-onorder.png) |
| **Filter( IceCream, Quantity + OnOrder > 225 )** |Возвращает записи, где сумма значений в столбцах **Quantity** и **OnOrder** больше 225. |![](media/function-filter-lookup/icecream-overstock.png) |
| **Filter( IceCream, "chocolate" in Lower( Flavor ) )** |Возвращает записи, где слово chocolate присутствует в именах в столбце **Flavor**, независимо от регистра. |![](media/function-filter-lookup/icecream-chocolate.png) |
| **Filter( IceCream, Quantity < 10  && OnOrder < 20 )** |Возвращает записи, где значение столбца **Quantity** меньше 10, а столбца **OnOrder** меньше 20.  Так как записи, соответствующие заданным условиям, отсутствуют, возвращается пустая таблица. |![](media/function-filter-lookup/icecream-empty.png) |
| **Search( IceCream, "choc", "Flavor" )** |Возвращает записи, где строка choc присутствует в именах в столбце **Flavor**, независимо от регистра. |![](media/function-filter-lookup/icecream-chocolate.png) |
| **Search( IceCream, "", "Flavor" )** |Так как условия поиска не заданы, возвращаются все записи. |![](media/function-filter-lookup/icecream.png) |
| **LookUp( IceCream, Flavor = "Chocolate", Quantity )** |Ищет запись со значением столбца **Flavor** равным Chocolate (в этом случае найдена только одна запись).  Для первой найденной записи возвращает значение столбца **Quantity**. |100 |
| **LookUp( IceCream, Quantity > 150, Quantity + OnOrder )** |Ищет запись со значением столбца **Quantity** большим 100 (в этом случае таких записей несколько).  Для первой найденной записи (в этом случае Vanilla в столбце **Flavor**) возвращает сумму значений в столбцах **Quantity** и **OnOrder**. |250 |
| **LookUp( IceCream, Flavor = "Pistachio", OnOrder )** |Ищет запись со значением столбца **Flavor** равным Pistachio (в этом случае такие записи отсутствуют).  Так как запись не найдена, функция **Lookup** возвращает *пустое значение*. |*пустое значение* |
| **LookUp( IceCream, Flavor = "Vanilla" )** |Ищет запись со значением столбца **Flavor** равным Vanilla (в этом случае найдена только одна запись).  Так как формула сведения не применялась, возвращается целая запись. |{ Flavor: "Vanilla", Quantity: 200, OnOrder: 75 } |

### <a name="search-user-experience"></a>Оптимизация поиска
В большинстве приложений вы можете ввести один или несколько символов в текстовом поле, чтобы отфильтровать список в большом наборе данных. При вводе в списке отображаются только те записи, которые соответствуют заданным условиям поиска.

Примеры, приведенные в остальной части статьи, — это результаты поиска в списке **Customers**, содержащие следующие данные:

![](media/function-filter-lookup/customers.png)

Чтобы создать этот источник данных в виде коллекции, создайте элемент управления **[Кнопка](../controls/control-button.md)** и задайте в качестве значения свойства **OnSelect** следующую формулу:

**ClearCollect(Customers, Table({Name: "Fred Garcia", Company: "Northwind Traders"}, {Name: "Cole Miller", Company: "Contoso"}, {Name: "Glenda Johnson", Company: "Contoso"}, {Name: "Mike Collins", Company: "Adventure Works"}, {Name: "Colleen Jones", Company: "Adventure Works"}))**

Как показано в этом примере, вы можете вывести список записей в элемент управления [**Gallery**](../controls/control-gallery.md) (Коллекция) в нижней части экрана. В верхней части экрана можно добавить элемент управления для [**Text input**](../controls/control-text-input.md) (Текстовое поле ввода) под названием **SearchInput**, что позволит пользователям указывать интересующие их записи.

![](media/function-filter-lookup/customers-ux-unfiltered.png)

При вводе символов в текстовом поле **SearchInput** результаты в коллекции автоматически фильтруются. В этом случае в коллекции будут отображаться записи, где имена клиентов (не названия компаний) начинаются с последовательности символов, указанных в текстовом поле **SearchInput**. Если пользователь введет в поле поиска **co**, в коллекции отобразятся следующие результаты:

![](media/function-filter-lookup/customers-ux-startswith-co.png)

Чтобы выполнить фильтрацию результатов по столбцу **Name**, задайте в качестве значения свойства **Items** элемента управления "Коллекция" одну из этих формул:

| Формула | Описание | Возвращаемый результат |
| --- | --- | --- |
| **Filter(Customers, StartsWith(Name, SearchInput.Text))** |Фильтрует источник данных **Customers** по записям, в которых искомая строка находится в начале столбца **Name**. При проверке регистр не учитывается. Если пользователь введет в поле поиска **co**, в коллекции отобразятся следующие результаты: **Colleen Jones** и **Cole Miller**. В этом случае значение **Mike Collins** не отобразится, так как в столбце **Name** запись не начинается с искомой строки. |<style> img { max-width: none } </style> ![](media/function-filter-lookup/customers-name-co-startswith.png) |
| **Filter(Customers, SearchInput.Text in Name)** |Фильтрует источник данных **Customers** по записям, в которых искомая строка находится в любом положении в столбце **Name**. При проверке регистр не учитывается. Если пользователь введет в поле поиска **co**, в коллекции отобразятся следующие результаты: **Colleen Jones**, **Cole Miller** и **Mike Collins**. Это связано с тем, что записи столбца **Name** содержат искомую строку (в любом положении). |<style> img { max-width: none } </style> ![](media/function-filter-lookup/customers-name-co-contains.png) |
| **Search(Customers, SearchInput.Text, "Name")** |Как и при использовании оператора **in**, функция **Search** выполняет поиск соответствий во всех положениях записей в столбце **Name**. Обратите внимание, что имя столбца необходимо заключить в двойные кавычки. |<style> img { max-width: none } </style> ![](media/function-filter-lookup/customers-name-co-contains.png) |

Вы можете расширить область поиска, добавив столбец **Company** и **Name**.

| Формула | Описание | Возвращаемый результат |
| --- | --- | --- |
| **Filter(Customers, StartsWith(Name, SearchInput.Text) &#124;&#124; StartsWith(Company, SearchInput.Text))** |Фильтрует источник данных **Customers** по записям, в которых записи в столбце **Name** или **Company** начинаются со строки поиска (например, **co**).  Если функция **StartsWith** возвращает значение *true*, [оператор **&#124;&#124;**](operators.md) также возвращает значение *true*. |<style> img { max-width: none } </style> ![](media/function-filter-lookup/customers-all-co-startswith.png) |
| **Filter(Customers, SearchInput.Text in Name &#124;&#124; SearchInput.Text in Company)** |Фильтрует источник данных **Customers** по записям, в которых искомая строка (например, **co**) находится в любом положении в столбце **Name** или **Company**. |<style> img { max-width: none } </style> ![](media/function-filter-lookup/customers-all-co-contains.png) |
| **Search(Customers, SearchInput.Text, "Name", "Company")** |Как и при использовании оператора **in**, функция **Search** ищет в источнике данных **Customers** записи, в которых искомая строка (например, **co**) находится в любом положении в столбце **Name** или **Company**. В отличие от функции **Filter**, функцию **Search** проще записывать и читать. Это следует учитывать, если вы хотите указать несколько столбцов и операторов **in**. Обратите внимание, что имена столбцов необходимо заключать в двойные кавычки. |<style> img { max-width: none } </style> ![](media/function-filter-lookup/customers-all-co-contains.png) |

