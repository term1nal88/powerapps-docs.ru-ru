---
title: Настройка обработчиков событий для основных форм приложений на основе моделей в PowerApps | Документы Майкрософт
description: Узнайте, как настроить обработчики событий в Dynamics 365 for Customer Engagement
Keywords: Main form; Configure event handlers; Dynamics 365
author: Mattp123
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- powerapps
ms.author: matp
manager: kvivek
ms.date: 06/27/2018
ms.service: crm-online
ms.topic: article
ms.assetid: dc0ebb3f-0c00-413a-968f-9cfd107055c0
ms.openlocfilehash: e05e9d840a2b3ad7d8d5c74e8e3b670504f739b0
ms.sourcegitcommit: aba996b1773ecdf62758e06b34eaf57bede29e08
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/08/2018
ms.locfileid: "39702923"
---
# <a name="configure-model-driven-app-form-event-handlers"></a>Настройка обработчиков событий форм приложений на основе моделей

 Обработчики событий формы для форм PowerApps можно настроить для следующих областей формы:  
  
|Элемент|Мероприятие|Описание|  
|-------------|-----------|-----------------|  
|Форма|`OnLoad`|Происходит при загрузке формы.|  
||`OnSave`|Происходит при сохранении данных.|  
|Вкладка|`TabStateChange`|Происходит при разворачивании или сворачивании вкладки.|  
|Поле|`OnChange`|Происходит при изменении данных в поле и потере фокуса элементом управления.|  
|IFRAME|`OnReadyStateComplete`|Происходит при загрузке содержимого IFRAME.|  
  
 Обработчик событий содержит ссылку на веб-ресурс JavaScript и функцию, определенную на этом веб-ресурсе, которая будет выполняться при наступлении этого события. Для каждого элемента можно настроить до 50 отдельных обработчиков событий.  
  
> [!IMPORTANT]
>  Если настроить обработчик событий неправильно, это может привести к ошибкам скрипта, из-за чего форма может не загружаться или функционировать неправильно. Если вы не являетесь разработчиком скрипта, необходимо тщательно проанализировать, какие параметры конфигурации требуются этому скрипту.  
>   
>  Не настраивайте обработчик событий скрипта с помощью библиотеки из недоверенного источника. Скрипты можно использовать для выполнения любого действия пользователя, а неправильно написанный скрипт может значительно ухудшить производительность формы.  
>   
>  После настройки обработчика событий всегда тестируйте его, чтобы убедиться в правильности функционирования обработчика.  
  
### <a name="to-configure-an-event-handler"></a>Настройка обработчика событий 
  
1.  В редакторе форм выберите элемент с событием, для которого требуется настроить обработчик.  
  
2.  На [вкладке "Главная"](form-editor-user-interface-legacy.md#home-tab) в группе **Изменить** выберите **Изменить свойства** или просто дважды щелкните элемент.  
  
3.  В диалоговом окне свойств элемента выберите вкладку **События**.  
  
4.  Разверните область **Библиотеки форм**. Если в этой области отсутствует библиотека с функцией, которую вы хотите назначить в качестве обработчика событий, добавьте сюда эту библиотеку.  
  
5.  Чтобы добавить библиотеку форм в обработчик событий, выполните следующие действия:  
    1.  В разделе **Библиотеки форм** области **Список событий** выберите **Добавить**.  
  
    2.  Найдите веб-ресурс JavaScript в списке доступных веб-ресурсов. Выберите его, а затем щелкните **Добавить**.  
  
         Если нужного веб-ресурса JavaScript не существует, щелкните **Создать**, чтобы открыть форму создания веб-ресурса и создать его.  
  
    3.  Чтобы создать веб-ресурс JavaScript, выполните следующие действия:  
        1.  В форме веб-ресурса задайте следующие свойства:  
  
            |Свойство|Значение|  
            |--------------|-----------|  
            |Имя|**Обязательно**. Введите имя веб-ресурса.|  
            |Отображаемое имя|**Обязательно**. Введите имя, которое будет отображаться в списке веб-ресурсов.|  
            |Описание|Необязательно. Введите описание веб-ресурса.|  
            |Тип|**Обязательно**. Выберите **Скрипт (JScript)**.|  
            |Язык|Необязательно. Выберите один из языков, доступных для вашей организации.|  
  
        2.  Если вам был предоставлен скрипт, мы настоятельно рекомендуем использовать для поиска и отправки файла кнопку **Обзор**.  
  
             Кроме того, можно нажать кнопку **Текстовый редактор** и вставить или ввести содержимое скрипта в диалоговом окне **Изменить содержимое**.  
  
            > [!NOTE]
            >  Поскольку этот простой текстовый редактор не предоставляет никаких функций для проверки правильности скрипта, как правило, для редактирования и отправки скриптов требуется использовать отдельное приложение, такое как Visual Studio.  
  
        3.  Выберите **Сохранить** и закройте диалоговое окно веб-ресурса.  
  
        4.  Созданный веб-ресурс выбран в диалоговом окне **Поиск записи**. Выберите **Добавить**, чтобы закрыть диалоговое окно.  
6.  В разделе **Обработчики событий** выберите событие, для которого требуется настроить обработчик.  
  
7.  Нажмите **Добавить**, чтобы открыть диалоговое окно **Свойства обработчика**.  
  
8. На вкладке **Сведения** выберите подходящую библиотеку и введите имя функции, которая должна выполняться для соответствующего события.  
  
9. По умолчанию обработчик событий включен. Снимите флажок **Включено**, если включать это событие не требуется.  
  
     Некоторые функции требуют передачи функции контекста выполнения. При необходимости выберите вариант **Передавать контекст выполнения в качестве первого параметра**.  
  
     Некоторые функции принимают набор параметров для контроля поведения функции. Если такие параметры нужны, введите их в **разделенном запятыми списке параметров, которые будут переданы функции**.  
  
10. На вкладке **Зависимости** добавьте в область **Зависимые поля** любые поля, от которых зависит скрипт.  
  
11. Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно **Обработчик событий**.  
  
12. При входе в обработчик событий можно скорректировать порядок выполнения функции относительно любых других функций. Для этого используйте зеленые стрелки перемещения вверх и вниз.  
  
13. Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно со свойствами элементов.  
  
14. Нажмите **Сохранить**, чтобы сохранить изменения. Выберите **Опубликовать**, чтобы опубликовать форму.  
  
> [!NOTE]
>  Пользовательский интерфейс позволяет корректировать порядок загрузки скриптов с помощью зеленых стрелок перемещения вверх и вниз, однако на самом деле скрипты не загружаются последовательно.   

## <a name="next-steps"></a>Дальнейшие действия

[Использование основной формы и ее компонентов](use-main-form-and-components.md)
