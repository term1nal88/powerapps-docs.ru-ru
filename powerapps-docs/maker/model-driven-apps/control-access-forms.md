---
title: Управление доступом к формам управляемых моделью приложений в PowerApps | MicrosoftDocs
description: 'Узнайте, как управлять доступом к основным формам'
ms.custom: ''
ms.date: 06/27/2018
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
  - Dynamics 365 (online)
  - Dynamics 365 Version 9.x
  - powerapps
author: Mattp123
ms.assetid: 15d123e0-b604-45dd-ab34-0b37787a04bb
caps.latest.revision: 33
ms.author: matp
manager: kvivek
tags: null
search.audienceType:
  - maker
search.app:
  - PowerApps
  - D365CE
---
# <a name="control-access-to-model-driven-app-forms"></a>Управление доступом к формам управляемых моделью приложений

 Существует два способа управления доступом к основным формам.  
  
- **Изменение состояния основной формы на неактивное**  
  
     Для основных форм можно задать активное или неактивное состояние. Эта функция была включена главным образом для управления новыми добавленными формами при обновлении организации Dynamics 365 Customer Engagement, но ее можно использовать для блокировки возможности пользователя использовать какую-либо из основных форм.   
  
- **Назначение ролей безопасности основной форме**  
  
     Используйте этот параметр, чтобы сделать основную форму доступной для определенных групп.  
  
 Различные пользователи в организации могут взаимодействовать с теми же данными различными способами. Руководителям может требоваться возможность быстро просматривать информацию в записи, а работникам может требоваться форма, которая позволяет ускорить ввод данных. Чтобы удовлетворить различные потребности, можно назначить формам роли безопасности, к которым принадлежат различные группы пользователей.  
  
 Пошаговые инструкции см. в разделе [Назначение ролей безопасности формам](https://docs.microsoft.com/dynamics365/customer-engagement/admin/assign-security-roles-form).  
  
 Если для сущности определено несколько основных или мобильных форм, можно указать, какие формы смогут использовать пользователи на основе их ролей безопасности. Поскольку для каждой сущности должна быть предусмотрена форма, отображаемая любому пользователю, хотя бы одну форму необходимо определить как "резервную", то есть эта форма будет доступна пользователям, ролям безопасности которых явно не назначены формы.  
  
> [!NOTE]
>  Невозможно назначить экспресс-формы для создания и просмотра ролям безопасности.  
  
 В редакторе форм или в таблице форм можно назначить роли безопасности для той или иной формы. Однако, если для сущности задана только одна форма, будет невозможно отменить параметр **Предоставить резервную форму** в диалоговом окне **Назначение ролей безопасности**. В этом случае, даже если форме будут назначены роли безопасности, любой пользователь, связанный с ролью безопасности, которая не была явно включена в список, сможет просматривать эту форму, так как она используется в качестве резервной.  
  
 После создания второй основной или мобильной формы можно будет отменить параметр **Предоставить резервную форму** для одной из этих форм. Система всегда гарантирует наличие как минимум одной формы в качестве резервной.  
  
 Если имеется несколько основных форм, можно задать порядок форм, который будет определять, какие формы будут отображаться пользователям, что будет настройкой по умолчанию. Если имеется несколько форм, доступных для использования, они могут изменить формы, и выбранная форма будет формой по умолчанию, пока не будут выбрана другая форма. Этот пользовательский параметр сохраняется в браузере пользователя. При использовании другого компьютера или браузера будет отображаться исходная форма по умолчанию.  
  
## <a name="strategies-to-manage-the-fallback-form"></a>Стратегии управления резервной формой  
 Стратегии управления резервной формой включают следующее:  
  
<a name="BKMK_DoNotUseMultipleForms"></a>   
### <a name="all-users-view-the-same-form"></a>Отображение одной и той же формы для всех пользователей  
 Если нет необходимости использовать несколько форм для сущности, не требуется создавать резервную форму.  
  
<a name="BKMK_Contingecyform"></a>   
### <a name="create-a-contingency-form"></a>Создание формы на непредвиденный случай  
 Если используются формы на основе ролей, поскольку требуется ограничить информацию, которую могут просматривать или изменять пользователи, создайте форму, в которой отображается минимум сведений. Затем в диалоговом окне **Назначение ролей безопасности** выберите **Отображать только для выбранных ролей безопасности**, но не выбирайте другие роли, кроме роли "Системный администратор", и щелкните **Предоставить резервную форму**. В результате эта форма будет отображаться только роли "Системный администратор" и всем пользователям, роли безопасности которых не связаны с определенной формой. Можно добавить веб-ресурс HTML в форму с информацией о причине того, почему отображается так мало сведений в форме, и ссылку на сведения о том, как запросить добавление в роль безопасности, связанную с формой, или включить новую роль безопасности для формы.  
  
> [!NOTE]
>  Нельзя включить веб-ресурс в верхний или нижний колонтитул формы.  
  
<a name="BKMK_CreateGenericForm"></a>   
## <a name="create-a-generic-form"></a>Создание универсальной формы  
 Если используются формы на основе ролей для обеспечения настраиваемого взаимодействия с пользователем на основе роли пользователя, можно задать наименее специализированную форму в качестве резервной и настроить ее для отображения всем пользователям. Затем создайте настраиваемые формы для конкретных ролей безопасности и укажите, чтобы эти формы отображались только для определенных ролей безопасности. Не устанавливайте эти формы как резервные. Наконец, в списке **Формы** в диалоговом окне **Порядок форм** укажите, какие формы будут отображаться, начиная с формы с самым ограниченным доступом и заканчивая самой универсальной формой. Ваша резервная форма отобразится внизу списка. Это приведет к тому, что в качестве формы по умолчанию для пользователей будет отображаться форма, настроенная в соответствии с их ролью, но они по прежнему смогут использовать средство выбора форм для выбора самой распространенной формы, если необходимо. Любая выбранная ими форма будет формой по умолчанию, пока не будет выбрана другая форма.  
  
<a name="BKMK_UseFormScripting"></a>   
## <a name="use-form-scripting"></a>Использование скриптов форм  

 Наконец, в веб-приложении разработчики могут, но им не рекомендуется, использовать скрипты в событии Onload формы, чтобы использовать [коллекцию Xrm.Page.ui.formSelector.items](http://go.microsoft.com/fwlink/p/?LinkID=513300) для запроса доступных форм и использования метода navigate для направления пользователей к определенной форме. Помните, что [метод navigate](http://go.microsoft.com/fwlink/p/?LinkID=513301) приводит к повторной загрузке формы (и повторному возникновению события Onload). Ваша логика в обработчике событий всегда должна проверять некоторые условия перед использованием метода navigate, чтобы избегать бесконечного цикла или ненужного ограничения параметров пользователя для перехода между формами.  
  
 Этот подход не будет работать в Dynamics 365 for tablets, поскольку невозможно выбрать несколько форм.  

### <a name="next-steps"></a>Дальнейшие действия  

[Назначение ролей безопасности формам](https://docs.microsoft.com/dynamics365/customer-engagement/admin/assign-security-roles-form)
