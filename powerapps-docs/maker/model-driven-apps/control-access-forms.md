---
title: Управление доступом к формам приложений на основе моделей в PowerApps | Документация Майкрософт
description: Узнайте, как управлять доступом к главной форме
ms.custom: ''
ms.date: 06/27/2018
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- powerapps
author: Mattp123
ms.assetid: 15d123e0-b604-45dd-ab34-0b37787a04bb
caps.latest.revision: 33
ms.author: matp
manager: kvivek
tags: ''
ms.openlocfilehash: a895bd9ea0257585f942840924a7044a4dcc23fb
ms.sourcegitcommit: aba996b1773ecdf62758e06b34eaf57bede29e08
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/08/2018
ms.locfileid: "39699307"
---
# <a name="control-access-to-model-driven-app-forms"></a>Управление доступом к формам приложений на основе моделей

 Существует два способа управления доступом к основным формам.  
  
- **Сделать основную форму неактивной**  
  
     Можно задать активное или неактивное состояние для основных форм. Изначально этот компонент был включен, чтобы управлять новыми формами, включенными при обновлении организаций по вовлеченности пользователей Dynamics 365, но его можно использовать, чтобы пользователи не имели доступа к любой основной форме.   
  
- **Назначить роли безопасности основным формам**  
  
     Используйте это, чтобы сделать основную форму доступной для определенной группы.  
  
 Разные люди в организации взаимодействуют с теми же данными по-разному. Руководители могут зависеть от возможности быстро проверять информацию в записи и обслуживать людей, которым может потребоваться форма, которая упрощает ввод данных. Необходимо выполнить различные требования, назначив формы ролям безопасности, которые принадлежат разным группам пользователей.  
  
 Пошаговые руководства см. в разделе [Назначение ролей безопасности форме для более детального контроля доступа](https://docs.microsoft.com/dynamics365/customer-engagement/admin/assign-security-roles-form).  
  
 При наличии более одной основной или мобильной формы, определенных для сущности, можно выбрать, какие формы на основе ролей безопасности можно использовать пользователям. Так как каждая сущность должна отображать формы для любого пользователя, необходимо назначить хотя бы одну форму в качестве "резервной", которая будет видима пользователям, роли безопасности которой не имеют каких-либо форм, явно назначенных таким пользователям.  
  
> [!NOTE]
>  Формы "Быстрое создание" и "Экспресс-форма" нельзя назначить ролям безопасности.  
  
 В редакторе форм или из сетки форм вы можете назначить форме роли безопасности. Тем не менее, если имеется только одна форма для сущности, вы не можете очистить параметр **Enabled for fallback** (Предоставить резервную форму) в диалоговом окне **Назначение ролей безопасности**. Таким образом, несмотря на то что роли безопасности назначены форме, любой пользователь, связанный с ролью безопасности, но не включенный в нее, по-прежнему имеет возможность просмотра формы, так как она используется для резервной формы.  
  
 После создания второй основной или мобильной формы для сущности можно очистить параметр **Предоставить резервную форму** для одного из них. Система будет подтверждать, что по крайней мере одна форма предоставлена резервной форме.  
  
 При наличии более одной основной формы можно указать ее порядок, который будет контролировать, какую из форм пользователь может просматривать как доступную по умолчанию. Если существует несколько форм, которые можно использовать, ее можно изменить, и выбранная будет формой по умолчанию, пока выбирается другая. Этот параметр хранится в браузере пользователя. Если используется другой компьютер или браузер, будет использоваться исходная форма по умолчанию.  
  
## <a name="strategies-to-manage-the-fallback-form"></a>Стратегии управления резервной формой  
 Ниже приведены стратегии управления резервной формой.  
  
<a name="BKMK_DoNotUseMultipleForms"></a>   
### <a name="all-users-view-the-same-form"></a>Просмотр одной и той же формы всеми пользователями  
 Если несколько форм для сущности не требуется, то и резервная форма тоже не нужна.  
  
<a name="BKMK_Contingecyform"></a>   
### <a name="create-a-contingency-form"></a>Создание формы на непредвиденные случаи  
 Поскольку вы используете формы на основе ролей и хотите ограничить доступ к информации, которую люди могут просматривать или редактировать, создайте форму, которая содержит минимум информации. Затем в разделе **Назначение ролей безопасности** выберите **Отображать только для выбранных ролей безопасности**, но не выбирайте никаких ролей, за исключением роли системного администратора, и выберите **Предоставить резервную форму**. Результатом является то, что эту форму никогда не увидят пользователи, за исключением системного администратора и любого пользователя, роли безопасности которого не были связаны с определенной формой. Вы можете включить веб-ресурс HTML в форму с информацией о том, почему в форме мало информации, и ссылку на информацию о том, как запросить добавление к роли безопасности, связанной с формой, или включить новую роль безопасности для формы.  
  
> [!NOTE]
>  Веб-ресурс нельзя включить в заголовок или нижний колонтитул формы.  
  
<a name="BKMK_CreateGenericForm"></a>   
## <a name="create-a-generic-form"></a>Создание универсальной формы  
 Если для обеспечения персонализированного интерфейса, основанного на роли пользователя, вы используете формы на основе ролей, можно установить свою наименее специализированную форму в качестве резервной формы и настроить ее для отображения для всех. Затем создайте настраиваемые формы для ролей безопасности и настройте их для отображения только для ролей безопасности, в которых они требуются. Не разрешайте этим формам быть резервными. Наконец, в списке **Формы** используйте диалоговое окно **Порядок форм**, чтобы указать, какие формы нужны для отображения их ранжирования от максимально эксклюзивного к менее эксклюзивному. Резервные формы будут в нижней части списка. Эта стратегия позволит пользователям видеть форму, которая была настроена для их роли по умолчанию, но они все равно смогут использовать выбор формы, чтобы выбрать наиболее распространенную, если необходимо. Независимо от того, какую форму они выбрали, она останется по умолчанию, пока не будет выбрана другая форма.  
  
<a name="BKMK_UseFormScripting"></a>   
## <a name="use-form-scripting"></a>Использование сценария формы  

 Наконец, в веб-приложении можно, но не рекомендуется, разработчику использовать сценарии в форме события OnLoad для использования [коллекции Xrm.Page.ui.formSelector.items](http://go.microsoft.com/fwlink/p/?LinkID=513300) для запроса доступных форм и использовать метод navigate, чтобы направить текущих пользователей в определенную форму. Помните, что [метод navigate](http://go.microsoft.com/fwlink/p/?LinkID=513301) приведет к повторной загрузке формы (и повторному возникновению события Onload). Прежде чем использовать метод navigate, ваша логика должна всегда проверять некоторые условия в обработчике событий, чтобы избежать бесконечного цикла или излишнего ограничения параметров пользователей для перемещения между формами.  
  
 Этот подход не будет работать для Dynamics 365 для планшетов, поскольку невозможно выбрать несколько форм.  

### <a name="next-steps"></a>Дальнейшие действия  

[Назначение ролей безопасности пользователям](https://docs.microsoft.com/dynamics365/customer-engagement/admin/assign-security-roles-form)
