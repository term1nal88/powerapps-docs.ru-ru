---
title: Справка по элементам управления "Форма отображения" и "Форма изменения" | Документация Майкрософт
description: Сведения об элементах управления "Отображать форму" и "Изменить форму" с описанием их свойств и примерами
services: ''
suite: powerapps
documentationcenter: na
author: gregli-msft
manager: anneta
editor: ''
tags: ''
ms.service: powerapps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 07/06/2017
ms.author: gregli
ms.openlocfilehash: c238a441c147c148fa619e6068579b75d643339a
ms.sourcegitcommit: 59785e9e82da8f5bd459dcb5da3d5c18064b0899
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2018
---
# <a name="edit-form-and-display-form-controls-in-powerapps"></a>Элементы управления "Изменить форму" и "Отображать форму" в PowerApps
Элементы управления "Отображать форму" и "Изменить форму" служат для отображения, изменения и создания записей в источнике данных.

## <a name="description"></a>Описание
С помощью элемента управления **Отображать форму**, добавленного в приложение, пользователь может отобразить все поля записи или только поля, указанные вами. С помощью элемента управления **Изменить форму** пользователь может изменить поля, создать запись и сохранить изменения в источнике данных.

![Примеры элементов управления формы](./media/control-form-detail/form-detail-intro.png)

Вы можете настроить элемент управления **[Коллекция](control-gallery.md)** для отображения таблицы из источника данных, а затем настроить форму для отображения записи, выбранной пользователем в коллекции. Также можно добавить один или несколько элементов управления **[Кнопка](control-button.md)**, чтобы пользователь мог сохранить изменения, отменить их и создать запись. Комбинируя элементы управления друг с другом, можно [создать полное решение](../working-with-forms.md).

### <a name="record-selection"></a>Выбор записи
Назначьте свойству **DataSource** формы таблицу записей, а затем настройте свойство **Item** формы для отображения записи из этой таблицы. Например, вы можете назначить свойству **Item** формы свойство **SelectedItem** элемента управления **[Коллекция](control-gallery.md)**. Когда пользователь выберет запись в коллекции, та же запись будет отображена в форме (возможно, с дополнительными полями). Если пользователь вернется в коллекцию и выберет другую запись, свойство **SelectedItem** коллекции изменится соответствующим образом. Это изменение вызовет обновление свойства **Item** формы, и в нем отобразится новая выбранная запись.

Каждая форма содержит один или несколько элементов управления **[Карточка](control-card.md)**. С помощью свойства **[DataField](control-card.md)** карточки можно [указать, какое поле должно отображаться в карточке, и настроить другие параметры](../add-form.md).

### <a name="create-a-record"></a>Создание записи
Когда элемент управления **Изменить форму** находится в режиме **редактирования**, пользователь может обновить запись, назначенную свойству **Item** формы. В этом режиме свойство **Mode** имеет значение **Edit**.

Если элемент управления **Изменить форму** находится в режиме **создания**, свойство **Item** игнорируется. Имеющиеся записи при этом в форме не отображаются. Вместо этого значения в каждом поле соответствуют значениям по умолчанию из источника данных, который вы назначили форме. Функция **[NewForm](../functions/function-form.md)** переводит форму в этот режим.

Например, вы можете назначить свойству **[Text](properties-core.md)** кнопки значение **Создать**, а ее свойству **[OnSelect](properties-core.md)** — формулу с функцией **[NewForm](../functions/function-form.md)**. При нажатии кнопки форма перейдет в режим **создания**, и пользователь сможет создать запись, начав с имеющихся значений.

Форма возвращается в режим **редактирования** при вызове функции **[ResetForm](../functions/function-form.md)** или успешном выполнении функции **[SubmitForm](../functions/function-form.md)**.

* Вы можете назначить свойству **[Text](properties-core.md)** кнопки текст **Отменить**, а ее свойству **[OnSelect](properties-core.md)** — формулу с функцией **[ResetForm](../functions/function-form.md)**. При нажатии этой кнопки текущие изменения будут отброшены, а значения в форме вернутся к значениям по умолчанию из источника данных.
* Вы можете назначить свойству **[Text](properties-core.md)** кнопки текст **Сохранить изменения**, а ее свойству **[OnSelect](properties-core.md)** — формулу с функцией **[SubmitForm](../functions/function-form.md)**. При нажатии этой кнопки источник данных будет обновлен, а значения в форме вернутся к значениям по умолчанию из источника данных.

### <a name="save-changes"></a>Сохранение изменений
С помощью кнопки **Сохранить изменения**, описанной в предыдущем разделе, пользователь может создать или обновить запись, а затем сохранить изменения в источнике данных. Однако то же самое можно сделать с помощью элемента управления **[Изображение](control-image.md)** или другого элемента управления. Для этого нужно использовать его вместе с функцией **[SubmitForm](../functions/function-form.md)**. В любом случае узнать результат можно с помощью свойств **Error**, **ErrorKind**, **OnSuccess** и **OnFailure**.

При вызове функции **[SubmitForm](../functions/function-form.md)** она сначала проверяет данные, которые пользователь желает отправить. Если обязательное поле не заполнено или не выполнено какое-либо другое условие, задается свойство **ErrorKind** и выполняется формула **OnFailure**. Вы можете настроить кнопку **Сохранить изменения** или другой элемент управления так, чтобы они срабатывали только при условии ввода допустимых данных (т. е. если свойство **Valid** формы имеет значение **true**). Если данные недопустимы, пользователь должен устранить проблему, а затем снова нажать кнопку **Сохранить изменения** (или отменить изменения с помощью кнопки **Отменить**), чтобы сбросить свойства **Error** и **ErrorKind**.

Если данные проходят проверку, функция **[SubmitForm](../functions/function-form.md)** отправляет их источнику данных. На это может потребоваться некоторое время, зависящее от задержки в сети.

* Если отправка выполняется успешно, свойство **Error** очищается, свойству **ErrorKind** присваивается значение **ErrorKind.None**, а затем выполняется формула **OnSuccess**. После создания записи (т. е. если ранее форма находилась в режиме **создания**), форма переходит в режим **редактирования**, чтобы можно было изменить новую или другую запись.
* Если отправить данные не удается, свойство **Error** содержит понятное сообщение об ошибке из источника данных. Свойству **ErrorKind** при этом присваивается значение, соответствующее проблеме, а затем выполняется формула **OnFailure**.

Некоторые источники данных распознают ситуации, когда два пользователя пытаются обновить одну и ту же запись одновременно. В этом случае свойству **ErrorKind** присваивается значение **ErrorKind.Conflict**, а для решения проблемы нужно применить вносимые пользователями изменения по очереди.

> [!TIP]
> Если вы добавляете на форму кнопку **Отменить**, чтобы пользователь мог отказаться от уже сделанных изменений, назначьте функцию **[ResetForm](../functions/function-form.md)** свойству **[OnSelect](properties-core.md)** кнопки, даже если оно связано с функцией **[Navigate](../functions/function-navigate.md)**, сменяющей экран. В противном случае внесенные пользователем изменения сохранятся в форме.

### <a name="layout"></a>Макет
По умолчанию карточки помещаются в один столбец для приложений для телефона и в три столбца для приложений для планшета. Можно указать количество столбцов в форме и задать привязку карточек к ним при настройке формы. Эти параметры не предоставляются как свойства, так как они используются только для задания свойств **X**, **Y** и **Width** карточек.

Дополнительные сведения о формах данных см. в статье [Общие сведения о макете формы данных в Microsoft PowerApps](../working-with-form-layout.md).

## <a name="key-properties"></a>Основные свойства
**DataSource** — источник данных, используемый для просмотра, изменения и создания записей.

* Если это свойство не задано, пользователь не сможет просматривать, изменять и создавать записи, а дополнительные метаданные и возможности проверки будут недоступны.

**DefaultMode** — начальный режим элемента управления формой.  Допустимые значения и пояснения к ним см. в описании свойства **Режим** ниже. 

**DisplayMode** — этот режим используется карточками данных и элементами управления в элементе управления формой.  

Является производным от свойства **Режим** и не может быть задан отдельно:

| Режим | DisplayMode | Описание |
| --- | --- | --- |
| **FormMode.Edit** |**DisplayMode.Edit** |Карточки данных и элементы управления можно изменять; они принимают изменения в записи. |
| **FormMode.New** |**DisplayMode.Edit** |Карточки данных и элементы управления можно изменять, они принимают новые записи. |
| **FormMode.View** |**DisplayMode.View** |Карточки данных и элементы управления нельзя изменять, они оптимизированы для просмотра. |

**Error** — понятное сообщение об ошибке, которое отображается для формы, если функция **[SubmitForm](../functions/function-form.md)** завершается ошибкой.

* Это свойство есть только у элемента управления **Изменить форму**.
* Оно может быть изменено только функциями **[SubmitForm](../functions/function-form.md)**, **EditForm** и **[ResetForm](../functions/function-form.md)**.
* При отсутствии ошибок это свойство *пусто*, а свойство **ErrorKind** имеет значение **ErrorKind.None**.
* Сообщения об ошибках по возможности выводятся на языке пользователя. Некоторые сообщения об ошибках возвращаются непосредственно из источника данных и не могут быть представлены на языке пользователя.

**ErrorKind** — если ошибка возникает при выполнении функции **SubmitForm**, это свойство содержит тип ошибки.

* Оно есть только у элемента управления **Изменить форму**.
* Это свойство поддерживает те же значения, что и функция **[Errors](../functions/function-errors.md)**. Элемент управления **Изменить форму** может возвращать значения, указанные ниже.

| Значение свойства ErrorKind | Описание |
| --- | --- |
| **ErrorKind.Conflict** |Другой пользователь изменил ту же запись, что привело к конфликту изменений. Вызовите функцию **[Refresh](../functions/function-refresh.md)**, чтобы загрузить запись заново, и повторите попытку изменения. |
| **ErrorKind.None** |Произошла неизвестная ошибка. |
| **ErrorKind.Sync** |Об ошибке сообщил источник данных. Для получения дополнительных сведений проверьте свойство **Error**. |
| **ErrorKind.Validation** |Обнаружена общая проблема проверки данных. |

**Item** — запись в **источнике данных**, которую пользователь сможет просмотреть или изменить.

**LastSubmit** — последняя успешно отправленная запись (включая поля, сгенерированные сервером).

* Это свойство есть только у элемента управления **Изменить форму**.
* Если источник данных автоматически генерирует или вычисляет какие-либо поля, например поле **ID** с уникальным номером, свойство **LastSubmit** будет содержать это значение после успешного выполнения функции **SubmitForm**.
* Значение этого свойства доступно в формуле **OnSuccess**.

**Mode** — режим, в котором находится элемент управления: **Edit** (редактирование) или **New** (создание).

| Режим | Описание |
| --- | --- |
| **FormMode.Edit** |Пользователь может редактировать запись с помощью формы. Карточки формы предварительно заполняются значениями из существующей записи, чтобы пользователь мог изменить их. При успешном выполнении функции **[SubmitForm](../functions/function-form.md)** существующая запись изменяется. |
| **FormMode.New** |Пользователь может создать запись с помощью формы. Элементы управления формы предварительно заполняются значениями по умолчанию для записи в источнике данных. При успешном выполнении функции **[SubmitForm](../functions/function-form.md)** создается запись. |
| **FormMode.View** |Пользователь может просматривать запись с помощью формы. Элементы управления формы предварительно заполняются значениями по умолчанию для записи в источнике данных. |

Форма переходит из режима **создания** в режим **редактирования** в описанных далее ситуациях.

* После успешной отправки формы и создания записи. Если для коллекции включено автоматическое выделение новой записи, форма переходит в режим **редактирования** для созданной записи, чтобы пользователь мог внести дополнительные изменения.
* При выполнении функции **[EditForm](../functions/function-form.md)**.
* При выполнении функции **[ResetForm](../functions/function-form.md)**. Например, эта функция может быть назначена кнопке **Отменить** и вызываться при ее нажатии.

**OnFailure** — поведение приложения при неудачной операции с данными.

* Это свойство есть только у элемента управления **Изменить форму**.

**OnReset** — поведение приложения при сбросе элемента управления **Изменить форму**.

* Это свойство есть только у элемента управления **Изменить форму**.

**OnSuccess** — поведение приложения при успешной операции с данными.

* Это свойство есть только у элемента управления **Изменить форму**.

**Unsaved** — значение True, если элемент управления **Изменить форму** содержит пользовательские изменения, которые не были сохранены.

* Это свойство есть только у элемента управления **Изменить форму**.
* Используйте его для уведомления пользователей о том, что несохраненные изменения могут быть утрачены.  Чтобы пользователь не мог выбрать другую запись в элементе управления **[Коллекция](control-gallery.md)**, не сохранив текущую запись, присвойте свойству **[Disabled](properties-core.md)** коллекции значение **Form.Unsaved** и отключите операции обновления.

**Updates** — значения, сохраняемые в источнике данных для записи, загруженной в элемент управления формы.  

* Это свойство есть только у элемента управления **Изменить форму**.
* Используйте его для извлечения значений полей из карточек в элементе управления.  Затем вы можете использовать эти значения, чтобы вручную обновить источник данных с помощью функции **[Patch](../functions/function-patch.md)** или другого метода, предоставляемого подключением.  Если вы отправляете форму с помощью функции **[SubmitForm](../functions/function-form.md)**, использовать это свойство не требуется.
* Это свойство возвращает запись из значений.  Например, если элемент управления формы содержит карточки для полей **Name** и **Quantity**, а свойства **[Update](control-card.md)** этих карточек возвращают значения "Мини-приложение" и 10 соответственно, то свойство **Updates** возвратит значение **{Name: "Мини-приложение", Quantity: 10}**.

**Valid** — это свойство показывает, содержит ли элемент управления **[Карточка](control-card.md)** или **Изменить форму** допустимые значения, готовые к отправке в источник данных.

* Это свойство есть только у элемента управления **Изменить форму**.
* Свойство **Valid** формы объединяет свойства **Valid** всех элементов управления **[Карточка](control-card.md)** в форме. Свойство **Valid** формы имеет значение **true** только в том случае, если данные действительны во всех карточках формы. В противном случае оно имеет значение **false**.
* Чтобы кнопка сохраняла изменения, только если форма содержит допустимые данные, назначьте свойству **Enabled** кнопки следующую формулу:
  
    **SubmitButton.Enabled = IsBlank( Form.Error ) || Form.Valid**

## <a name="additional-properties"></a>Дополнительные свойства
**[BorderColor](properties-color-border.md)** — цвет границы элемента управления.

**[BorderStyle](properties-color-border.md)** — стиль границы элемента управления: **Сплошная**, **Штриховая**, **Пунктирная** или **Отсутствует**.

**[BorderThickness](properties-color-border.md)** — толщина границы элемента управления.

**[Fill](properties-color-border.md)** — цвет фона элемента управления.

**[Height](properties-size-location.md)** — расстояние между верхним и нижним краем элемента управления.

**[Visible](properties-core.md)** определяет, отображается ли элемент управления или он скрыт.

**[Width](properties-size-location.md)** — расстояние между левым и правым краем элемента управления.

**[X](properties-size-location.md)** — расстояние между левым краем элемента управления и левым краем его родительского контейнера (или экрана, если родительского контейнера нет).

**[Y](properties-size-location.md)** — расстояние между верхним краем элемента управления и верхним краем его родительского контейнера (или экрана, если родительского контейнера нет).

## <a name="more-information"></a>Дополнительные сведения
Подробный обзор работы форм см. в разделе [Общие сведения о формах данных в Microsoft PowerApps](../working-with-forms.md).

