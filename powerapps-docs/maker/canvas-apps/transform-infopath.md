---
title: Преобразование формы InfoPath в приложение на основе холста | Документы Майкрософт
description: Начните преобразовывать форму InfoPath в приложение PowerApps, используя сведения о типичных сценариях и создании элементов в приложении на основе холста.
author: richardriley99
manager: kvivek
ms.service: powerapps
ms.topic: article
ms.custom: canvas
ms.reviewer: anneta
ms.date: 04/05/2018
ms.author: rriley
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: c2d72368b36f2de854a0aa575f9ef44f2f966ace
ms.sourcegitcommit: 2300de0a0486187762f830068c872116d5b04c32
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/23/2018
ms.locfileid: "49806232"
---
# <a name="transform-your-infopath-form-to-powerapps"></a>Преобразование формы InfoPath в приложение PowerApps

Вы конструируете отличные формы в InfoPath и хотите узнать, как перенести их на более надежную платформу?

## <a name="key-advantages-of-powerapps-over-infopath"></a>Основные преимущества PowerApps по сравнению с InfoPath

Как и большинство опытных пользователей InfoPath, со временем вы сформировали уникальный набор навыков для эффективного создания форм. Хотя качество форм вас устраивает, вы знаете и их ограничения: &quot;классическое&quot; оформление, далеко не идеальная работа на мобильных устройствах, неуверенность в их будущей применимости и невозможность подключиться к другим службам без написания кода.

Команде разработчиков PowerApps известно об этих и многих других проблемах. Они приложили немалые усилия, чтобы повысить удобство работы и предоставить вам возможности создания приложений на основе холста с учетом ваших деловых и технических навыков. PowerApps позволяет вам быстро создавать и развертывать эффективные бизнес-решения без написания кода.

**За PowerApps будущее**  
PowerApps — это платформа "программное обеспечение как услуга" (SaaS), позволяющая вам быстро создавать эффективные приложения, которые можно развертывать на веб-сайтах, в SharePoint, Dynamics 365, Teams, Power BI или на мобильных устройствах без дополнительных усилий. Поскольку для развертывания достаточно передать пользователю URL-адрес опубликованного приложения, их также легко обновлять.

**Публикация приложений**  
Вы когда-нибудь пытались создать приложение, а затем опубликовать его для устройства iOS или Android? Это сложно. Если вы хотите развернуть второе приложение или обновить существующее, пользователям необходимо выполнить гораздо больше действий. Но не с PowerApps. Пользователи устанавливают PowerApps Mobile на устройство и выполняют вход. Вот и все — у них есть доступ ко всем приложениям, которые вы им предоставили. В дальнейшем при обновлении этих приложений или публикации новых приложений для этих пользователей они будут отображаться на их устройствах. Мобильные приложения без необходимости управления устройствами — это большое преимущество для вас и вашего бизнеса.

**Кстати, о мобильных устройствах**  
Благодаря PowerApps вы можете использовать возможности мобильных устройств пользователей. У вас есть доступ к ускорению, камере, компасу, сведениям о подключении и сигналам о расположении — все это прямо из приложения. Это дает вам целый ряд преимуществ для создания эффективных приложений. Конечно, функциональные возможности сенсорного ввода предоставляются в PowerApps автоматически без необходимости написания дополнительного кода.

**Готовые к работе**  
С помощью InfoPath вы обычно работаете с данными из одного источника. Но все усложняется, если вы хотите обновить другой источник (например, список SharePoint в другой коллекции сайтов) или подключиться к внешним службам. Вы не спите ночами, обдумывая код. PowerApps позволяет вам работать с несколькими источниками данных и подключениями к службам в одном приложении. В настоящее время [более чем 200 соединителей](connections-list.md#all-standard-connectors) поддерживают сочетание локальных и облачных данных, включая службы Microsoft Office 365 и Azure, такие как Microsoft Flow и Dynamics 365. Кроме того, можно подключиться к множеству сторонних служб, таких как Dropbox, Google, Salesforce, Slack и другие популярные целевые платформы.

Теперь вы можете создавать решения для масштабирования приложений в любых средах, а не только там, где хранятся исходные данные.

## <a name="powerapps-and-sharepoint-even-better-together"></a>PowerApps и SharePoint: вместе еще эффективнее

PowerApps — это мощный инструмент для улучшения взаимодействия с SharePoint двумя способами: вы можете настроить формы для списка SharePoint или создать автономное приложение для работы с данными SharePoint.

**Настройка формы SharePoint** — это удобно, если вы хотите настроить способ добавления, просмотра или изменения элементов в списке пользователями для повседневной работы. Когда вы нажмете кнопку **Настройка форм**, будет создано &quot;приложение форм&quot; с одним экраном, которое будет изменять режим (создание, редактирование, просмотр) в зависимости от контекста. Такие приложения управляются SharePoint; их разрешения аналогичны разрешениям списка для просмотра и редактирования.

**Создание приложения холста PowerApps из SharePoint** позволяет запустить приложение автономно на мобильном устройстве. Вы также можете внедрить приложение на страницу SharePoint. При нажатии этой кнопки будет создано приложение с тремя экранами (список просмотра, детали представления и создание/обновление элемента). Модель управления доступом и разрешениями для этих приложений не привязана к SharePoint, а управляется из PowerApps.

Теперь, когда вы поняли разницу между двумя вариантами, следующий раздел дает вам представление об использовании каждого из них.

## <a name="sharepoint-forms"></a>Формы SharePoint

Команды разработчиков PowerApps и SharePoint совместно разработали модель настройки использования с SharePoint. Большинству разработчиков InfoPath приходилось обеспечивать взаимодействие InfoPath и SharePoint. Сама по себе SharePoint — отличная платформа, однако формы по умолчанию не представляют из себя ничего особенного и не поддерживают настройки или бизнес-логику без InfoPath. Теперь это в прошлом.

Благодаря PowerApps вы можете настраивать формы списков как внутренние функции. И при этом в вашем распоряжении — все возможности PowerApps. На снимке экрана ниже вы видите пример формы PowerApps со встроенным отчетом Power BI. Все решение было создано менее чем за 15 минут.

![Интеграция с SharePoint](./media/transform-infopath/sharepoint-integration.png)

Еще одна важная возможность PowerApps — возможность простого подключения к другому семейству сайтов SharePoint или другой среде из одной формы. Например, вы хотите сделать одну форму, в которой можно выводить и обновлять данные из SharePoint Online и локальной среды SharePoint одновременно? Это несложно. Установите [локальный шлюз данных](gateway-management.md), и через несколько минут вы получите рабочее подключение между PowerApps, Power BI, Microsoft Flow, Azure Logic Apps и локальными данными. Изменение правил брандмауэра не требуется. Вы можете пойти дальше при подключении приложения с помощью Microsoft Flow.

## <a name="a-standalone-sharepoint-app"></a>Автономное приложение SharePoint

Используйте этот метод, если вместо простого интерфейса обновления формы со списком вы хотите построить полнофункциональное автономное приложение, основанное на данных SharePoint. Это также лучший способ знакомства с технологией: вы можете начать изучать возможности холста PowerApps и создания будущих приложений на основе любого из нескольких источников данных.

Чтобы начать, выполните эти действия.

1. Откройте форму со списком SharePoint, из которого вы хотите создать приложение.
1. В строке меню выберите **PowerApps**, а затем **Создать приложение**.
1. Укажите имя и щелкните **Сохранить**.

PowerApps создаст приложение, которое можно настраивать.

Для первого приложения начните с простого настраиваемого списка из нескольких полей разных типов. Таким образом, вы сможете создать прочный фундамент без лишних проблем и усилий. Не беспокойтесь; совсем скоро вы станете профессионалом и будете готовы к созданию сложных приложений. Если вам нужна помощь при создании такого первого приложения, ознакомьтесь с этой [документацией](app-from-sharepoint.md#generate-an-app-from-within-sharepoint-online) или этим [видеороликом](https://youtu.be/BnYe_7fpZRM) сообщества. В приведенных ниже примерах показываются типичные задачи InfoPath и способы их решения в PowerApps. Все они основаны на простом приложении со списком SharePoint.

## <a name="how-do-you-do-that-with-powerapps"></a>Как это сделать с помощью PowerApps?

После того как вы ознакомились с основными понятиями, можно двигаться дальше. На базе созданного вами первого приложения сведения в этом разделе помогут применить некоторые основные понятия InfoPath в PowerApps.

**Скрыть, показать или заблокировать поле на основе значения**  
Успешные формы часто применяют эффективную бизнес-логику, например изменение состояния поля на основе значения или действия. В PowerApps вы можете настроить свойство режима отображения **DisplayMode** для элемента управления как **Изменение** или **Просмотр**, чтобы указать, разрешено ли пользователю изменять поле. Вы также можете использовать формулу **If**, чтобы настроить условия. Во-первых, выберите карту, которую требуется изменить, а затем выберите значок блокировки. Этот шаг разблокирует карту, чтобы можно было изменить значение.

![Скрыть, показать, заблокировать карточку данных](./media/transform-infopath/hide-show-lock.png)

На панели справа найдите свойство **DefaultMode**, чтобы изменить его.

![Выражения инструкции If Else](./media/transform-infopath/if-else-statement.png)

В этом примере используется формула **If**:

```If(ThisItem.Color = "Blue", DisplayMode.View, DisplayMode.Edit)```

Эта формула указывает, что, если поле **Цвет** текущего элемента имеет значение **Синий**, поле **Животное** доступно только для чтения. В противном случае поле можно редактировать.

Чтобы скрыть карту, вместо того чтобы предоставлять ее только для чтения, вставьте подобную функцию в свойство **Видимый** сразу над **DisplayMode**.

Вы также можете изменить настройки, например отображения кнопки утверждения, чтобы она отображалась только в том случае, если адрес электронной почты пользователя совпадает с адресом электронной почты утверждающего лица. (Подсказка: **User().Email** служит для получения доступа к адресу электронной почты текущего пользователя.) Поэтому можно сохранить адрес электронной почты утверждающего лица в **YourDataCard** и указать следующую формулу для свойства кнопки **Видимый**:

```If(YourDataCard.Text = User().Email, true, false)```

**Условное форматирование**  
Аналогичным образом (как и для скрытия поля выше) можно предоставлять визуальную обратную связь для пользователей. Возможно, вам требуется выделить текст красным цветом, если введенное значение выходит за пределы допустимого диапазона, или изменить текст и цвет кнопки "Отправить" после отправки пользователем файла. Вы сможете указать обе настройки с помощью функции, например **if**, в свойствах, таких как **Цвет** или **Видимый**.

Например, можно использовать функцию **If** вместе с функцией [IsMatch](functions/function-ismatch.md), чтобы менять цвет текста в поле электронной почты на красный, если пользователь указал в поле ввода адрес электронной почты в неправильном формате. Это можно сделать, задав значение **Цвет** для поля **TextInput1** (где пользователь вводит адрес электронной почты) в следующей формуле:

```If(IsMatch(TextInput1.Text, Email), Black, Red)```

**IsMatch** поддерживает множество предварительно определенных шаблонов, таких как адрес электронной почты, а также позволяет создавать свои собственные. Дополнительные сведения об условном форматировании см. в этом [видеоролике сообщества](https://powerusers.microsoft.com/t5/Video-Webinar-Gallery/PowerApps-Conditional-Formatting-and-Popups/m-p/84962).

**Реализация безопасности на основе ролей**  
Первая функция, которую мы рассмотрим, — [DataSourceInfo](functions/function-datasourceinfo.md). Набор получаемых сведений зависит от источника данных, но, как правило, вы можете использовать эту формулу, чтобы проверить, есть ли у пользователя доступ к изменению данных (замените *YourDataSource* на имя вашего источника данных):

```DataSourceInfo(YourDataSource, DataSourceInfo.EditPermission)```

Таким образом, форма или кнопка будет отображаться, только если пользователь имеет доступ для редактирования. Полный список сведений, которые можно запрашивать в функции, см. в документации по [DataSourceInfo](functions/function-datasourceinfo.md).

Если вместо этого вы хотите использовать группы Active Directory для управления доступом к кнопкам или формам в приложении, вам потребуются более глубокие знания. Для этого можно воспользоваться преимуществами PowerApps и создать собственный соединитель с помощью API Microsoft Graph. Если это кажется слишком сложным, следуйте пошаговым инструкциям в этой [записи блога](https://powerapps.microsoft.com/blog/implementing-role-based-permission/).

**Отправка сообщения электронной почты из приложения**  
Существует множество способов отправлять сообщения электронной почты из PowerApps, но проще всего использовать соединитель Office 365 Outlook. С помощью этого соединителя вы можете отправлять сообщения из приложения от своего имени. Кроме того, можно получать сообщения электронной почты и другие задачи, которые взаимодействуют с почтовым ящиком. Подробные сведения об отправке сообщений см. в [документации](connections/connection-office365-outlook.md) или этом [видеоролике](https://powerusers.microsoft.com/t5/Video-Webinar-Gallery/Send-an-email-from-PowerApps/m-p/74349) сообщества.

Вы можете отправлять более сложные сообщения (например, в рамках рабочего процесса утверждения SharePoint) с помощью Microsoft Flow и подключения приложения к создаваемому потоку. При подключении приложения к Microsoft Flow вы открываете широчайшие возможности подсистемы рабочих процессов, которая, как и PowerApps, очень эффективно подключается к внешним данным и службам. Дополнительные сведения о подключении PowerApps и Microsoft Flow см. в этой [документации](using-logic-flows.md).

Если вам по-прежнему не удалось найти оптимальный вариант работы с электронной почтой, вы также можете использовать соединители PowerApps для таких почтовых систем, как Benchmark Email, Gmail, MailChimp, Outlook.com, SendGrid или SMTP. Возможности подключения — это очередное преимущество PowerApps.

**Рабочие процессы**  
Трудно говорить о бизнес-приложениях и бизнес-логике без подсистемы рабочих процессов. Хорошие новости — разработчики PowerApps не стали изобретать велосипед и создавать очередную подсистему рабочих процессов. Вместо этого они предоставили надежный соединитель со службой Microsoft Flow. Вы можете автоматизировать процессы и задачи для более чем [200 различных служб](https://flow.microsoft.com/connectors/) благодаря простой в использовании подсистеме рабочих процессов. Дополнительные сведения о подключении PowerApps и Microsoft Flow см. в этой [документации](using-logic-flows.md).

**Переменные в PowerApps**  
При построении решения логично предположить, что в нем потребуется использовать переменные. PowerApps предлагает несколько типов переменных, но использовать их нужно только при необходимости. Предположим, что вместо того, чтобы получать данные, сохранять их в переменной, а затем ссылаться на эту переменную, вы можете сослаться на данные напрямую. Эту модель проще понять, если сравнить ее с Excel. В Excel поле "Итог" не является переменной — это сумма значений других полей. Таким образом, если вы хотите использовать это значение в другом месте на листе, вы указываете ячейку, в которой вычисляется итог. В этой [документации](working-with-variables.md) приводится отличное объяснение всех этих возможностей. Не стоит ограничиваться одним вариантом.

Если вам все-таки необходимо использовать переменные (есть много таких ситуаций), у вас есть разные варианты. Помните, что в PowerApps вам необязательно определять переменные. Чтобы создать переменную, просто используйте функцию для указания имени и хранимого значения. Чтобы просмотреть созданные переменные, выберите **Переменные** на вкладке **Представление**. Переменные хранятся в памяти, и их значения утрачиваются при закрытии приложения. Можно создать следующие типы переменных:

- Глобальные переменные — первое, что приходит в голову. Используйте функцию [Set](functions/function-set.md), чтобы указать значение для глобальной переменной и сделать ее доступной в приложении:

    ```Set(YourVariable, YourValue)```

    Затем вы можете ссылаться в приложении на переменную *YourVariable* по имени.

- Переменные контекста доступны только на экране, в котором они определены. При выходе из экрана они будут сброшены. Эти переменные часто используются, например, для хранения данных, переданных из предыдущего экрана, или для отслеживания того, отправлена ли форма. Чтобы задать переменную контекста, используйте функцию [UpdateContext](functions/function-updatecontext.md), как в следующем примере:

    ```UpdateContext( { Submitted: "true" } )```

    В этом примере для переменной с именем **Submitted** устанавливается значение **true**. Вы можете добавить эту формулу в свойство **OnSelect** кнопки "Отправить", чтобы отслеживать отправку данных и преобразовывать все поля в поля только для чтения.

- Коллекции используются для хранения таблиц данных, которые можно обновлять по отдельности. Используйте [Collect](functions/function-clear-collect-clearcollect.md), чтобы, например, создать корзину покупок, в которую отправляются различные элементы SharePoint, помечаемые пользователем. Эта концепция в действии показана в этом [видеоролике](https://powerusers.microsoft.com/t5/Video-Webinar-Gallery/Learn-about-PowerApps-Collections/m-p/89180) сообщества.

**Каскадные раскрывающиеся меню**  
Каскадные раскрывающиеся меню очень полезны, поскольку можно, например, фильтровать варианты в одном раскрывающемся списке на основе значения, выбранного в предыдущем раскрывающемся списке. В PowerApps их часто создают при использовании двух источников данных в приложении. Первый источник данных — это данные, которые вы просматриваете или изменяете, а второй источник данных используется для хранения значений для создания каскадного эффекта. На рисунке показан пример второго источника данных с вариантами выбора.

![Каскадные раскрывающиеся меню](./media/transform-infopath/cascading-dropdowns.png)

В этом примере можно добавить раскрывающийся список с именем **ddselecttype** и задать следующую формулу для его свойства **Items**:

```Distinct(Impacts, Title)```

Раскрывающийся список будет показывать только поля "Затраты", "Влияние на программу" и "Расписание". Затем можно добавить второй раскрывающийся список и задать следующую формулу для его свойства **Items**:

```Filter(Impacts,ddSelectType.Selected.Value in SCategory)```

Вот так и получаются каскадные раскрывающиеся меню. Дополнительные сведения см. в этой публикации команды разработчиков PowerApps — [SharePoint: каскадные раскрывающиеся меню за 4 простых шага](https://powerusers.microsoft.com/t5/PowerApps-Community-Blog/SharePoint-Cascading-Dropdowns-in-4-Easy-Steps/ba-p/16248) или в этом [видеоролике сообщества](https://powerusers.microsoft.com/t5/Video-Webinar-Gallery/PowerApps-Cascading-Dropdown/m-p/92813). Не беспокойтесь, это можно сделать так же просто без SharePoint.

**Не создавайте одно суперприложение**  
С помощью PowerApps одно приложение можно вызывать из другого. Поэтому вместо огромной формы InfoPath, которая не разваливается только чудом, можно создать группу приложений, вызывающих друг друга, и даже передавать между ними данные. Это значительно упрощает разработку.

## <a name="next-steps"></a>Дальнейшие действия

Используя PowerApps и полученные в этом разделе знания, теперь вы можете попробовать свои силы и, никуда не торопясь, создать собственное приложение. Ниже приведены некоторые полезные ресурсы для вашей работы, например ссылка на сайт сообщества PowerApps. Чем раньше вы станете участником сообщества, тем быстрее сможете развить свои навыки: вместе всегда проще, чем в одиночку.

[**Справочник по формулам**](formula-reference.md) — даже если вы просто будете просматривать стандартные формулы, вам в голову может прийти отличная идея.

[**Сообщество PowerApps**](https://powerusers.microsoft.com/t5/PowerApps-Community/ct-p/PowerApps1) — здесь вы можете получить примеры кода и ответы на свои вопросы и, общаясь с другими разработчиками, помогать расти сообществу PowerApps.
