---
title: Создание последовательности для управления утверждениями проектов | Документация Майкрософт
description: В этом руководстве мы создадим последовательность для управления утверждениями проектов.
documentationcenter: na
author: mgblythe
manager: kfile
editor: ''
tags: ''
ms.service: powerapps
ms.devlang: na
ms.topic: conceptual
ms.component: canvas
ms.date: 01/09/18
ms.author: mblythe
ms.openlocfilehash: 2a3bb307d403d372d0cae89a0eb9d3fd86271768
ms.sourcegitcommit: 68fc13fdc2c991c499ad6fe9ae1e0f8dab597139
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2018
ms.locfileid: "31835893"
---
# <a name="create-a-flow-to-manage-project-approvals"></a>Создание последовательности для управления утверждениями проектов
> [!NOTE]
> Эта статья входит в серию руководств по использованию PowerApps, Microsoft Flow и Power BI совместно с SharePoint Online. Обязательно просмотрите [вводные сведения](sharepoint-scenario-intro.md), чтобы получить общее представление о процессе и скачать связанные файлы.

В этом руководстве мы создадим последовательность для управления утверждениями проектов. Так как Microsoft Flow интегрируется с SharePoint, вы сможете быстро создать последовательность непосредственно из списка. Создаваемая последовательность активируется при добавлении элемента в список **Project Requests** (Запросы проекта). Последовательность по электронной почте отправляет сообщение пользователю, утверждающему проекты. Этот пользователь утверждает или отклоняет запрос непосредственно в сообщении. Затем последовательность отправляет сообщение пользователю, запрашивающему проекты. Это сообщение содержит утверждение или отклонение. В соответствии с выбранным вариантом последовательность обновляет список SharePoint.

## <a name="step-1-configure-the-flow-template"></a>Шаг 1. Настройка шаблона последовательности
1. В списке **Project Requests** (Запросы проекта) щелкните **Flow** (Последовательность), а затем — **Create a flow** (Создать последовательность).
   
    ![Создание последовательности](./media/sharepoint-scenario-approval-flow/03-01-01-create-flow.png)
2. В области справа щелкните **Начинать утверждение при добавлении нового элемента**.
   
    ![Создание последовательности утверждения](./media/sharepoint-scenario-approval-flow/03-01-02-approval-flow.png)
3. Войдите в SharePoint и Outlook, если вы еще не сделали это, а затем нажмите кнопку **Continue** (Продолжить).
   
    ![Вход для использования шаблона](./media/sharepoint-scenario-approval-flow/03-01-03-continue.png)
   
    Отобразится готовый к использованию шаблон для этой последовательности. Поля в последовательности представляют шаги. Каждый шаг принимает входные данные, — как полученные от предыдущих шагов, так и указанные вами. Все предыдущие шаги передают выходные данные последующим шагам.
   
    ![Шаблон утверждения](./media/sharepoint-scenario-approval-flow/03-01-04-template.png)
4. В поле **Назначено** введите имя, которое является допустимым в клиенте.
   
    ![Контактные данные для отправки письма с утверждением](./media/sharepoint-scenario-approval-flow/03-01-05-approval-email.png)
   
    Следующее поле в последовательности отправляет ответ на решение пользователя, утверждающему проекты. С этого момента последовательность выполняется по двум сценариям в рамках двух *ветвей*: **ДА** или **НЕТ**.
   
    ![Условие утверждения](./media/sharepoint-scenario-approval-flow/03-01-06-condition.png)

## <a name="step-2-create-actions-for-approve--yes"></a>Шаг 2. Создание действий для условия утверждения "ДА"
По умолчанию эта ветвь отправляет запрашивающей стороне сообщение с утверждением. Мы также обновим список **Запросы проекта** и добавим элемент в список **Сведения о проекте**, так как проект был утвержден.

1. В ветви **ДА** щелкните **Сообщить автору элемента об утверждении**, а затем **Изменить**, чтобы просмотреть стандартные параметры для сообщения электронной почты, отправленного запрашивающей стороне.
   
    ![Изменение параметров сообщения электронной почты](./media/sharepoint-scenario-approval-flow/03-01-07-yes-email.png)
2. По умолчанию сообщение отправляется пользователю, создавшему элемент списка, с такой же строкой темы и текстом, как на изображении. При необходимости эти данные можно изменить.
   
    ![Стандартные параметры сообщения электронной почты](./media/sharepoint-scenario-approval-flow/03-01-07a-yes-email-defaults.png)
3. Нажмите кнопку **Add an Action** (Добавить действие).
   
    ![Добавление действия](./media/sharepoint-scenario-approval-flow/03-00-01-add-action.png)
4. В разделе **Choose an action** (Выбор действия) выполните поиск по слову "SharePoint" и выберите **SharePoint – Update item** (SharePoint — изменить элемент).
   
    ![Действие по изменению элемента](./media/sharepoint-scenario-approval-flow/03-00-02-update.png)
5. Введите URL-адрес сайта SharePoint и имя списка.
   
    ![Параметры изменения элемента](./media/sharepoint-scenario-approval-flow/03-00-03-update-list.png)
6. Выберите поле **Идентификатор** и в диалоговом окне *динамического содержимого* щелкните **Идентификатор**.
   
    ![Список динамического содержимого: идентификатор](./media/sharepoint-scenario-approval-flow/03-00-04-list-id.png)
   
    Динамическое содержимое доступно в пределах последовательности в зависимости от предыдущего шага. В нашем примере доступны данные списка SharePoint — их можно использовать в создаваемых действиях.
7. Выберите поле **Title** (Заголовок), выполните поиск по слову "Title" в диалоговом окне динамического содержимого и щелкните **Title** (Заголовок).
   
    ![Список динамического содержимого: заголовок](./media/sharepoint-scenario-approval-flow/03-00-05-list-title.png)
8. В поле **Approved** (Утверждено) введите "Yes" (Да). Теперь эта часть последовательности должна выглядеть приблизительно так:
   
    ![Обновление списка](./media/sharepoint-scenario-approval-flow/03-01-08-yes-update-complete.png)
9. Нажмите кнопку **Add an Action** (Добавить действие) еще раз. На этот раз мы добавим элемент в список **Project Details** (Сведения о проекте) для утвержденного проекта.
   
    ![Добавление действия](./media/sharepoint-scenario-approval-flow/03-00-01-add-action.png)
10. В разделе **Choose an action** (Выбор действия) выполните поиск по слову "SharePoint" и выберите **SharePoint – Create item** (SharePoint — создать элемент).
    
    ![Действие по созданию элемента](./media/sharepoint-scenario-approval-flow/03-01-09-create.png)
11. Введите URL-адрес сайта SharePoint и имя списка.
    
    ![Параметры создания элемента](./media/sharepoint-scenario-approval-flow/03-01-10-yes-create-list.png)
12. Выберите поле **Title** (Заголовок), выполните поиск по слову "Title" в диалоговом окне динамического содержимого и щелкните **Title** (Заголовок).
    
    ![Список динамического содержимого: заголовок](./media/sharepoint-scenario-approval-flow/03-00-05-list-title.png)
13. Выберите поле **RequestId** и в диалоговом окне динамического содержимого щелкните или коснитесь **ID**.
    
    ![Список динамического содержимого: идентификатор](./media/sharepoint-scenario-approval-flow/03-00-04-list-id.png)
14. В поле **PMAssigned** введите Unassigned. Теперь эта часть последовательности должна выглядеть приблизительно так:
    
    ![Завершение создания элемента](./media/sharepoint-scenario-approval-flow/03-01-11-yes-create-complete.png)

## <a name="step-3-review-action-for-approve--no"></a>Шаг 3: Просмотр действия для условия утверждения "НЕТ"
По умолчанию эта ветвь отправляет запрашивающей стороне сообщение с отказом. Мы также обновим список **Запросы проекта**. Мы не будем добавлять элементы в список **Запросы проекта**, так как для проекта дальнейшие действия не предусмотрены.

1. В ветви **НЕТ** щелкните **Сообщить автору элемента об отклонении**, а затем **Изменить**, чтобы просмотреть стандартные параметры для сообщения электронной почты, отправленного запрашивающей стороне.
   
    ![Изменение параметров сообщения электронной почты](./media/sharepoint-scenario-approval-flow/03-01-12-no-email.png)
2. По умолчанию сообщение отправляется пользователю, создавшему элемент списка, с такой же строкой темы и текстом, как на изображении. При необходимости эти данные можно изменить.
   
    ![Стандартные параметры сообщения электронной почты](./media/sharepoint-scenario-approval-flow/03-01-13-no-email-defaults.png)
3. Нажмите кнопку **Add an Action** (Добавить действие).
   
    ![Добавление действия](./media/sharepoint-scenario-approval-flow/03-00-01-add-action.png)
4. В разделе **Choose an action** (Выбор действия) выполните поиск по слову "SharePoint" и выберите **SharePoint – Update item** (SharePoint — изменить элемент).
   
    ![Действие по изменению элемента](./media/sharepoint-scenario-approval-flow/03-00-02-update.png)
5. Введите URL-адрес сайта SharePoint и имя списка.
   
    ![Параметры изменения элемента](./media/sharepoint-scenario-approval-flow/03-00-03-update-list.png)
6. Выберите поле **Идентификатор** и в диалоговом окне динамического содержимого щелкните **Идентификатор**.
   
    ![Список динамического содержимого: идентификатор](./media/sharepoint-scenario-approval-flow/03-00-04-list-id.png)
7. Выберите поле **Title** (Заголовок), выполните поиск по слову "Title" в диалоговом окне динамического содержимого и щелкните **Title** (Заголовок).
   
    ![Список динамического содержимого: заголовок](./media/sharepoint-scenario-approval-flow/03-00-05-list-title.png)
8. В поле **Approved** (Утверждено) введите "No" (Нет). Теперь эта часть последовательности должна выглядеть приблизительно так:
   
    ![Обновление списка](./media/sharepoint-scenario-approval-flow/03-01-08-no-update-complete.png)
9. В правой верхней части экрана щелкните **Создать последовательность**.
   
    Последовательность создана. Если свернуть поля, она будет выглядеть приблизительно так:
   
    ![Готовая последовательность](./media/sharepoint-scenario-approval-flow/03-01-16-flow-complete.png)

10. В правой верхней части экрана щелкните **Готово**.
   
    ![Кнопка "Готово"](./media/sharepoint-scenario-approval-flow/03-01-15a-done-button.png)

## <a name="step-4-run-the-approval-flow"></a>Шаг 4. Выполнение последовательности утверждения
1. В списке **Project Requests** (Запросы проекта) выберите **Quick Edit** (Быстрое редактирование) и добавьте элемент, как на снимке экрана ниже:
   
   * **Title** = "Новый монитор для Лилии"

   * **Description** = "Лилии нужен монитор диагональю 24"

   * **ProjectType** = "Новое оборудование"

   * **RequestDate** = "03.02.2017"

   * **Requestor** = "Лилия Медведева"

   * **EstimatedDays** = "1"

   * **Approved** = "Утверждено"

     ![Добавляемый в список элемент](./media/sharepoint-scenario-approval-flow/03-02-01-list-add.png)
2. По окончании нажмите кнопку **Done** (Готово) в верхней части страницы.
   
    ![Кнопка "Готово"](./media/sharepoint-scenario-approval-flow/03-02-02-done.png)
3. Ниже показана папка "Входящие" учетной записи электронной почты утверждающего. В ней должно быть сообщение с таким содержимым:
   
    ![Сообщение Артему Кузнецову](./media/sharepoint-scenario-approval-flow/03-02-03-allan-email.png)
4. После нажатия кнопки **Approve** (Утвердить) или **Reject** (Отклонить) последовательность запускает следующий процесс. При этом пользователь, запрашивающий проект, получает отзыв непосредственно на электронную почту, как показано ниже.
   
    ![Выполнение действия по утверждению](./media/sharepoint-scenario-approval-flow/03-02-04-action-complete.png)
5. Последовательность отправляет сообщение для Лилии с ответом от Артема, как показано ниже. Это сообщение получено *от* Лилии, так как она настроила последовательность.
   
    ![Сообщение Лилии Медведевой](./media/sharepoint-scenario-approval-flow/03-02-05-megan-email.png)

## <a name="next-steps"></a>Дальнейшие действия
Следующий шаг в этой серии руководств — [создание приложения для управления проектами](sharepoint-scenario-build-app.md).

