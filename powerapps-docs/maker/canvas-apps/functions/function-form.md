---
title: Функции EditForm, NewForm, SubmitForm, ResetForm и ViewForm | Документация Майкрософт
description: Справочные сведения о функциях EditForm, NewForm, SubmitForm, ResetForm и ViewForm в PowerApps, а также описание синтаксиса этих функций
documentationcenter: na
author: gregli-msft
manager: kfile
editor: ''
tags: ''
ms.service: powerapps
ms.devlang: na
ms.topic: reference
ms.component: canvas
ms.date: 07/06/2017
ms.author: gregli
ms.openlocfilehash: 6a32068d0de49ea0a6cf752fde0fd486159f39e9
ms.sourcegitcommit: 8bd4c700969d0fd42950581e03fd5ccbb5273584
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2018
---
# <a name="editform-newform-submitform-resetform-and-viewform-functions-in-powerapps"></a>Функции EditForm, NewForm, SubmitForm, ResetForm и ViewForm в PowerApps
Просмотр, изменение или создание элемента, сохранение содержимого и сброс элементов управления в **[форме редактирования](../controls/control-form-detail.md)**.

## <a name="overview"></a>Обзор
Эти функции изменяют состояние элемента управления **Форма редактирования**.  Элемент управления "Форма" поддерживает следующие режимы:

| Режим | Описание |
| --- | --- |
| **FormMode.Edit** |Форма заполняется значениями из существующей записи, и пользователь может изменять значения полей.  Пользователь может сохранить все внесенные в запись изменения. |
| **FormMode.New** |Форма заполняется значениями по умолчанию, и пользователь может изменять значения полей.  После внесения всех изменений пользователь может добавить запись в источник данных. |
| **FormMode.View** |Форма заполняется значениями из существующей записи, но пользователь не может изменять значения полей. |

## <a name="description"></a>Описание
Эти функции обычно вызываются из формулы **[OnSelect](../controls/properties-core.md)**, определенной для элементов управления **[Кнопка](../controls/control-button.md)** или **[Изображение](../controls/control-image.md)**. Они позволяют пользователю сохранить изменения, отменить изменения или создать новую запись. Вы можете [объединить элементы управления и эти функции](../working-with-forms.md), чтобы создать законченное решение.

Эти функции не возвращают никаких значений.

### <a name="submitform"></a>SubmitForm
Используйте функцию **SubmitForm** в свойстве **[OnSelect](../controls/properties-core.md)** для элемента управления "Кнопка", чтобы сохранить изменения, внесенные в источник данных через элемент управления "Форма".

Прежде чем отправить изменения, эта функция проверяет допустимость значений для всех полей, помеченных как обязательные или имеющих одно или несколько ограничений на значение. Это поведение соответствует выполнению функции **[Validate](function-validate.md)**.

Также **SubmitForm** проверяет свойство **[Valid](../controls/control-form-detail.md)** для формы, которое является агрегатом свойств **[Valid](../controls/control-card.md)** для всех элементов управления **[Карточка](../controls/control-card.md)**, которые включены в элемент управления "Форма". Если возникает проблема, данные не передаются, а также устанавливаются соответствующие значения для свойств **[Error](../controls/control-form-detail.md)** (Ошибка) и **[ErrorKind](../controls/control-form-detail.md)** (Тип ошибки) в элементе управления "Форма".

Если проверка проходит успешно, **SubmitForm** отправляет изменения в источник данных.

* В случае успешного выполнения запускается поведение **[OnSuccess](../controls/control-form-detail.md)**, определенное для формы, а также очищаются значения свойств **[Error](../controls/control-form-detail.md)** (Ошибка) и **[ErrorKind](../controls/control-form-detail.md)** (Тип ошибки).  Если форма находилась в режиме **FormMode.New**, устанавливается режим **FormMode.Edit**.
* В случае сбоя запускается поведение **[OnFailure](../controls/control-form-detail.md)**, определенное для формы, а также устанавливаются соответствующие значения свойств **[Error](../controls/control-form-detail.md)** (Ошибка) и **[ErrorKind](../controls/control-form-detail.md)** (Тип ошибки).  Режим формы в этом случае не изменяется.  

### <a name="editform"></a>EditForm
Функция **EditForm** устанавливает режим **FormMode.Edit** для элемента управления "Форма". В этом режиме форма заполняется на основании содержимого свойства **[Item](../controls/control-form-detail.md)**, установленного для элемента управления "Форма".  Если в этом режиме выполняется функция **SubmitForm**, запись изменяется, а не создается.  **FormMode.Edit** является режимом по умолчанию для элемента управления "Форма".

### <a name="newform"></a>NewForm
Функция **NewForm** устанавливает режим **FormMode.New** для элемента управления "Форма". В этом режиме игнорируется содержимое элемента **[Item](../controls/control-form-detail.md)**, установленное для элемента управления "Форма", и форма заполняется на основании значений по умолчанию из свойства **[DataSource](../controls/control-form-detail.md)**. Если в этом режиме выполняется функция **SubmitForm**, запись создается, а не изменяется.

### <a name="resetform"></a>ResetForm
Функция **ResetForm** сбрасывает содержимое формы к начальным значениям, которые были установлены до внесения пользователем любых изменений. Если форма находится в режиме **FormMode.New**, устанавливается режим **FormMode.Edit**. Также запускается поведение **[OnReset](../controls/control-form-detail.md)**, определенное для элемента управления "Форма".  Можно также сбросить отдельные элементы управления с помощью функции **[Сброс](function-reset.md)**. Но это можно сделать только в форме.

### <a name="viewform"></a>ViewForm
Функция **ViewForm** меняет режим элемента управления "Форма" на **FormMode.New**. В этом режиме форма заполняется на основании содержимого свойства **[Item](../controls/control-form-detail.md)**, установленного для элемента управления "Форма".  Функции **SubmitForm** и **RestForm** не работают в этом режиме.

### <a name="displaymode-poperty"></a>Свойство DisplayMode
Текущий режим можно узнать с помощью свойства **Режим**.  Режим также определяет значение свойства **DisplayMode**, которое могут использовать карточки данных и элементы управления в элементе управления "Форма".  Часто свойству **DisplayMode** карточки данных присваивается значение **Parent.DisplayMode** (ссылается на форму), как и свойству **DisplayMode** элемента управления (ссылается на карточку данных): 

| Режим | DisplayMode | Описание |
| --- | --- | --- |
| **FormMode.Edit** |**DisplayMode.Edit** |Карточки данных и элементы управления можно изменять; они принимают изменения в записи. |
| **FormMode.New** |**DisplayMode.Edit** |Карточки данных и элементы управления можно изменять, они принимают новые записи. |
| **FormMode.View** |**DisplayMode.View** |Карточки данных и элементы управления нельзя изменять, они оптимизированы для просмотра. |

## <a name="syntax"></a>Синтаксис
**SubmitForm**( *FormName* )

* *FormName* — обязательный аргумент. Элемент управления "Форма", который отправляет данные в источник данных.

**EditForm**( *FormName* )

* *FormName* — обязательный аргумент.  Элемент управления "Форма", который нужно перевести в режим **FormMode.Edit**.

**NewForm**( *FormName* )

* *FormName* — обязательный аргумент. Элемент управления "Форма", который нужно перевести в режим **FormMode.New**.

**ResetForm**( *FormName* )

* *FormName* — обязательный аргумент. Элемент управления "Форма", в котором нужно восстановить исходные значения. Также форма переключается из режима **FormMode.New** в режим **FormMode.Edit**.

**ViewForm**( *FormName* )

* *FormName* — обязательный аргумент.  Элемент управления "Форма", который нужно перевести в режим **FormMode.View**.

## <a name="examples"></a>Примеры
Полные примеры вы найдете в статье о [формах данных в Microsoft PowerApps](../working-with-forms.md).

1. Добавьте элемент управления "Кнопка", задайте значение **Сохранить** для ее свойства **[Text](../controls/properties-core.md)** и задайте следующую формулу в качестве значения свойства **[OnSelect](../controls/properties-core.md)**:
   
    **SubmitForm( EditForm )**
2. Задайте пустое значение для свойства **[OnFailure](../controls/control-form-detail.md)** элемента управления "Форма", а для свойства **[OnSuccess](../controls/control-form-detail.md)** введите такую формулу:
   
    **Back()**
3. Создайте элемент управления **[Метка](../controls/control-text-box.md)** с именем **ErrorText** и задайте в качестве значения параметра **[Text](../controls/properties-core.md)** следующую формулу:
   
    **EditForm.Error**
   
    Когда пользователь выбирает кнопку **Сохранить**, все внесенные в форме изменения отправляются в источник данных.
   
   * Если отправка прошла успешно, все изменения сохраняются в существующей или новой (если элемент управления "Форма" находился в режиме **New**) записи. **ErrorText** получает *пустое* значение, и снова открывается предыдущий экран.
   * Если возникла ошибка при передаче, **ErrorText** получает понятное сообщение об ошибке и остается открытым текущий экран, где пользователь может устранить проблему и повторить попытку.
4. Добавьте элемент управления "Кнопка", задайте значение **Отменить** для ее свойства **[Text](../controls/properties-core.md)** и задайте следующую формулу в качестве значения свойства **[OnSelect](../controls/properties-core.md)**:
   
    **ResetForm( EditForm ); Back()**
   
    Когда пользователь выбирает кнопку **Отменить**, значения в элементе управления "Форма" сбрасываются до того состояния, в котором они находились до редактирования пользователем. Снова открывается предыдущий экран, и элемент управления "Форма" переходит в режим **Edit**, если для него был назначен режим **New**.
5. Добавьте элемент управления "Кнопка", задайте значение **Добавить** для ее свойства **[Text](../controls/properties-core.md)** и задайте следующую формулу в качестве значения свойства **[OnSelect](../controls/properties-core.md)**:
   
    **NewForm( EditForm ); Navigate( EditScreen, None )**
   
    Когда пользователь нажимает кнопку **New**, элемент управления "Форма" переключается в режим **New** и заполняется значениями по умолчанию для источника данных, назначенного этому элементу управления "Форма". После этого открывается экран, который содержит элемент управления "Форма". Теперь, когда выполняется функция **SubmitForm**, запись создается, а не обновляется.

