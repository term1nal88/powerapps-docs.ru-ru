---
title: Функция Errors | Документация Майкрософт
description: Справочные сведения о функции Errors в PowerApps, в том числе описание синтаксиса и примеры и примеры
author: gregli-msft
manager: kvivek
ms.service: powerapps
ms.topic: reference
ms.custom: canvas
ms.reviewer: anneta
ms.date: 11/11/2015
ms.author: gregli
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: 886479b4cd2f7e04e9949c99ba05e6219e92b2b3
ms.sourcegitcommit: 429b83aaa5a91d5868e1fbc169bed1bac0c709ea
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/24/2018
ms.locfileid: "42859993"
---
# <a name="errors-function-in-powerapps"></a>Функция Errors в PowerApps
В этой статье приведены сведения об ошибках, связанных с предыдущими изменениями [источника данных](../working-with-data-sources.md).

## <a name="overview"></a>Обзор
Ошибки могут возникать при изменении [записи](../working-with-tables.md#records) источника данных.  Причин может быть много, включая перебои в работе сети, отсутствие достаточных разрешений и конфликты редактирования.  

Функция **[Patch](function-patch.md)** и другие функции данных не возвращают ошибки напрямую. Вместо этого они возвращают результат своей работы. После выполнения функции данных можно использовать функцию **Errors** для получения сведений об ошибках.  Вы можете проверить наличие ошибок, используя функцию **[IsEmpty]** в формуле **IsEmpty( Errors ( ... ) )**.

Некоторые ошибки можно устранить до их возникновения с помощью функций **[Validate](function-validate.md)** и **[DataSourceInfo](function-datasourceinfo.md)**.  Дополнительные сведения о работе с ошибками и их устранении см. в статье [Общие сведения об источниках данных в PowerApps](../working-with-data-sources.md).

## <a name="description"></a>Описание
Функция **Errors** возвращает [таблицу](../working-with-tables.md) ошибок, содержащую следующие [столбцы](../working-with-tables.md#columns):

* **Record** (Запись).  Запись в источнике данных, содержащем ошибку.  Если ошибка произошла во время создания записи, этот столбец будет *пустым*.
* **Column** (Столбец).  Столбец, вызвавший ошибку, если ошибку можно отнести к одному столбцу. В противном случае он будет *пустым*.
* **Message** (Сообщение).  Описание ошибки.  Эта строка ошибки может быть отображена для пользователя.  Учтите, что это сообщение может быть создано источником данных. Оно может быть длинным и содержать прямые имена столбцов, которые, возможно, не будут понятны для пользователя.
* **Error** (Ошибка).  Код ошибки, который можно использовать в формулах для ее устранения.

| ErrorKind (Тип ошибки) | Описание |
| --- | --- |
| ErrorKind.Conflict |В ту же запись было внесено другое изменение, что привело к конфликту изменений.  Используйте функцию **[Refresh](function-refresh.md)**, чтобы загрузить запись заново, и повторите попытку изменения. |
| ErrorKind.ConstraintViolation |Нарушено одно или несколько ограничений. |
| ErrorKind.CreatePermission |Предпринята попытка создать запись, при этом у текущего пользователя нет разрешения на создание записей. |
| ErrorKind.DeletePermission |Предпринята попытка удалить запись, при этом у текущего пользователя нет разрешения на удаление записей. |
| ErrorKind.EditPermission |Предпринята попытка изменить запись, при этом у текущего пользователя нет разрешения на изменение записей. |
| ErrorKind.GeneratedValue |Предпринята попытка изменить столбец, который автоматически создается источником данных. |
| ErrorKind.MissingRequired |Значение требуемого столбца отсутствует в записи. |
| ErrorKind.None |Отсутствие ошибок. |
| ErrorKind.NotFound |Предпринята попытка изменить или удалить запись, которую не удалось найти.  Возможно, другой пользователь изменил запись. |
| ErrorKind.ReadOnlyValue |Предпринята попытка изменить столбец, который доступен только для чтения. |
| ErrorKind.Sync |Произошла ошибка в источнике данных.  Чтобы узнать больше, просмотрите столбец "Message". |
| ErrorKind.Unknown |Произошла неизвестная ошибка. |
| ErrorKind.Validation |Обнаружена общая проблема проверки, которая не соответствует ни одному из типов. |

Ошибки могут быть возвращены для всего источника данных или только для выбранной строки. При этом для функции предоставляется аргумент *Record*.  

Функция **[Patch](function-patch.md)** или другая функция данных может возвращать *пустое* значение, если, например, не удалось создать запись. Вы можете передать *пустое* значение функции **Errors**. В таком случае она возвратит необходимые сведения об ошибке.  При последующем использовании функций данных в том же источнике данных эти сведения об ошибке будут удалены.

Если ошибок нет, таблица, которую возвращает функция **Errors**, будет [пустой](function-isblank-isempty.md), и ее можно будет проверить с помощью функции **[IsEmpty](function-isblank-isempty.md)**.

## <a name="syntax"></a>Синтаксис
**Errors**( *DataSource* [, *Record* ] )

* *DataSource* — обязательный аргумент. Источник данных, для которого необходимо вернуть ошибки.
* *Record* — необязательный аргумент.  Определенная запись, для которой необходимо вернуть ошибки. Если этот аргумент не указан, функция возвратит ошибки для всего источника данных.

## <a name="examples"></a>Примеры
### <a name="step-by-step"></a>Шаг за шагом
В этом примере мы будем работать с источником данных **IceCream**.

![](media/function-errors/icecream.png)

С помощью приложения пользователь загружает запись Chocolate в форму ввода данных, а затем изменяет значение свойства **Quantity** на 90.  Запись помещается в [переменную контекста](../working-with-variables.md#create-a-context-variable) **EditRecord**.

* **UpdateContext( { EditRecord: First( Filter( IceCream, Flavor = "Chocolate" ) ) } )**

Внести эти изменения в источник можно с помощью функции **[Patch](function-patch.md)**.

* **Patch( IceCream, EditRecord, Gallery.Updates )**,

где **Gallery.Updates** равно **{ Quantity: 90 }**, так как только свойство **Quantity** изменено.

К сожалению, прямо перед вызовом функции **[Patch](function-patch.md)** кто-то изменил значение свойства **Quantity** для записи Chocolate на 80.  PowerApps определит это и не допустит конфликтного изменения.  Вы можете проверить, случилось ли нечто подобное, с помощью формулы:

* **IsEmpty( Errors( IceCream, EditRecord ) )**,

которая возвращает значение **false**, так как функция **Errors** возвратила приведенную ниже таблицу.

| Запись | Столбец | Сообщение | Ошибка |
| --- | --- | --- | --- |
| { Flavor: "Chocolate", Quantity: 100 } |*пустое значение* |"Запись, которую вы пытаетесь изменить, изменена другим пользователем. Перезагрузите ее и повторите попытку". |ErrorKind.Conflict |

Вы можете поместить метку в форме для отображения данной ошибки пользователю.

* Чтобы отобразить ошибку, задайте для свойства **[Text](../controls/properties-core.md)** метки эту формулу:<br>
  **Label.Text = First(Errors( IceCream, EditRecord )).Message**

Вы также можете добавить в форму кнопку **Перезагрузить**, чтобы пользователь мог эффективно разрешить конфликт.

* Чтобы отображать кнопку только при возникновении конфликта, задайте для свойства **[Visible](../controls/properties-core.md)** кнопки эту формулу:<br>
    **!IsEmpty( Lookup( Errors( IceCream, EditRecord ), Error = ErrorKind.Conflict ) )**
* Чтобы пользователь мог отменять изменение нажатием кнопки, задайте в качестве значения свойства **[OnSelect](../controls/properties-core.md)** следующую формулу:<br>
    **ReloadButton.OnSelect = Revert( IceCream, EditRecord )**

