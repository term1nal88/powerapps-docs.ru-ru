---
title: Функция UpdateContext | Документация Майкрософт
description: Справочные сведения о функции UpdateContext в PowerApps, в том числе описание синтаксиса и примеры.
author: gregli-msft
manager: kvivek
ms.service: powerapps
ms.topic: reference
ms.custom: canvas
ms.reviewer: anneta
ms.date: 11/08/2015
ms.author: gregli
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: 6f89887d05f4b4885e66335457357a089ceaf90f
ms.sourcegitcommit: 429b83aaa5a91d5868e1fbc169bed1bac0c709ea
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/24/2018
ms.locfileid: "42865516"
---
# <a name="updatecontext-function-in-powerapps"></a>Функция UpdateContext в PowerApps
Функция UpdateContext создает или обновляет [переменные контекста](../working-with-variables.md#create-a-context-variable) текущего экрана.

## <a name="overview"></a>Обзор
Функция **UpdateContext** позволяет создать переменную контекста, которая временно содержит определенные сведения, например число нажатий кнопки или результаты выполнения операций с данными.

Переменные контекста привязаны к экрану. Это означает, что вы не можете создать формулу, ссылающуюся на переменную контекста другого экрана. При использовании другого средства программирования переменную контекста можно представить как локальную переменную.  Для работы с глобальными переменными приложения используйте функцию [**Set**](function-set.md).  

Служба PowerApps основывается на формулах, которые автоматически вычисляются при взаимодействии пользователя с приложением.  Переменные контекста не предоставляют эту возможность, а также могут усложнить как процесс создания, так и структуру самого приложения.  Прежде чем приступить к работе с переменной контекста, ознакомьтесь с [общими сведениями о переменных](../working-with-variables.md).

## <a name="description"></a>Описание
Чтобы создать или обновить переменную контекста, передайте одну [запись](../working-with-tables.md#records) в функцию **UpdateContext**. В каждой записи укажите имя [столбца](../working-with-tables.md#columns), которое определяет имя переменной или соответствует ему, и значение переменной.

* Если вы указали имя ранее определенной переменной, функция **UpdateContext** задает для нее указанное значение.
* Если вы указали имя еще не созданной переменной, функция **UpdateContext** создает переменную с этим именем и задает для нее указанное значение.
* Если вы определили переменную ранее, но не указали ее конкретно в этой формуле **UpdateContext**, ее значение не изменяется.

Переменные контекста неявно создаются с помощью функции **UpdateContext** или [**Navigate**](function-navigate.md).  Для этого не требуется явное объявление.  Если удалить все ссылки**UpdateContext** и **Navigate** на переменную контекста, эта переменная исчезнет.  Чтобы очистить переменную, задайте в качестве ее значения результат функции [**Blank**](function-isblank-isempty.md).

Чтобы просмотреть значения, определения и сведения об использовании переменных, перейдите в среде разработки к меню "Файл", а затем откройте представление "Переменные".

Ссылку на переменную контекста в формуле можно добавить на основе имени столбца этой переменной. Например, функция **UpdateContext( { ShowLogo: true } )** создает переменную контекста с именем **ShowLogo** и задает для нее значение **true**. Затем значение этой переменной контекста можно использовать по имени **ShowLogo** в формуле.  Вы можете написать переменную контекста **ShowLogo** как формулу для свойства **Visible** элемента управления "Изображение", а затем показывать или скрывать этот элемент в зависимости от заданного значения переменной (**true** или **false**).

Как показано далее в примерах, переменные контекста могут содержать несколько типов данных, в том числе:

* одиночное значение;
* запись;
* таблица;
* ссылку на объект;
* любой результат формулы.

Значение переменной контекста хранится, пока приложение не будет закрыто.  Если определить переменную контекста и назначить ей значение для определенного экрана, данные не изменятся даже после переключения на другой экран.  Когда приложение закроется, значение переменной контекста будет потеряно. При следующей загрузке приложения его нужно будет создать снова.  

Каждая переменная контекста привязана к конкретному экрану. Если вы определили переменную контекста на одном экране, а затем хотите изменить ее на другом, необходимо создать формулу на основе функции **[Navigate](function-navigate.md)**.  Или можно использовать глобальную переменную.

Функция **UpdateContext** не возвращает никакого значения, и ее можно использовать только в [формуле управления поведением](../working-with-formulas-in-depth.md).

## <a name="syntax"></a>Синтаксис
**UpdateContext**( *UpdateRecord* )

* *UpdateRecord* — обязательный аргумент. Запись, содержащая имя хотя бы одного столбца и его значение. Переменная контекста создается или обновляется для каждого указанного столбца и значения.

**UpdateContext**( { *ContextVariable1*: *Value1* [, *ContextVariable2*: *Value2* [, ... ] ] } )

* *ContextVariable1* — обязательный аргумент.  Имя создаваемой или обновляемой переменной контекста.
* *Value1* — обязательное значение.  Значение, присваиваемое переменной контекста.
* *ContextVariable2*: *Value2* и т. д. — необязательные параметры. Дополнительные переменные контекста, которые нужно создать, и их значения.

## <a name="examples"></a>Примеры

| Формула | Описание | Возвращаемый результат |
| --- | --- | --- |
| **UpdateContext( {&nbsp;Counter:&nbsp;1&nbsp;} )** |Создает или изменяет переменную контекста **Counter**, задавая для нее значение **1**. |Переменная контекста **Counter** имеет значение **1**. Вы можете добавить ссылку на эту переменную по имени **Counter** в формуле. |
| **UpdateContext( {&nbsp;Counter:&nbsp;2&nbsp;} )** |Изменяет значение переменной контекста **Counter** из предыдущего примера на **2**. |Переменная контекста **Counter** имеет значение **2**. |
| **UpdateContext( {&nbsp;Name:&nbsp;"Lily",&nbsp;Score:&nbsp;10&nbsp;} )** |Создает или изменяет переменные контекста **Name** и **Score**, задавая для них значения **Lily** и **10** соответственно. |Переменная контекста **Name** имеет значение **Lily**, а переменная **Score** — **10**. |
| **UpdateContext( {&nbsp;Person:&nbsp;{&nbsp;Name:&nbsp;"Milton", Address:&nbsp;"1&nbsp;Main&nbsp;St"&nbsp;}&nbsp;} )** |Создает или изменяет переменную контекста **Person**, задавая для нее запись в качестве значения. Запись содержит два столбца: **Name** и **Address**. Столбец **Name** имеет значение **Milton**, а столбец **Address** — **1 Main St**. |Переменной контекста **Person** присваивается значение записи **{&nbsp;Name:&nbsp;"Milton", Address:&nbsp;"1&nbsp;Main&nbsp;St"&nbsp;}&nbsp;}**.<br><br>Добавьте ссылку на эту запись в целом по имени **Person** или на ее отдельный столбец с помощью параметра **Person.Name** или **Person.Address**. |
| **UpdateContext( {&nbsp;Person: Patch(&nbsp;Person,&nbsp;{Address:&nbsp;"2&nbsp;Main&nbsp;St"&nbsp;}&nbsp;) }&nbsp;)** |В сочетании с функцией **[Patch](function-patch.md)** позволяет обновить переменную контекста **Person**, задав для столбца **Address** значение **2 Main St**. |Переменной контекста **Person** присваивается значение записи **{&nbsp;Name:&nbsp;"Milton", Address:&nbsp;"2&nbsp;Main&nbsp;St"&nbsp;}&nbsp;}**. |

### <a name="step-by-step-example"></a>Пошаговый пример
1. Присвойте экрану по умолчанию имя **Source** и добавьте еще один экран с именем **Target**.
2. На экране **Source** добавьте две кнопки и задайте для их свойств **[Text](../controls/properties-core.md)** значения **English** и **Spanish**.
3. В качестве значения свойства **[OnSelect](../controls/properties-core.md)** кнопки **English** задайте это выражение:<br>**Navigate(Target, ScreenTransition.Fade, {Language:"English"})**
4. В качестве значения свойства **[OnSelect](../controls/properties-core.md)** кнопки **Spanish** задайте это выражение:<br>**Navigate(Target, ScreenTransition.Fade, {Language:"Spanish"})**
5. На экране **Target** добавьте метку и задайте в качестве значения ее свойства **[Text](../controls/properties-core.md)** это выражение:<br>**If(Language="English", "Hello!", "Hola!")**
6. На экране **Target** перейдите на вкладку **Вставка**, выберите **Фигуры** и нажмите кнопку со стрелкой "Назад".
7. Задайте для свойства **[OnSelect](../controls/properties-core.md)** стрелки "Назад" эту формулу:<br>**Navigate(Source, ScreenTransition.Fade)**
8. На экране **Source** нажмите клавишу F5, а затем нажмите кнопку для любого языка.

    После этого на экране **Target** появится метка на языке, соответствующем нажатой кнопке.
9. Нажмите кнопку со стрелкой "Назад", чтобы вернуться на экран **Source**, и нажмите кнопку для другого языка.

    После этого на экране **Target** появится метка на языке, соответствующем нажатой кнопке.
10. Нажмите клавишу ESC, чтобы вернуться в рабочую область по умолчанию.

[Другой пример](../add-screen-context-variables.md)

