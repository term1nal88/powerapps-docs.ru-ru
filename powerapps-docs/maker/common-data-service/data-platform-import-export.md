---
title: Импорт и экспорт данных из Common Data Service для приложений
description: Групповой импорт и экспорт данных из файлов Excel или CSV в сущности в Common Data Service для приложений с помощью функций получения данных из Excel и экспорта данных
author: sabinn-msft
ms.service: powerapps
ms.topic: conceptual
ms.component: cds
ms.date: 05/14/2018
ms.author: sabinn
search.audienceType:
  - maker
search.app:
  - PowerApps
  - D365CE
---
# <a name="import-or-export-data-from-common-data-service-for-apps"></a>Импорт и экспорт данных из Common Data Service для приложений

Для группового импорта и экспорта данных из файлов Microsoft Excel или CSV используйте функции получения данных из файла Excel и экспорта данных для обновленных сред Common Data Service для приложений.

Существует два способа, которыми можно импортировать файлы в сущности из файлов Excel или CSV.

## <a name="option-1-import-by-creating-and-modifying-a-file-template"></a>Вариант 1. Импорт путем создания и изменения шаблона файла

Каждая сущность имеет необходимые поля, которые должны существовать во входном файле. Рекомендуется создать шаблон. Во-первых, экспортируйте данные из сущности. Используйте тот же файл (измененный с вашими данными) для импорта данных в сущность. Этот шаблон экономит время и силы. Не потребуется учитывать все обязательные поля для каждой сущности.

1. Подготовьте шаблон файла.

    a. Экспортируйте данные сущности в файл CVS. Выполните шаги из раздела **Экспорт данных в CSV**.  
    b. Определите план, чтобы обеспечить уникальность данных. Используйте **первичные ключи** или **альтернативные ключи**.  
    c. Инструкции по обеспечению уникальности данных перед их импортом в сущность см. в следующем разделе. 

1. Измените файл с данными.

    - Скопируйте данные из файла Excel или CSV в только что созданный шаблон.

1. Импортируйте файл.  
    a. На сайта [powerapps.com](https://web.powerapps.com/) разверните раздел **Данные**. В левой области переходов выберите **Сущности**.  
    b. Выберите сущность, в которую необходимо импортировать данные.  
    c. Выберите многоточие или меню в верхней части. Выберите **Получить данные**. Выберите **Получить данные из Excel**.  

    > [!NOTE]
    > Чтобы импортировать данные в несколько сущностей, в верхнем меню выберите **Получить данные**. Выберите **Получить данные из Excel**. Затем можно выбрать несколько сущностей и выбрать **Далее**.

    > [!div class="mx-imgBorder"] 
    > ![Пример импорта данных в сущность **Организация**](./media/data-platform-import-export/import-data-to-account.png)

    d. На экране **Импорт данных** выберите, нужно ли импортировать данные из файла Excel или CSV.  
    e. Выберите **Отправить**.  
    f. Выберите свой файл. Следуйте приглашения, чтобы отправить файл.  

    > [!div class="mx-imgBorder"] 
    > ![Пример отправки файла сущности **Организация**](./media/data-platform-import-export/upload-account.png)

    g. После того как файл отправлен и **Состояние сопоставления** зеленое, выберите **Импорт** в правом верхнем углу. См. следующий раздел для навигации и устранения всех ошибок сопоставления.  

    > [!div class="mx-imgBorder"] 
    > ![Пример успешного **Состояния сопоставления** и кнопки **Импорт**](./media/data-platform-import-export/success-map-imp.png)

    h. После успешного завершения импорта вы увидите общее число вставок и обновлений.  

    > [!div class="mx-imgBorder"] 
    > ![Пример успешного импорта, в котором показываются количество вставок и обновлений](./media/data-platform-import-export/success-imp-insert.png)

    > [!NOTE]
    > Используйте логику Upsert (обновление или вставка) для обновления записи, если она уже существует, или вставки новой записи.

## <a name="option-2-import-by-bringing-your-own-source-file"></a>Вариант 2. Импорт путем внесения собственного исходного файла

Если вы опытный пользователь и знаете требуемые поля для определенной сущности для сущностей Common Data Service для приложений, определите собственный исходный файл Excel или CSV. Следуйте инструкциям в разделе **Импорт файла**.

## <a name="navigate-mapping-errors"></a>Переход между ошибками сопоставления

При получении ошибок сопоставления после отправки файла выберите **Статус сопоставления**. Выполните следующие шаги, чтобы проверить и исправить ошибки сопоставления полей.

1. Используйте выпадающее меню справа, в разделе **Показать**, чтобы переходить между полями **Несопоставленные поля**, **Поля с ошибками** или **Обязательные поля**.

    > [!TIP]
    > В зависимости от того, является ли сообщение предупреждением или ошибкой, проверьте **Несопоставленные поля** или **Поля с ошибкой** с помощью раскрывающегося меню в области **Сопоставление полей**.

    > [!div class="mx-imgBorder"] 
    > ![Пример частично соответствия из-за предупреждения с сопоставлениях полей](./media/data-platform-import-export/partial-match.png)

    > [!div class="mx-imgBorder"] 
    > ![Пример перемещения между проблемами сопоставления полей](./media/data-platform-import-export/navigate-mappings.png)

    > [!div class="mx-imgBorder"] 
    > ![Пример проверки и исправления предупреждений с сопоставлениями полей](./media/data-platform-import-export/inspect-warnings.png)

2. После устранения всех ошибок и предупреждений выберите **Сохранить изменения** в правом верхнем углу. Вы вернетесь на экран **Импорт данных**.
3. Когда в столбце **Состояние сопоставления** отображается зеленым цветом значение **Завершено**, выберите **Импорт** в правом верхнем углу.
4. При получении сообщения **Импорт выполнен успешно** отображается общее количество вставок и обновлений.

## <a name="ensure-uniqueness-when-you-import-data-into-an-entity-from-excel-or-csv"></a>Обеспечение уникальности при импорте данных в сущность из Excel или CSV

В Common Data Service для приложений для сущностей используется первичный ключ для уникальной идентификации записей в общей таблице сущностей Common Data Service. Первичный ключ для сущности Common Data Service является глобальным уникальным идентификатором (GUID). Он формирует основу по умолчанию для идентификации записей. Операции с данными, такие как импорт данных в сущности Common Data Service, основываются на первичных ключах по умолчанию.

Пример:  
Первичный ключ для сущности **Организация** — **accountid**.

   > [!div class="mx-imgBorder"] 
   > ![Пример экспорта файла из сущности **Организация**, показывающий **accountid** как первичный ключ](./media/data-platform-import-export/export-pk.png)

Иногда первичный ключ может не работать при интеграции данных из внешнего источника. Используйте Common Data Service для определения альтернативных ключей, которые уникально определяют запись вместо первичного ключа.

Пример:  
Для сущности **Организация** можно установить **transactioncurrencyid** в качестве альтернативного ключ с помощью естественной идентификации на основе ключей. Например, используйте **Доллар США** вместо идентификатора GUID **88c6c893-5b45-e811-a953-000d3a33bcb9**, показанного ранее. Можно также выбрать как ключи **символ валюты** или **название валюты**.

   > [!div class="mx-imgBorder"] 
   > ![Пример создания альтернативного ключа для сущности **Валюта**](./media/data-platform-import-export/create-ak.png)

   > [!div class="mx-imgBorder"] 
   > ![Пример экспорта файла из сущности **Организация**, показывающий **название валюты** как естественный ключ](./media/data-platform-import-export/export-nk.png)

Пользователи могут по прежнему использовать первичные ключи как идентификаторы после указания альтернативных ключей. В предыдущем примере первый файл по-прежнему допустим, если идентификаторы GUID являются допустимыми данными.

## <a name="export-data-to-csv"></a>Экспорт данных в CSV

Можно выполнить однократный экспорт данных из стандартной сущности или настраиваемой сущности. И можно экспортировать данные из нескольких сущностей одновременно. При экспорте данных из нескольких сущностей, каждая сущность экспортируется в собственный файл Microsoft CSV.

1. На сайта [powerapps.com](https://web.powerapps.com/) разверните раздел **Данные**. В левой области переходов выберите **Сущности**.
1. Выберите сущность, из которой требуется экспортировать данные.
1. Выберите многоточие или меню в верхней части. Выберите **Экспорт**. Выберите **Данные**.

    > [!div class="mx-imgBorder"] 
    > ![Пример экспорта данных из сущности **Организация**](./media/data-platform-import-export/export-account.png)

    > [!NOTE]
    > Чтобы экспортировать данные из нескольких сущностей, в верхнем меню выберите **Экспорт**. Выберите **Данные**. Можно выбрать несколько сущностей.

1. После успешного завершения экспорта можно **Загрузить экспортированные данные**. Данная загрузка дает ссылку на загружаемый CSV-файл.

    > [!div class="mx-imgBorder"] 
    > ![Пример экспорта, который показывает успешный экспорт со ссылкой на загружаемый файл](./media/data-platform-import-export/export-success.png)

## <a name="unsupported-data-types"></a>Неподдерживаемые типы данных

Следующие типы данных в настоящее время не поддерживаются.

- Часовой пояс
- Набор параметров с выбором нескольких вариантов
- Изображение
