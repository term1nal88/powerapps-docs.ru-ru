---
title: Импорт и экспорт данных в службе Common Data Service for Apps
description: Массовый импорт и экспорт данных из файлов Excel или CSV в сущности в службе Common Data Service (CDS) for Apps с помощью функций "Получить данные из Excel" и "Экспорт данных"
author: sabinn-msft
ms.service: powerapps
ms.topic: conceptual
ms.component: cds
ms.date: 05/14/2018
ms.author: sabinn
ms.openlocfilehash: 7f3e16be5bba1874759e0f9e40dc455f1e29c2bc
ms.sourcegitcommit: 68fc13fdc2c991c499ad6fe9ae1e0f8dab597139
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2018
ms.locfileid: "34697585"
---
# <a name="import-or-export-data-from-the-common-data-service-for-apps"></a>Импорт и экспорт данных в службе Common Data Service for Apps

Если вам нужно массово импортировать и экспортировать данные из файлов Excel или CSV, вы можете использовать функции "Получить данные из файла Excel" и "Экспорт данных" в обновленных средах Common Data Service (CDS) for Apps.

Импортировать файл в сущность из файла Excel или CSV можно двумя способами.

## <a name="option-1-import-by-creating-and-modifying-a-file-template"></a>Вариант 1. Импорт путем создания и изменения шаблона файла

Каждая сущность имеет обязательные поля, которые должны существовать во входном файле. Для удобства мы рекомендуем создать шаблон, сначала экспортировав данные из сущности, а затем импортировав данные в сущность с помощью этого же файла (содержащего ваши данные). Это позволит сэкономить время и усилия, требуемые для учета обязательных полей каждой сущности.

1. Подготовка шаблона файла

    - Сначала экспортируйте данные сущности в файл CSV, выполнив действия, указанные в разделе "Экспорт данных в файл CSV".
    - Определите план, чтобы обеспечить уникальность данных с помощью первичных или альтернативных ключей.
    - Сведения об обеспечении уникальности перед импортом данных в сущность см. в разделе ниже.

1. Добавление данных в файл

    - Скопируйте данные из файла Excel или CSV в созданный шаблон.

1. Импорт файла
    - На сайте [powerapps.com](https://web.powerapps.com/) разверните раздел **Данные** и выберите элемент **Сущности** в области навигации слева.
    - Выберите сущность, в которую нужно импортировать данные.
    - Щелкните многоточие или меню в верхней части страницы и выберите пункт **Получить данные**, а затем нажмите **Получить данные из Excel**.

> [!NOTE]
> Чтобы импортировать данные в несколько сущностей, в верхнем меню выберите пункт **Получить данные**, а затем нажмите **Получить данные из Excel**. Выберите несколько сущностей и нажмите кнопку **Далее**.

![Пример импорта данных в сущность "Учетная запись"](./media/data-platform-import-export/import-data-to-account.png)

- Откроется экран **Импорт данных**, на котором можно выбрать способ импорта данных: посредством файла Excel или CSV.
- Нажмите кнопку **Отправить**.
- Выберите файл и следуйте указаниям, чтобы начать его отправку.

![Пример отправки файла в сущность "Учетная запись"](./media/data-platform-import-export/upload-account.png)

- После того как файл будет передан, а состояние сопоставления отметится зеленым значком, нажмите кнопку **Импорт** в правом верхнем углу. Если во время сопоставления возникнут ошибки, сведения об их исправлении см. в разделе ниже.

![Пример состояния успешного сопоставления и кнопки "Импорт"](./media/data-platform-import-export/success-map-imp.png)

- Когда появится сообщение **Импорт успешно завершен**, будет показано общее число добавленных и обновленных элементов данных.

![Пример страницы после успешного импорта с числом добавленных и обновленных элементов данных](./media/data-platform-import-export/success-imp-insert.png)

> [!NOTE]
> Мы используем логику Upsert (обновления или вставки) для обновления записи, если она уже существует, или вставки новой записи в противном случае.

## <a name="option-2-import-by-bringing-your-own-source-file"></a>Вариант 2. Импорт с помощью собственного исходного файла

Если вы являетесь опытным пользователем и хорошо знаете обязательные поля для данной сущности Common Data Service for Apps, вы можете определить собственный исходный файл Excel или CSV и выполнить действия, описываемые в разделе **Импорт файла**.

## <a name="navigating-mapping-errors"></a>Просмотр ошибок сопоставления

Если при отправке файла возникли ошибки сопоставления полей, щелкните **Состояние сопоставления** и выполните приведенные ниже инструкции, чтобы просмотреть и исправить их.

- В раскрывающемся списке **Показать** справа выберите один из пунктов, чтобы просмотреть **несопоставленные поля**, **поля с ошибкой** или **обязательные поля**.

> [!TIP]
> В раскрывающемся списке на странице **Сопоставления полей** выберите для просмотра **Несопоставленные поля** или **Поля с ошибкой** в зависимости от того, были ли получены предупреждение или ошибка.

![Пример предупреждения о частичном совпадении при сопоставлении полей](./media/data-platform-import-export/partial-match.png)

![Пример просмотра проблем с сопоставлением полей](./media/data-platform-import-export/navigate-mappings.png)

![ Пример просмотра и устранения предупреждений, полученных при сопоставлении полей](./media/data-platform-import-export/inspect-warnings.png)

- Устранив все ошибки и предупреждения, нажмите кнопку **Сохранить изменения** в правом верхнем углу, чтобы вернуться на экран **Импорт данных**.
- После того как в столбце **Состояние сопоставления** появится зеленая надпись **Выполнено**, нажмите кнопку **Импорт** в правом верхнем углу.
- Когда появится сообщение **Импорт успешно завершен**, будет показано общее число добавленных и обновленных элементов данных.

## <a name="ensuring-uniqueness-while-importing-data-into-entity-from-excel-or-csv"></a>Обеспечение уникальности при импорте данных в сущность из файла Excel или CSV

Для уникальной идентификации записей в таблице сущностей Common Data Service for Apps используется первичный ключ. Первичный ключ для сущности CDS представляет собой глобальный уникальный идентификатор (GUID), на основе которого по умолчанию осуществляется идентификация записей. При операциях с данными, например импорте данных в сущность CDS, предоставляются первичные ключи по умолчанию.

Пример: первичный ключ для сущности "Учетная запись" — accountid

![Пример файла, экспортированного из сущности "Учетная запись", с accountid в качестве первичного ключа](./media/data-platform-import-export/export-pk.png)

Иногда первичного ключа может быть недостаточно при интеграции данных из внешнего источника. С этой целью служба CDS позволяет определить альтернативные ключи, которые применяются вместо первичного ключа для уникальной идентификации записей.

Пример: для сущности "Учетная запись" можно использовать идентификацию на основе естественных ключей, задав transactioncurrencyid в качестве альтернативного ключа (например, значение GUID *88c6c893-5b45-e811-a953-000d3a33bcb9*, приведенное выше, заменяется значением "Доллар США"). В качестве ключа можно также выбрать символ или название валюты.

![Пример создания альтернативного ключа для сущности "Валюта"](./media/data-platform-import-export/create-ak.png)

![Пример файла, экспортированного из сущности "Учетная запись", с названием валюты в качестве естественного ключа](./media/data-platform-import-export/export-nk.png)

После задания альтернативных ключей можно-по-прежнему использовать первичные ключи. Поэтому в приведенном выше примере первый файл допустим при условии, что допустимы предоставленные идентификаторы GUID.

## <a name="export-data-to-csv"></a>Экспорт данных в файл CSV

Вы можете выполнить одноразовый экспорт данных из стандартной или настраиваемой сущности, а также экспортировать данные сразу из нескольких сущностей. При экспорте данных из нескольких сущностей каждая сущность экспортируется в отдельный файл CSV.

1. На сайте [powerapps.com](https://web.powerapps.com/) разверните раздел **Данные** и выберите элемент **Сущности** в области навигации слева.
1. Выберите сущность, из которой нужно экспортировать данные.
1. Щелкните многоточие или меню в верхней части страницы и выберите пункт **Экспорт**, а затем нажмите **Данные**.

    ![Пример экспорта данных из сущности "Учетная запись"](./media/data-platform-import-export/export-account.png)

    > [!NOTE]
    > Чтобы экспортировать данные из нескольких сущностей, в верхнем меню выберите пункт **Экспорт** и нажмите **Данные**. Выберите несколько сущностей.

1. После успешного завершения экспорта должна появиться ссылка **Скачать экспортированные данные**, по которой можно скачать файл CSV.

    ![Пример успешного экспорта со ссылкой для скачивания файла](./media/data-platform-import-export/export-success.png)

## <a name="unsupported-data-types"></a>Неподдерживаемые типы данных

Следующие типы данных сейчас не поддерживаются:

- Часовой пояс
- Набор параметров с множественным выбором
- Изображение
