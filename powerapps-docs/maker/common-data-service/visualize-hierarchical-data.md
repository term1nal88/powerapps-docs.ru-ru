---
title: Визуализация иерархических данных с помощью приложений на основе модели | Документы Майкрософт
description: Сведения об отправке запросов к иерархическим связанным данным и о визуализации этих данных
ms.custom: ''
ms.date: 06/02/2018
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- powerapps
author: Mattp123
ms.author: matp
manager: kvivek
ms.openlocfilehash: bed8662d7d9475215df8e92490702b68e36574e2
ms.sourcegitcommit: aba996b1773ecdf62758e06b34eaf57bede29e08
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/08/2018
ms.locfileid: "39704136"
---
# <a name="visualize-hierarchical-data-with-model-driven-apps"></a>Визуализация иерархических данных с помощью приложений на основе модели

> [!NOTE]
> Визуализации иерархических данных доступны только для приложений на основе модели, настроенных для **веб**-клиента. Визуализации недоступны для клиента с **единым интерфейсом**. Дополнительные сведения см. в разделе [Создание приложения на основе модели с помощью конструктора приложений](../model-driven-apps/create-edit-app.md).

Если сущность должна иметь иерархическое отношение, ссылающееся на себя, можно настроить визуализации, использующие эту иерархию. Дополнительные сведения см.в разделе [Определение иерархических данных и отправка запросов к этим данным](../common-data-service/define-query-hierarchical-data.md).

Сущности с визуализациями, доступными по умолчанию, включают [Учетную запись](/powerapps/developer/common-data-service/reference/entities/account), [Должность](/powerapps/developer/common-data-service/reference/entities/position) и [Пользователя](/powerapps/developer/common-data-service/reference/entities/systemuser). В представлении этих сущностей в виде сетки вы видите значок, представляющий диаграмму иерархии, слева от имени записи. Значок иерархии по умолчанию отображается не для всех записей. Значок отображается для записей, которые связаны с помощью иерархических отношений.  
  
 ![Учетные записи с иерархией](media/account-list-with-hierarchy.png)  
  
 Щелкнув значок иерархии, вы сможете просмотреть иерархию с представлением в виде дерева слева и представлением в виде плиток справа:  
  
 ![Представление учетной записи в виде дерева и в виде плиток](media/hierachy-security-accounts-tile-view.png)  
  
 Вы можете включить поддержку иерархии для некоторых других сущностей. К этим сущностям относятся [Контакт](/powerapps/developer/common-data-service/reference/entities/contact) и [Команда](/powerapps/developer/common-data-service/reference/entities/team). Вы можете включить поддержку иерархии для всех пользовательских сущностей.  
  
При создании визуализаций важно учитывать следующие аспекты:  
  
- В качестве иерархического отношения можно использовать только одно отношение, ссылающееся на себя, для каждой сущности (1:N). В отношении, ссылающемся на себя, основная и связанная сущность должна иметь один и тот же тип.  
- Иерархия или визуализация могут быть основаны только на одной сущности. Вы можете отобразить иерархию учетных записей с учетными записями на нескольких уровнях, но не можете отобразить учетные записи и контакты в одной и той визуализации иерархии. 
- Максимальное число полей, которые могут быть отображены в плитке, — четыре. При добавлении дополнительных полей в экспресс-форму, которая используется для представления в виде плиток, будут отображаться только первые четыре поля для каждой плитки. 

## <a name="hierarchy-settings"></a>Параметры иерархии

Чтобы включить визуализации для иерархии, необходимо подключить иерархию к экспресс-форме. Это можно сделать только с помощью обозревателя решений.

[!INCLUDE [cc_navigate-solution-from-powerapps-portal](../../includes/cc_navigate-solution-from-powerapps-portal.md)]

Параметры иерархии связываются с сущностью в обозревателе решений. 

1. Во время [просмотра сущностей](../common-data-service/create-edit-entities-solution-explorer.md#view-entities) выберите **Параметры иерархии**.
2. Если параметр иерархии задан, вы можете изменить его. В противном случае нажмите кнопку **Создать**, чтобы создать новый параметр.
    
    > [!NOTE]
    > Если параметры иерархии не существуют, то для сущности не может быть настроена иерархия.
    >Вы можете задать только один параметр иерархии 

1. Установите данные в следующих полях:

|Поле|Описание|
|--|--|
|**Name** (Наименование)|*Обязательное.* Добавьте уникальное имя для параметров иерархии. Обычно это просто имя сущности. Это значение будет включать настроенный префикс для издателя решения.|
|**Экспресс-форма по умолчанию**|*Обязательное.* Выберите существующую экспресс-форму или щелкните **Создать**, чтобы открыть редактор экспресс-форм и создать новую форму.|
|**Иерархическое отношение**|*Обязательное.* Если для сущности уже задано иерархическое отношение, значение будет установлено в этом поле. Если в этом поле нет значения, установите флажок **Пометить отношение как доступное для использования в иерархии**, чтобы открыть диалоговое окно для выбора одного из доступных отношений, ссылающихся на себя.|
|**Description;**|Включите описание назначения для этой иерархии, чтобы пользователи, которые будут настраивать систему в дальнейшем, смогли понять причину создания иерархии.|
    

Одни и те же иерархические параметры визуализации устанавливаются один раз, но применяются как к мобильным клиентам, так и к клиентам с веб-интерфейсом. В планшетных ПК визуальные элементы отображаются в измененном формате для экрана небольшого размера. Пользовательские компоненты, необходимые для иерархической визуализации, зависят от решения, поэтому они могут передаваться между организациями, как и любые другие пользовательские настройки. Вы можете настроить атрибуты, отображаемые в визуализации, изменив экспресс-форму в редакторе форм.
  
## <a name="visualization-walk-through"></a>Пошаговые действия для создания визуализации

Давайте рассмотрим пример создания визуализация для пользовательской сущности. Мы создали пользовательскую сущность под названием `new_Widget`, создали отношение (1:N) `new_new_widget_new_widget`, ссылающееся на себя, и пометили его как иерархическое, как показано ниже.  
  
![Определение отношения для мини-приложения](media/widget-relationship-definition.png)  
  
Затем в представлении сетки **Параметры иерархии** мы выбрали иерархическое отношение `new_new_widget_new_widget`. Мы заполнили необходимые поля в форме. Если вы еще не отметили отношение (1:N) как иерархическое, щелкните ссылку на форме, чтобы открыть форму определения отношения, в которой вы сможете пометить отношение как иерархическое.  

> [!IMPORTANT]
> У каждой сущности может быть только одно иерархическое отношение в один момент времени. Изменение этого отношения на другое отношение, ссылающееся на себя, может иметь последствия. Дополнительные сведения см. в разделе [Определение иерархических данных](../common-data-service/define-query-hierarchical-data.md#define-hierarchical-data).
  
![Параметры иерархии](media/hierarchy-settings.png)  
  
В качестве **экспресс-формы** мы создали экспресс-форму под названием **Форма плиток иерархии мини-приложения**. В этой форме мы добавили четыре поля, которые будут отображаться в плитках.  
  
![Создание экспресс-формы для мини-приложения](media/create-quickform.png)  
  
После завершения установки мы создали две записи: *Мини-приложение категории "Стандартный"* и *Мини-приложение категории "Премиум"*. После того как мы сделали мини-приложение категории "Премиум" родительским для мини-приложения категории "Стандартный" с помощью поля поиска, в представлении сетки `new_Widget` появились значки иерархии, показанные ниже:  
  
![Сетка иерархии мини-приложения](media/widget-hierarchy-grid.png)  
  
> [!NOTE]
>  Значки иерархии не отображаются в представлении сетки до тех пор, пока записи не будут связаны друг с другом с помощью отношения иерархии.  
  
Щелкнув значок иерархии, вы сможете просмотреть иерархию `new_Widget` с представлением в виде дерева слева, представлением в виде плиток справа и двумя записями. Каждая плитка содержит четыре поля, которые были указаны в **Форме плиток иерархии мини-приложения**.  
  
![Представление в виде дерева и представление в виде плиток для мини-приложения](media/widget-tree-tiles.png)  

В соответствии со своими потребностями вы можете выбрать представление в виде дерева, в котором отображается вся иерархия, или представление в виде плиток, в котором отображается небольшая часть иерархии. Оба представления отображаются рядом друг с другом. Вы можете просмотреть иерархию, разворачивая и сворачивая элементы дерева иерархии. 

### <a name="see-also"></a>См. также 

[Определение и запрос иерархических данных](../common-data-service/define-query-hierarchical-data.md)<br />
[Видео. Визуализация иерархии](http://www.youtube.com/watch?v=_dGBE6icLNw&index=9&list=PLC3591A8FE4ADBE07)