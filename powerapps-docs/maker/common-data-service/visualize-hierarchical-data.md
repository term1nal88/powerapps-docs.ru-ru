---
title: Визуализация иерархических данных с управляемыми моделью приложениями | MicrosoftDocs
description: 'Узнайте, как запрашивать и визуально отображать иерархически связанные данные'
ms.custom: ''
ms.date: 06/02/2018
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
  - Dynamics 365 (online)
  - Dynamics 365 Version 9.x
  - powerapps
author: Mattp123
ms.author: matp
manager: kvivek
search.audienceType:
  - maker
search.app:
  - PowerApps
  - D365CE
---
# <a name="visualize-hierarchical-data-with-model-driven-apps"></a>Визуализация иерархических данных с управляемыми моделью приложениями

> [!NOTE]
> Визуализации иерархических данных доступны только для управляемых моделью приложениями, настроенных для клиента **Веб**. Визуализации недоступны для клиента **Единого интерфейса**. Дополнительные сведения: [Создание приложения, управляемого моделью, с помощью конструктора приложений](../model-driven-apps/create-edit-app.md)

Если сущность настроена для наличия иерархического отношения, ссылающегося на себя, можно настроить визуализации с использованием этой иерархии. Дополнительные сведения: [Определение и запрос иерархически связанных данных](../common-data-service/define-query-hierarchical-data.md)

Сущности, для которых визуализации доступны по умолчанию, включают [Организация](/powerapps/developer/common-data-service/reference/entities/account), [Должность](/powerapps/developer/common-data-service/reference/entities/position) и [Пользователь](/powerapps/developer/common-data-service/reference/entities/systemuser). В табличном представлении этих сущностей доступен значок с диаграммой иерархии слева от имени записи. Значок иерархии доступен не для всех записей по умолчанию. Значок отображается для записей, которые связаны с помощью иерархического отношения.  
  
 ![Организации с иерархией](media/account-list-with-hierarchy.png)  
  
 Если нажать значок иерархии, можно просмотреть иерархию с представлением дерева в левой части и представлением плитки в правой части, как показано ниже.  
  
> [!div class="mx-imgBorder"] 
> ![Дерево организации и представление плитки](media/hierachy-security-accounts-tile-view.png)  
  
 Несколько других сущностей можно включить для иерархии. К таким сущностям относятся [Контакт](/powerapps/developer/common-data-service/reference/entities/contact) и [Рабочая группа](/powerapps/developer/common-data-service/reference/entities/team). Для иерархии можно включить любые настраиваемые сущности.  
  
При создании визуализаций важно помнить следующее:  
  
- Только одно ссылающееся на себя отношение (1: N) для сущности можно установить как иерархическое. В отношении со ссылкой на себя основная сущность и связанная сущность должны быть одного типа.  
- Иерархия или визуализация основывается только на одной сущности. Можно открыть иерархию организации, отображающую структуру организации на разных уровнях, но невозможно отобразить организации и контакты в одной визуализации иерархии. 
- Максимальное число полей, которые могут отображаться на плитке, — 4. Если добавить дополнительные поля в экспресс-форму, которая используется для представления плитки, будут отображаться только первые четыре поля. 

## <a name="hierarchy-settings"></a>Параметры иерархии

Чтобы включить визуализации для иерархии, необходимо связать иерархию с экспресс-формой. Это действие можно выполнить только с помощью обозревателя решений.

[!INCLUDE [cc_navigate-solution-from-powerapps-portal](../../includes/cc_navigate-solution-from-powerapps-portal.md)]

Параметры иерархии связаны с сущностью в обозревателе решений. 

1. Во время [просмотра сущностей](../common-data-service/create-edit-entities-solution-explorer.md#view-entities) выберите **Параметры иерархии**.
2. Если существующий параметр иерархии существует, можно изменить его. В противном случае щелкните **Создать**, чтобы создать новый.
    
    > [!NOTE]
    > Если параметры иерархии не существуют, у сущности не может иметься настроенная иерархия.
    >Может быть только один параметр иерархии 

1. Задайте данные в следующие поля:

|Поле|Описание|
|--|--|
|**Название**|*Обязательное.* Добавьте уникальное имя для параметров иерархии. Обычно это просто имя сущности. Это значение будет включать префикс настройки издателя решения.|
|**Экспресс-форма по умолчанию**|*Обязательное.* Выберите из существующей экспресс-формы или выберите **Создать новую**, чтобы открыть редактор экспресс-форм, чтобы создать новую.|
|**Иерархическое отношение**|*Обязательное.* Если иерархическое отношение уже определено для сущности, значение будет установлено здесь. Если значение нет, выберите **Пометить отношение как поддерживающее иерархии**, чтобы открыть диалог для выбора одного из доступных отношений со ссылкой на себя.|
|**Описание**|Включите описание назначения для этой иерархии, чтобы будущие пользователи, настраивающие систему, могли понять, почему это было сделано.|
    

Одни и те же иерархические параметры визуализации задаются один раз, но применяются как к веб-клиенту, так и к мобильным клиентам. На планшетах визуальные эффекты представляются в измененном формате, подходящем для меньшего форм-фактора. Настраиваемые компоненты, необходимые для иерархической визуализации, поддерживают решение, поэтому их можно переносить между организациями, как и любые другие настройки. Можно настроить атрибуты, представленные в визуализации, настроив экспресс-форму с помощью редактора форм.
  
## <a name="visualization-walk-through"></a>Пошаговое руководство по визуализации

Рассмотрим пример создания визуализации для настраиваемой сущности. Пользователь создал настраиваемую сущность `new_Widget`, создал ссылающееся на себя отношение (1:N) `new_new_widget_new_widget`, а затем отметил его как иерархическое, как показано ниже.  
  
![Определение отношения виджета](media/widget-relationship-definition.png)  
  
Затем в табличном представлении **Параметры иерархии** он выбрал иерархическое отношение `new_new_widget_new_widget`. В форме пользователь заполнил обязательные поля. Если пользователь еще не отметил отношение (1:N) как иерархическое, ссылка в форме перенаправит его назад в форму определения отношения, в которой можно отметить отношение как иерархическое.  

> [!IMPORTANT]
> У каждой сущности единовременно может быть только одно иерархическое отношение. Изменение этого на другое ссылающееся на себя отношение может иметь последствия. Дополнительные сведения: [Определение иерархических данных](../common-data-service/define-query-hierarchical-data.md#define-hierarchical-data)

> [!div class="mx-imgBorder"] 
> ![Параметры иерархии](media/hierarchy-settings.png)  
  
В качестве параметра **Экспресс-форма** пользователь создает экспресс-форму с именем **Форма плитки иерархии мини-приложения**. В этой форме пользователь добавляет четыре поля для отображения на каждой плитке.  

> [!div class="mx-imgBorder"] 
> ![Создание экспресс-формы для виджета](media/create-quickform.png)  
  
По завершении настройки пользователь создает две записи: *Стандартное мини-приложение* и *Расширенное мини-приложение*. После задания расширенного мини-приложения в качестве родительского объекта для стандартного мини-приложения с помощью поля поиска в табличном представлении `new_Widget` становятся доступны значки иерархии, как показано ниже.  

> [!div class="mx-imgBorder"] 
> ![Иерархическая сетка виджета](media/widget-hierarchy-grid.png)  
  
> [!NOTE]
>  Значки иерархии не будут доступны в табличном представлении записей, пока записи связаны с использованием иерархического отношения.  
  
При нажатии значка иерархии отобразится иерархия `new_Widget` с представлением дерева в левой части и представлением плитки в правой части, отображая две записи. Каждая плитка включает четыре поля, указанные в разделе **Форма плитки иерархии мини-приложения**.  

> [!div class="mx-imgBorder"] 
> ![Дерево виджета и представления мозаик](media/widget-tree-tiles.png)  

В зависимости от потребностей организации можно выбрать либо представление дерева, в котором отображается вся иерархия, либо представление плитки, которое является более детальным представлением меньшей части иерархии. Оба представления отображаются рядом. Можно переходить по иерархии, разворачивая и сворачивая дерево иерархии. 

### <a name="see-also"></a>См. также 

[Определение и запрос иерархически связанных данных](../common-data-service/define-query-hierarchical-data.md)<br />
[Видео: Визуализация иерархии](http://www.youtube.com/watch?v=_dGBE6icLNw&index=9&list=PLC3591A8FE4ADBE07)
