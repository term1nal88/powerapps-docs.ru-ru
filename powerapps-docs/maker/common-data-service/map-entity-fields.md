---
title: Сопоставление полей сущностей в PowerApps | MicrosoftDocs
description: Научитесь сопоставить поля сущностей
ms.custom: ''
ms.date: 05/29/2018
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
  - Dynamics 365 (online)
  - Dynamics 365 Version 9.x
  - powerapps
author: Mattp123
ms.assetid: 7c5aa1c3-bde9-43f1-a369-fdcdbf14dec0
caps.latest.revision: 33
ms.author: matp
manager: kvivek
tags: null
search.audienceType:
  - maker
search.app:
  - PowerApps
  - D365CE
---
# <a name="map-entity-fields"></a>Сопоставление полей сущностей
 
Пользователь может сопоставлять атрибуты между сущностями, которые имеют отношение сущности. Это позволяет задавать значения по умолчанию для записи, созданной в контексте другой записи. 

## <a name="easier-way-to-create-new-records-in-model-driven-apps"></a>Более простой способ создания новых записей в управляемых моделью приложениях

Допустим, требуется добавить новую запись контакта для пользователя, который является сотрудником определенной организации. Это можно сделать двумя способами:  
  
### <a name="the-hard-way"></a>Сложный способ

Можно просто перейти в приложение, чтобы создать новую запись контакта с нуля. При этом необходимо задать головную организацию и ввести некоторые сведения (например, адрес и номер телефона), которые, скорее всего, такие же как у головной организации. Это может занять много времени и привести к ошибкам.  
  
### <a name="the-easier-way"></a>Более простой способ

Более простой способ состоит в том, что можно создать новую сущность организации и во вложенной сетке **Контакты** в форме выбрать **+**, чтобы добавить контакт. Сначала будет выполнен поиск существующих связанных контактов, чтобы случайно не была создана повторяющаяся запись. Если существующая запись не найдена, можно выбрать **Создать** и создать новую запись контакта. 

Форма новой записи контакта будет включать все сопоставленные значения атрибутов из организации (например сведения об адресах и номерах телефонов) в качестве значений по умолчанию. Пользователи могут изменить эти значения до сохранения записи.

## <a name="how-this-works"></a>Как это работает

При сопоставлении полей сущности для отношения сущности 1:N некоторые элементы данных из записи основной сущности будут скопированы в форму новой связанной сущности для задания значений по умолчанию, которые можно изменить перед сохранением.
 
  
> [!NOTE]
> Эти сопоставления только задают значения по умолчанию для записи перед ее сохранением. Пользователи могут изменить эти значения перед сохранением. Переносимые данные — это данные, существующие в данный момент времени. Они не синхронизируются, если исходные данные потом изменяются.
>   
> Эти сопоставления не применяются к связанным записям, созданным с помощью бизнес-процесса или процесса диалогового окна. Они не применяются автоматически к новым записям, созданным с помощью кода, хотя разработчики могут использовать специальное сообщение, называемое `InitializeFrom` ([функция InitializeFrom](/dynamics365/customer-engagement/web-api/initializefrom?view=dynamics-ce-odata-9) или [класс InitializeFromRequest](/dotnet/api/microsoft.crm.sdk.messages.initializefromrequest?view=dynamics-general-ce-9)), для создания новой записи с помощью доступных сопоставлений.  

## <a name="open-solution-explorer"></a>Откройте обозреватель решений

Единственный способ сопоставления полей сущности — использовать обозреватель решений.

[!INCLUDE [cc_navigate-solution-from-powerapps-portal](../../includes/cc_navigate-solution-from-powerapps-portal.md)]
  
Сопоставление полей выполняется в контексте отношения 1: N или N1, поэтому сначала требуется [просмотреть отношения 1:N или N:1](create-edit-1n-relationships-solution-explorer.md#view-entity-relationships).

## <a name="view-mappable-fields"></a>Просмотр сопоставляемых полей

Сопоставления полей на самом деле не определяются внутри отношений сущностей, однако они отображаются в пользовательском интерфейсе отношений. Они существуют не в каждом отношении сущностей 1:N. При просмотре списка отношений сущностей 1:N (или N:1) для сущности можно отфильтровать отображаемые отношения по типу. Можно выбрать значение **Все**, **Настраиваемые**, **Изменяемые** или **Сопоставляемые**. Сопоставляемые отношения сущностей предоставляют доступ для сопоставления полей сущности. 

![Просмотр сопоставляемых отношений сущностей](media/mappable-entity-relationships.png) 

При открытии сопоставляемого отношение сущности выберите **Сопоставления** в левой области навигации.

![Выбор сопоставлений для отношения сущностей](media/map-entity-fields-ui-solution-explorer.png)

## <a name="delete-mappings"></a>Удаление сопоставлений

При наличии сопоставлений, которые не требуется применять, можно выбрать их и щелкнуть ![Значок «Удалить»](media/delete.gif) .

## <a name="add-new-mappings"></a>Добавление новых сопоставлений

Для создания нового сопоставления щелкните **Создать** на панели инструментов. При этом открывается диалог **Создание сопоставлений полей**.

![Диалог создания сопоставлений полей](media/create-field-mapping-dialog.png)

Выберите поле одной исходной сущности и поля одной целевой сущности со значениями, которые нужно сопоставить. 

![Настройка сопоставления полей](media/configure-field-mapping.png)

Затем выберите **ОК**, чтобы закрыть диалог.

Следующие правила определяют, какие типы данных можно сопоставить.  
  
- Оба поля должны относиться к одному типу и формату.  
- Длина целевого поля должна быть равна длине исходного поля или превышать ее.  
- Целевое поле не может быть сопоставлено с другим полем.  
- Исходное поле должно отображаться в форме.  
- Целевое поле должно быть полем, в которое пользователь сможет ввести данные.  
- Сопоставление значений идентификатора адреса не допускается.
- Если сопоставление происходит с полем, не отображаемым в форме, сопоставление не будет завершено до тех пор, пока поле не будет добавлено в форму.
- Если поля представляют собой наборы параметров, целые числа для каждого параметра должны быть идентичными.  
  
> [!NOTE]
>  Если требуется сопоставить поля набора параметров, рекомендуется настроить оба поля таким образом, чтобы в них использовался одинаковый набор параметров. В противном случае будет трудно синхронизировать два отдельных набора параметров вручную. Если целочисленные значения для каждого параметра сопоставлены неправильно, это может привести к проблемам с данными. Дополнительные сведения: [Создание и изменение глобального набора параметров для Common Data Service для приложений (списки выбора)](create-edit-global-option-sets.md)  
  
## <a name="automatically-generate-field-mappings"></a>Автоматическое создание сопоставлений полей  

Можно также сформировать сопоставления автоматически, выбрав пункт **Создать сопоставление** в меню **Другие действия**.

Необходимо соблюдать осторожность при выполнении этого действия с системными сущностями. Используйте эту возможность, если при создании настраиваемых сущностей требуется использовать сопоставление. 

> [!WARNING]
> В результате все существующие сопоставления будут удалены и заменены на предложенные сопоставления, основанные только на полях со схожими именами и типами данных. Если это действие выполняется в системной сущности, можно потерять некоторые ожидаемые сопоставления. В случае настраиваемых сущностей эта возможность помогает сэкономить время, поскольку можно быстрее удалить все ненужные сопоставления и добавить другие сопоставления, не созданные в результате выполнения действия создания сопоставления.  


## <a name="publish-customizations"></a>Публикация настроек 

Поскольку сопоставления полей не являются метаданными, необходимо опубликовать их, чтобы изменения вступили в силу. 
<!-- TODO Need a general topic about publishing to link to in situations like this -->

### <a name="see-also"></a>См. также
[Создание и изменение отношений сущностей 1:N (один-ко-многим) или N:1 (многие-к-одному) с помощью обозревателя решений](create-edit-1n-relationships-solution-explorer.md)<br />
[Документация для разработчиков. Настройка сопоставлений сущностей и атрибутов](/dynamics365/customer-engagement/developer/customize-entity-attribute-mappings).<br />
[Документация для разработчиков. Веб-API создания новой сущности из другой сущности](/dynamics365/customer-engagement/developer/webapi/create-entity-web-api#create-a-new-entity-from-another-entity)
