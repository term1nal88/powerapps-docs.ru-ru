---
title: Сопоставление полей сущности в PowerApps | Документы Майкрософт
description: Сведения о сопоставлении полей сущности
ms.custom: ''
ms.date: 05/29/2018
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- powerapps
author: Mattp123
ms.assetid: 7c5aa1c3-bde9-43f1-a369-fdcdbf14dec0
caps.latest.revision: 33
ms.author: matp
manager: kvivek
tags: ''
ms.openlocfilehash: 7e84e10a824ea218063cb2dccdc15ed7ae2340da
ms.sourcegitcommit: aba996b1773ecdf62758e06b34eaf57bede29e08
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/08/2018
ms.locfileid: "39704736"
---
# <a name="map-entity-fields"></a>Сопоставление полей сущности
 
Можно сопоставлять атрибуты сущностей, которые находятся в связи друг с другом. Можно задать значения по умолчанию для записи, которая создана в контексте другой записи. 

## <a name="easier-way-to-create-new-records-in-model-driven-apps"></a>Еще проще создавать новые записи с помощью приложений на основе моделей

Предположим, требуется добавить в определенную учетную запись новую запись контакта для человека, который является сотрудником. Это можно сделать двумя способами:  
  
### <a name="the-hard-way"></a>Сложно

Можно просто перейти в приложение, чтобы создать новую запись контакта с нуля. Однако в этом случае потребуется указывать родительскую учетную запись и вводить несколько элементов информации (например, адрес и номер телефона), которые наверняка совпадают с данными родительской учетной записи. Это требует много времени и повышает вероятность ошибок.  
  
### <a name="the-easier-way"></a>Просто

Проще всего начать с сущности учетной записи и, используя вложенную сетку **Контакты** в форме, выбрать **+** для добавления контакта. Сначала пользователю будет предложено найти существующие связанные контакты, чтобы случайно не создать дублирующуюся запись. Если найти связанную запись не удастся, можно нажать **Создать** и создать новую запись контакта. 

В форме создания записи контакта вы найдете сопоставленные значения атрибутов из учетной записи (адрес и телефон) в качестве значений по умолчанию. Перед сохранением записи эти значения можно изменить.

## <a name="how-this-works"></a>Как это работает

При сопоставлении полей сущности для отношений сущностей 1:N (один ко многим) определенные элементы данных из записи основной сущности будут копированы в форму создания связанной сущности, чтобы задать значения по умолчанию, которые можно редактировать перед сохранением.
 
  
> [!NOTE]
> Эти сопоставления лишь задают значения по умолчанию для записи перед сохранением этой записи. Пользователи могут изменить эти значения перед сохранением. Переносимые данные — это данные в определенный момент времени. Если исходные данные будут впоследствии изменены, синхронизация данных не происходит.
>   
> Эти сопоставления не применяются к связанным записям, которые создаются с использованием рабочего процесса или диалоговых окон. Они не применяются автоматически к новым записям, созданным с помощью кода, хотя разработчики могут воспользоваться специальным сообщением `InitializeFrom` ([Функция InitializeFrom](/dynamics365/customer-engagement/web-api/initializefrom?view=dynamics-ce-odata-9) или [Класс InitializeFromRequest](/dotnet/api/microsoft.crm.sdk.messages.initializefromrequest?view=dynamics-general-ce-9)) для создания новой записи с помощью доступных сопоставлений.  

## <a name="open-solution-explorer"></a>Открытие обозревателя решений

Единственный способ сопоставления полей сущности — использовать обозреватель решений.

[!INCLUDE [cc_navigate-solution-from-powerapps-portal](../../includes/cc_navigate-solution-from-powerapps-portal.md)]
  
Сопоставление полей осуществляется в контексте отношений между сущностями 1:N (один ко многим) или N:1 (многие к одному), поэтому сначала необходимо [проанализировать отношения сущностей 1:N или N:1](create-edit-1n-relationships-solution-explorer.md#view-entity-relationships).

## <a name="view-mappable-fields"></a>Просмотр сопоставляемых полей

Сопоставления полей фактически не определены в отношениях сущностей, однако они представлены в пользовательском интерфейсе отношений. Они присутствуют не в каждом отношении сущностей 1:N. При просмотре списка отношений сущностей 1:N или N:1 можно фильтровать отношения по типу. Можно выбрать **Все**, **Пользовательские**, **Настраиваемые** или **Сопоставляемые**. Сопоставляемые отношения сущностей обеспечивают возможность сопоставления полей сущностей. 

![Просмотр сопоставляемых отношений сущностей](media/mappable-entity-relationships.png) 

Открыв сопоставляемые отношения сущностей, в левой области навигации выберите **Сопоставления**.

![Выберите сопоставления для отношений сущностей](media/map-entity-fields-ui-solution-explorer.png)

## <a name="delete-mappings"></a>Удаление сопоставлений

Если вы не хотите применять какие-либо сопоставления, можно выделить их и нажать значок ![Значок удаления](media/delete.gif) .

## <a name="add-new-mappings"></a>Добавление новых сопоставлений

Чтобы создать новое сопоставление, щелкните **Создать** на панели инструментов. Откроется диалоговое окно **Создание сопоставления полей**.

![Диалоговое окно "Создание сопоставления полей"](media/create-field-mapping-dialog.png)

Выберите одно поле исходной сущности и одно поле конечной сущности со значениями, которые требуется сопоставить. 

![Настройка сопоставления полей](media/configure-field-mapping.png)

Затем нажмите кнопку **ОК**, чтобы закрыть диалоговое окно.

Следующие правила дают представление о том, какие данные можно сопоставлять.  
  
- Оба поля должны иметь один и тот же тип и один и тот же формат.  
- Длина целевого поля не должна быть меньше исходного поля.  
- Целевое поле не может быть уже сопоставлено другому полю.  
- Исходное поле должно быть видно в форме.  
- Целевое поле должно представлять собой поле с возможностью ввода данных пользователем.  
- Невозможно сопоставлять значения ИД адресов.
- Если выполняется сопоставление с полем, которое не отображается в форме, сопоставление не будет выполнено до тех пор, пока поле не будет добавлено в форму.
- Если поля представляют собой наборы параметров, целочисленные значения для каждого из них должны быть идентичными.  
  
> [!NOTE]
>  Если требуется сопоставить поля набора параметров, рекомендуется настроить оба поля для использования одного и того же глобального набора опций. В противном случае может быть сложно вручную синхронизировать два разных набора параметров. Если целочисленные значения каждого параметра сопоставлены неправильно, могут возникнуть проблемы с данными. Дополнительные сведения: [Создание и изменение глобальных наборов параметров для Common Data Service для приложений (списков выбора)](create-edit-global-option-sets.md)  
  
## <a name="automatically-generate-field-mappings"></a>Автоматическое создание сопоставлений полей  

Сопоставления можно также создавать автоматически, выбирая команду **Создать сопоставления** в меню **Другие действия**.

При выполнении этой операции с системными сущностями следует проявлять осторожность. Используйте такой подход при создании пользовательских сущностей и необходимости использовать сопоставление. 

> [!WARNING]
> В результате существующие сопоставления будут удалены и заменены рекомендуемыми сопоставлениями, которые основаны исключительно на полях с одинаковыми именами и типами данных. Если использовать такой подход в работе с системной сущностью, можно потерять некоторые нужные сопоставления. Что касается пользовательских сущностей, такой подход экономит время, поскольку в этом случае легче удалить любые ненужные вам сопоставления и добавить другие, которые не были созданы в рамках процедуры создания сопоставлений.  


## <a name="publish-customizations"></a>Публикация пользовательских настроек 

Поскольку сопоставления полей не являются метаданными, их необходимо опубликовать, прежде чем изменения вступят в силу. 
<!-- TODO Need a general topic about publishing to link to in situations like this -->

### <a name="see-also"></a>См. также
[Создание и изменение отношений сущностей 1:N (один ко многим) или N:1 (многие к одному) с использованием обозревателя решений](create-edit-1n-relationships-solution-explorer.md)<br />
[Документация для разработчиков. Пользовательская настройка сопоставлений сущностей и атрибутов](/dynamics365/customer-engagement/developer/customize-entity-attribute-mappings)<br />
[Документация для разработчиков. Веб-API для создания новой сущности из другой сущности](/dynamics365/customer-engagement/developer/webapi/create-entity-web-api#create-a-new-entity-from-another-entity)
