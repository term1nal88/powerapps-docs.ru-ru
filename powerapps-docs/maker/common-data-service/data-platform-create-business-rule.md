---
title: Создание бизнес-правила в службе Common Data Service для приложений | Документация Майкрософт
description: Пошаговые инструкции по созданию бизнес-правила в службе Common Data Service (CDS) для приложений.
author: clwesene
manager: kfile
ms.service: powerapps
ms.component: cds
ms.topic: conceptual
ms.date: 03/21/2018
ms.author: clwesene
ms.openlocfilehash: 13e00081ce01b44feeea6fc1d6fff9556c020298
ms.sourcegitcommit: 68fc13fdc2c991c499ad6fe9ae1e0f8dab597139
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2018
ms.locfileid: "34168281"
---
# <a name="create-a-business-rule"></a>Создание бизнес-правила

Вы можете создавать бизнес-правила и рекомендации для применения логики и проверок без написания кода или создания подключаемых модулей.  Бизнес-правила предоставляют простой интерфейс для реализации и поддержки быстро меняющихся и часто используемых правил. 
  
Сочетая условия и действия, вы можете выполнять следующие задачи с помощью бизнес-правил:  
  
* задавать значения полей;  
* очищать значения полей;  
* задавать уровни требований для полей;  
* показывать или скрывать поля;  
* включать или отключать поля;  
* проверять данные и выводить сообщения об ошибках;  
* создавать рекомендации для бизнеса на основе бизнес-аналитики.  
  
## <a name="differences-between-canvas-and-model-driven-apps"></a>Различия между приложениями на основе холста и на основе модели

В приложениях на основе модели можно использовать все действия, доступные в бизнес-правилах. Однако в приложениях на основе холста в настоящее время доступны не все действия бизнес-правил. Следующие действия **недоступны** в приложениях на основе холста:

* показывать или скрывать поля;  
* включать или отключать поля;  
* создавать рекомендации для бизнеса на основе бизнес-аналитики.  

## <a name="prerequisites"></a>Технические условия
Для выполнения инструкций из этой статьи необходимо перейти в [среду](../canvas-apps/working-with-environments.md), в которой можно создавать и изменять сущности.

## <a name="create-a-business-rule"></a>Создание бизнес-правила
  
1. Войдите в [PowerApps](https://web.powerapps.com) и нажмите стрелку вниз рядом с полем **Данные** возле левого края окна.

2. В появившемся списке выберите пункт **Сущности**.
  
3. Откройте сущность, для которой нужно создать бизнес-правило (например, откройте сущность **Учетная запись**), а затем перейдите на вкладку **Бизнес-правила**.  

4. Нажмите кнопку **Создать**.  
  
    Откроется окно конструктора бизнес-правил с уже созданным условием. Создание каждого правила начинается с условия. Бизнес-правило совершает одно или несколько действий в зависимости от выполнения этого условия.  

    > [!TIP]
    > Чтобы изменить существующее бизнес-правило, необходимо сначала отключить его.  
  
5. Если необходимо, добавьте описание в поле описания в левом верхнем углу окна.
  
6. Задайте область согласно приведенным ниже правилам.  
  
    |||  
    |-|-|  
    |**Выбранный элемент**|**Область**|  
    |**Сущность**|Формы на основе модели и сервер|  
    |**Все формы**|Формы на основе модели|  
    |Определенная форма (например, **Учетная запись**)|Только эта форма на основе модели|  

    > [!TIP]
    > При разработке приложения на основе холста следует использовать область "Сущность".
  
7. **Добавьте условия.** Чтобы добавить к бизнес-правилу дополнительные условия, выполните указанные ниже действия.  
  
    1. Перетащите компонент **Условие** с вкладки **Компоненты** к знаку "плюс" в конструкторе.  
  
        ![Добавление условия в бизнес-правиле](./media/data-platform-cds-create-business-rule/add-condition-business-rule.png "Добавление условия в бизнес-правиле")  
  
    2. Чтобы задать свойства для условия, щелкните компонент **Условие** в окне конструктора, а затем установите свойства на вкладке **Свойства** в правой части экрана. Когда вы задаете свойства, служба Common Data Service создает выражение в нижней части вкладки **Свойства**.  
  
    3. Чтобы добавить в условие еще одно предложение (И или ИЛИ), щелкните **Создать** на вкладке **Свойства**, чтобы создать правило, а затем настройте свойства для этого правила. В поле **Логика правила** можно указать, следует ли добавить новое правила через оператор И или ИЛИ.  
  
        ![Добавление нового правила в условие](./media/data-platform-cds-create-business-rule/add-new-rule-condition.png "Добавление нового правила в условие")  
  
    4. Завершив задание свойств для условия, нажмите кнопку **Применить**.  
  
8. **Добавьте действия.** Чтобы добавить действие, выполните указанные ниже действия.  
  
    1. Перетащите один из компонентов действий с вкладки **Компоненты** к знаку "плюс" рядом с компонентом **Условие**. Перетащите действие к знаку "плюс" рядом с галочкой, если бизнес-правило должно выполнять действие при соблюдении условия, или к знаку "плюс" рядом со значком "x", если бизнес-правило должно выполнять действие при несоблюдении условия.
  
        ![Перетаскивание действия в бизнес-правило](./media/data-platform-cds-create-business-rule/drag-an-action-business-rule.png "Перетаскивание действия в бизнес-правило")  
  
    2. Чтобы задать свойства для действия, щелкните компонент **Действие** в окне конструктора, а затем установите свойства на вкладке **Свойства**.  
  
    3. Завершив задание свойств, нажмите кнопку **Применить**.  
  
9. **Добавьте рекомендацию для бизнеса. (Только на основе модели)** Чтобы добавить рекомендацию для бизнеса, выполните указанные ниже действия.  
  
    1. Перетащите компонент **Рекомендация** с вкладки **Компоненты** к знаку "плюс" рядом с компонентом **Условие**. Перетащите компонент **Рекомендация** к знаку "плюс" рядом с галочкой, если бизнес-правило должно выполнять действие при соблюдении условия, или к знаку "плюс" рядом со значком "x", если бизнес-правило должно выполнять действие при несоблюдении условия.  
  
    2. Чтобы задать свойства для рекомендации, щелкните компонент **Рекомендация** в окне конструктора, а затем установите свойства на вкладке **Свойства**.  
  
    3. Чтобы добавить действия в рекомендацию, перетащите их с вкладки **Компоненты** и задайте свойства для каждого действия на вкладке **Свойства**.  
  
        > [!NOTE]
        >  При создании рекомендации служба Common Data Service по умолчанию добавляет одно действие. Чтобы просмотреть все действия в рекомендации, щелкните **Сведения** в компоненте **Рекомендация**.  
  
    4. Завершив задание свойств, нажмите кнопку **Применить**.  
  
10. Чтобы проверить бизнес-правило, нажмите **Проверить** на панели действий.  
  
11. Чтобы сохранить бизнес-правило, нажмите **Сохранить** на панели действий.  
12. Чтобы активировать бизнес-правило, выберите его в окне обозревателя решений и нажмите **Активировать**. Активировать бизнес-правило из окна конструктора невозможно.  
  
    > [!TIP]
    >  Ниже приведено несколько советов, которые следует учитывать при работе с бизнес-правилами в окне конструктора.  
    >   
    > - Чтобы сделать снимок всего содержимого в окне бизнес-правила, нажмите **Снимок** на панели действий. Это полезно, например, если вы хотите поделиться бизнес-правилом с членами команды и получить от них комментарии.  
    > - Для быстрого перехода к различным частям процесса используйте мини-карту. Это полезно при работе со сложным процессом, который не помещается на экране полностью.  
    > - При добавлении условий, действий и рекомендаций для бизнеса в бизнес-правило служба Common Data Service создает для него код в нижней части окна конструктора. Код предназначен только для чтения.  
  
## <a name="localize-error-messages-used-in-business-rules"></a>Локализация сообщений об ошибках в бизнес-правилах  
 Если в организации используется несколько языков, необходимо локализовать настроенные сообщения об ошибках. Каждый раз, когда вы настраиваете сообщение, система формирует метку. Экспортировав переводы, можно добавить локализованные версии сообщений, а затем импортировать метки обратно в Common Data Service. Благодаря этому люди, использующие языки, отличные от базового, будут видеть переведенные сообщения.  
  