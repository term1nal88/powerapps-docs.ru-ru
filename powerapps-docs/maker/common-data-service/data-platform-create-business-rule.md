---
title: Создание бизнес-правила в Common Data Service для приложений | Microsoft Docs
description: Пошаговые инструкции по созданию бизнес-правила в Common Data Service (CDS) для приложений.
author: clwesene
manager: kfile
ms.service: powerapps
ms.component: cds
ms.topic: conceptual
ms.date: 03/21/2018
ms.author: clwesene
search.audienceType:
  - maker
search.app:
  - PowerApps
  - D365CE
---

# <a name="create-a-business-rule-for-an-entity"></a>Создание бизнес-правила для сущности

Вы можете создать бизнес-правила и рекомендации, чтобы применить логику и проверку без написания кода или создания подключаемых модулей. Бизнес-правила предоставляют простой интерфейс для реализации и поддержки быстро меняющихся, широко используемых бизнес-правил. 
  
Объединяя условия и действия, вы можете выполнять любые из следующих действий с помощью бизнес-правил:  
  
* Задание значений полей  
* Очистка значений поля  
* Задание уровней требований полей  
* Отображение или скрытие полей  
* Включение или отключение полей  
* Проверка данных и отображение сообщений об ошибке  
* Создание бизнес-рекомендаций на основе бизнес-аналитики  
  
## <a name="differences-between-canvas-and-model-driven-apps"></a>Различия между приложениями на основе холста и приложениями, управляемыми моделью

Приложения, управляемые моделью, могут использовать все действия, доступные в бизнес-правилах, тем не менее не все действия бизнес-правил доступны в приложениях на основе холста в данное время. Следующие действия **не** доступны в приложениях на основе холста:

* Отображение или скрытие полей  
* Включение или отключение полей  
* Создание бизнес-рекомендаций на основе бизнес-аналитики  

## <a name="prerequisites"></a>Необходимые условия
Для выполнения инструкций этого раздела необходимо перейти в [среду](../canvas-apps/working-with-environments.md), в которой вы можете создавать и изменять сущности.

## <a name="create-a-business-rule"></a>Создание бизнес-правила
  
1. Войдите в [PowerApps](https://web.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc), а затем щелкните или нажмите на стрелку вниз для **Данные** рядом с левым краем.

2. В открывшемся списке щелкните или нажмите **Сущности**.
  
3. Откройте сущность, для которой требуется создать бизнес-правило (например, откройте сущность **Организация**), и щелкните вкладку **Бизнес-правила**.  

4. Нажмите кнопку **Создать**.  
  
    Откроется окно конструктора бизнес-правил с одним созданным условием. Каждое правило начинается с условия. Бизнес-правило предпринимает одно или несколько действий на основании условия.  

    > [!TIP]
    > Если требуется изменить существующее бизнес-правило, необходимо деактивировать его и внести нужные изменения.  
  
5. Если требуется, добавьте описание в окне описания в левом верхнем углу окна.
  
6. Установите объем согласно следующему:  
  
    |||  
    |-|-|  
    |**Если вы выбираете этот элемент**|**Задается следующий объем**|  
    |**Сущность**|Формы, управляемые моделью, и сервер|  
    |**Все формы**|Формы, управляемые моделью|  
    |Определенная форма (например, форма **Организация**)|Только эта форма, управляемая моделью|  

    > [!TIP]
    > Если создается приложение на основе холста, необходимо использовать сущность как область.
  
7. **Добавьте условия.** Чтобы добавить дополнительные условия в бизнес-правило:  
  
    1. Перетащите компонент **Условие** с вкладки **Компоненты** на значок "плюс" в конструкторе.  
  
        ![Добавление условия в бизнес-правило](./media/data-platform-cds-create-business-rule/add-condition-business-rule.png "Добавление условия в бизнес-правило")  
  
    2. Чтобы задать свойства для условия, щелкните компонент **Условие** в окне конструктора, затем задайте свойства на вкладке **Свойства** справа экрана. По мере задания свойств Common Data Service создает выражение внизу вкладки **Свойства**.  
  
    3. Чтобы добавить дополнительный оператор (И или ИЛИ) к условию, нажмите кнопку **Создать** на вкладке **Свойства** для создания нового правила, и после этого задайте свойства для этого правила. В поле **Логика правил** вы можете определить, добавлять ли новое правило как оператор И или ИЛИ.  
  
        ![Добавление нового правила в условие](./media/data-platform-cds-create-business-rule/add-new-rule-condition.png "Добавление нового правила в условие")  
  
    4. По завершении настройки свойств для условия щелкните **Применить**.  
  
8. **Добавьте действия.** Для добавления действий:  
  
    1. Перетащите компоненты действия с вкладки **Компоненты** на значок "плюс" рядом с компонентом **Условие**. Перетащите действие на значок "плюс" рядом с флажком, если вы хотите, чтобы бизнес-правило предпринимало это действие, когда выполняется условие, или на значок "плюс" рядом с x, если вы хотите, чтобы бизнес-правило предпринимало это действие, если условие не выполняется.
  
        ![Перетаскивание действия в бизнес-правило](./media/data-platform-cds-create-business-rule/drag-an-action-business-rule.png "Перетаскивание действия в бизнес-правило")  
  
    2. Чтобы задать свойства для действия, щелкните компонент **Действие** в окне конструктора, затем задайте свойства на вкладке **Свойства**.  
  
    3. По завершении настройки свойств щелкните **Применить**.  
  
9. **Добавьте бизнес-рекомендацию. (Только под управлением модели)** Чтобы добавить бизнес-рекомендацию:  
  
    1. Перетащите компонент **Рекомендация** с вкладки **Компоненты** на значок "плюс" рядом с компонентом **Условие**. Перетащите компонент **Рекомендация** на значок "плюс" рядом с флажком, если вы хотите, чтобы бизнес-правило предпринимало это действие, когда выполняется условие, или на значок "плюс" рядом с x, если вы хотите, чтобы бизнес-правило предпринимало это действие, если условие не выполняется.  
  
    2. Чтобы задать свойства для рекомендации, щелкните компонент **Рекомендация** в окне конструктора, затем задайте свойства на вкладке **Свойства**.  
  
    3. Чтобы добавить дополнительные действия к рекомендации, перетащите их с вкладки **Компоненты**, затем задайте свойства для каждого действия на вкладке **Свойства**.  
  
        > [!NOTE]
        >  При создании рекомендации Common Data Service добавляет одно действие по умолчанию. Чтобы просмотреть все действия в рекомендации, щелкните **Сведения** в компоненте **Рекомендация**.  
  
    4. По завершении настройки свойств щелкните **Применить**.  
  
10. Для проверки бизнес-правила щелкните **Проверить** в области действий.  
  
11. Для сохранения бизнес-правила щелкните **Сохранить** в области действий.  
12. Чтобы активировать бизнес-правило, выберите его в окне обозревателя решений и нажмите кнопку **Активировать**. Невозможно активировать бизнес-правило в окне конструктора.  
  
    > [!TIP]
    >  Вот несколько советов, которые необходимо учитывать при работе с бизнес-правилами в окне конструктора:  
    >   
    > - Чтобы сделать снимок всех элементов в окне бизнес-правила, нажмите **Снимок** в области действий. Это полезно, например, если вы хотите поделиться бизнес-правилом и получить комментарии о нем от участников рабочей группы.  
    > - Используйте миникарту для быстрого перехода к различным частям процесса. Это полезно, когда вы имеете сложный процесс, который не помещается на экране.  
    > - По мере добавления условий, действий и бизнес-рекомендаций в бизнес-правило Common Data Service создает код для бизнес-правила внизу окна конструктора. Этот код доступен только для чтения.  
  
## <a name="localize-error-messages-used-in-business-rules"></a>Локализация сообщений об ошибках, используемых в бизнес-правилах  
 При наличии нескольких языков, предоставляемых для организации, потребуется локализовать настроенные сообщения об ошибке. Всякий раз при настройке сообщения система создает метку. При экспорте переводов в организации можно добавить локализованные версии сообщения, а затем импортировать эти метки обратно в Common Data Service, чтобы пользователи, работающие с языками отличными от базового, могли просматривать переведенные сообщения.  
  
