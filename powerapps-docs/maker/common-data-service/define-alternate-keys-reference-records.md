---
title: Определение альтернативных ключей для ссылки на записи с Common Data Service для приложений | MicrosoftDocs
description: 'Узнайте, как определить альтернативные ключи, которые можно использовать для ссылки на записи в Common Data Service для приложений'
ms.custom: ''
ms.date: 06/06/2018
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
  - Dynamics 365 (online)
  - Dynamics 365 Version 9.x
  - powerapps
author: Mattp123
ms.assetid: 29e53691-0b18-4fde-a1d0-7490aa227898
caps.latest.revision: 10
ms.author: matp
manager: kvivek
search.audienceType:
  - maker
search.app:
  - PowerApps
  - D365CE
---
# <a name="define-alternate-keys-to-reference-records"></a>Определение альтернативных ключей для ссылки на записи

*Альтернативные ключи* обеспечивают эффективную и точную интеграцию данных с внешними системами. Это важно в случаях, когда внешняя система не хранит глобальные уникальные идентификаторы (GUID), которые уникально определяют записи в Common Data Service для приложений. 

Система интеграции данных будут использоваться альтернативные ключи для уникальной идентификации записей с использованием одного или нескольких значений поля сущности, которые представляют уникальное сочетание. Каждый альтернативный ключ имеет уникальное имя. 

Например, чтобы идентифицировать запись организации с помощью альтернативного ключа, можно использовать номер организации или поле кода организации в сочетании с некоторыми другими полями, имеющие значения, которые не должны изменяться.

> [!NOTE]
> Хотя альтернативные ключи можно определять с помощью PowerApps, использовать их можно только программным образом в коде. Дополнительные сведения о возможности программного использования альтернативных ключей см. в разделах:   
> - [Документация разработчика. Использование альтернативного ключа для создания записи](/dynamics365/customer-engagement/developer/use-alternate-key-create-record) 
> - [Документация разработчика. Извлечение записи с помощью веб-API с использованием альтернативного ключа](/dynamics365/customer-engagement/developer/webapi/retrieve-entity-using-web-api#retrieve-using-an-alternate-key)

Некоторые из преимуществ, обеспечиваемых альтернативными ключами:  
  
- Более быстрый поиск записей.  
- Более надежные массовые операции с данными.  
- Упрощенное программирование при импорте из внешних систем данных без идентификаторов записей.  
  

## <a name="creating-an-alternate-key"></a>Создание альтернативного ключа

Имеется два конструктора, которые можно использовать для создания альтернативных ключей:

|Дизайнер| Описание|
|--|--|
|[Портал PowerApps](https://web.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc)|Обеспечивает простое модернизированное взаимодействие, но некоторые параметры недоступны.<br />Дополнительные сведения: [Определение альтернативных ключей с помощью портала PowerApps](define-alternate-keys-portal.md)|
|Обозреватель решений|Не так прост, но предоставляет больше гибкости для менее распространенных требований.<br />Дополнительные сведения: [Определение альтернативных ключей с помощью обозревателя решений](define-alternate-keys-solution-explorer.md) |

> [!NOTE]
> Можно также создать альтернативный ключ в вашей среде с помощью следующих действий.
> - Импорт решения, которое содержит определение альтернативного ключа.
> - Также разработчики могут написать код для создания их. Дополнительные сведения: [Документация разработчика. Определение альтернативных ключей для сущности](/dynamics365/customer-engagement/developer/define-alternate-keys-entity).

Информация в этом разделе поможет вам выбрать конструктор для использования. 

Нужно использовать [портал PowerApps](https://web.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc) для создания альтернативных ключей, если только вам не нужно выполнить любое из следующих требований:

- Создать альтернативный ключ в решении, отличном от решения по умолчанию Common Data Service для приложений
- Требуется легко отслеживать созданное системное задание, отслеживающее ход создания индексов поддержки


## <a name="limits-in-creating-alternate-keys"></a>Ограничения в создании альтернативных ключей

Имеются ограничения при создании альтернативного ключа.

### <a name="fields-that-can-be-used-for-alternate-keys"></a>Поля, которые можно использовать для альтернативных ключей

Только эти типы полей можно использовать для создания альтернативных ключей:
 - Десятичное число
 - Целое число (Integer)
 - Одна строка текста (String)

### <a name="number-of-keys"></a>Количество ключей

Для сущности можно определить до пяти различных ключей.
 
### <a name="valid-key-size"></a>Допустимый размер ключа

Когда ключ создан, система проверяет, что ключ может поддерживаться платформой, включая то, что полный размер ключа не нарушает ограничения индекса на основе SQL, такие как 900 байт на ключ и 16 столбцов на ключ. Если размер ключа не соответствует этим ограничениям, появляется сообщение об ошибке.

### <a name="unicode-characters-in-key-value"></a>Знаки юникода в значении ключа

Если данные в поле, которое используется в альтернативном ключе, будут содержать один из символов `<`,`>`,`*`,`%`,`&`,`:`,`\\`, действие исправления или upsert не будет работать. 

Если вам нужна только уникальность, то этот способ будет работать, но если необходимо использовать эти ключи как часть интеграции данных, то рекомендуется создать ключ на основе полей, которые не будут содержать эти знаки.

## <a name="track-the-status-of-the-creation-of-the-alternate-key"></a>Отслеживание состояния создания альтернативного ключа

Когда альтернативный ключ создан, это инициирует системное задание по созданию индексов в таблицах базы данных для создания принудительных уникальных ограничений на поля, используемые альтернативным ключом. Альтернативный ключ не будет действовать, пока эти индексы не будут созданы. Создание этих индексов может потребовать некоторое время в зависимости от объема данных в системе. 

Состояние выполнения системного задания определяет состояние альтернативного ключа. Ключ альтернативный может иметь следующие состояния:
- **Не завершено**
- **Выполняется**
- **Активно**
- **Неудачно**

Когда системное задание завершено, состояние альтернативного ключа **Активно** и он доступен для использования.

В случае ошибки системного задания найдите это системное задание, чтобы просмотреть все ошибки. Системное задание будет иметь имя, соответствующее следующей схеме: `Create index for {0} for entity {1}`, где `0` — это **Отображаемое имя** альтернативного ключа, а `1` — это имя сущности.


> [!NOTE]
> Если требуется контролировать состояние системного задания, необходимо использовать обозреватель решений для создания индекса. Он также будет содержать ссылку на системное задание, поэтому можно отслеживать его. Дополнительные сведения: [(Необязательно) Просмотр системного задания, отслеживающего создание индексов](define-alternate-keys-solution-explorer.md#optional-view-the-system-job-tracking-creation-of-indexes)
  
  
### <a name="see-also"></a>См. также  

[Определение альтернативных ключей с помощью портала PowerApps](define-alternate-keys-portal.md)<br />
[Определение альтернативных ключей с помощью обозревателя решений](define-alternate-keys-solution-explorer.md)<br />
[Документация для разработчиков. Определение альтернативных ключей для сущности](/dynamics365/customer-engagement/developer/define-alternate-keys-entity).<br />
[Документация разработчика. Использование альтернативного ключа для создания записи](/dynamics365/customer-engagement/developer/use-alternate-key-create-record)
