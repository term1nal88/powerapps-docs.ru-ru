---
title: Использование сегментированных решений и исправлений для более простого обновлений решений с PowerApps | MicrosoftDocs
description: Научитесь использовать сегментацию решений для обновления своих решений
ms.custom: ''
ms.date: 06/18/2018
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
  - Dynamics 365 (online)
  - Dynamics 365 Version 9.x
  - powerapps
author: Mattp123
ms.assetid: 5c05f683-e1bd-4885-be23-b6973128773f
caps.latest.revision: 15
ms.author: matp
manager: kvivek
search.audienceType:
  - maker
search.app:
  - PowerApps
  - D365CE
---
# <a name="use-segmented-solutions-and-patches-to-export-selected-entity-assets"></a>Использование сегментированных решений и исправлений для экспорта выбранных активов сущности

Для получения возможности точнее контролировать, что именно распространяется в виде решений и исправлений к решениям, рекомендуется использовать сегментацию решений. Сегментация решений позволяет экспортировать решения с выбранными компонентами сущностей — например, полями, формами или представлениями сущностей — а не целыми сущностями со всеми компонентами. Для создания сегментированных решений и исправлений можно использовать пользовательский интерфейс решений без написания программного кода.  
  
 Помимо получения большего контроля над составом решения, вы сможете отслеживать управлять тем, что попадает в исправления. Вы можете создать исправление для родительского решения и экспортировать его в качестве дополнительного обновления базового решения. При клонировании решения система добавляет все связанные исправления в базовое решение и создает новую версию.  
  
 При работе с исправлениями и клонированными решениями следует помнить следующее:  
  
-   исправление представляет собой дифференциальное дополнительное обновление родительского решения; исправление может добавлять или обновлять компоненты или активы в родительском решении при установке на целевой системе, но оно не может удалить никакие компоненты или активы из родительского решения;  
  
-   исправление может иметь только одно родительское решение, но родительское решение может иметь одно или несколько исправлений;  
  
-   исправление создается для неуправляемого решения; невозможно создать исправление для управляемого решения;  
  
-   при экспорте исправление в целевую систему необходимо экспортировать его как управляемое исправление; не используйте неуправляемые исправления в производственных средах;  
  
-   родительское решение должно присутствовать в целевой системе, чтобы можно было установить исправление;  
  
-   исправление можно удалить или обновить;  
  
-   при удалении родительского решения все дочерние исправления также удаляются; Система дает предупреждение, что операцию удаления невозможно отменить. Удаление выполняется в одной транзакции. если одно из исправлений родительского решения не удается удалить, вся транзакция откатывается;  
  
-   после создания первого исправления для родительского решения, решение становится заблокированным и в него нельзя вносить какие-либо изменения или экспортировать его. Однако при удалении всех его дочерних исправлений родительское решение разблокируется.  
  
-   При клонировании базового решения все дочерние исправления добавляются в базовое решение и создается новая версия. Можно добавить, изменить или удалить компоненты и активы в клонированном решение;  
  
-   клонированное решение представляет собой замену базового решения, когда оно установлено в целевой системе как управляемое решение. Обычно клонированное решение используется для распространения основных обновлений предшествующему решению.  
  
## <a name="understanding-version-numbers-for-cloned-solutions-and-patches"></a>Схема номеров версий для клонированных решений и исправлений  
 Версия решения имеет следующий формат номера: основная.дополнительная.сборка.редакция. Исправление должны быть более высокий номер сборки или редакции, чем родительское решение. Оно не может иметь более высокий номер основной или дополнительной версии. Например, если базовое решение имеет версию 3.1.5.7, исправление может иметь версию 3.1.5.8 или 3.1.7.0, но не 3.2.0.0. Клонированное решение должно иметь номер версии больше или равный номеру версии базового решения. Например, если базовое решение имеет версию 3.1.5.7, клонированное решение может иметь версию 3.2.0.0 или 3.1.5.7. В пользовательском интерфейсе можно задавать только основной и дополнительный номера версий клонированного решения и значения сборки и редакции исправлений.  
  
## <a name="create-a-segmented-solution-with-the-entity-assets-you-want"></a>Создание сегментированного решения с требуемыми активами сущностей  
 Чтобы создать сегментированное решение, начните с созданием неуправляемого решения и добавления существующих ресурсов. Можно добавить несколько системных или настраиваемых сущностей, а для каждой сущности выбрать активы, которые требуется включить в решение. Похожая на мастер процедура настройки позволяет по шагам выполнить процесс добавления активов сущностей.  
  
1. Перейдите в раздел **[Параметры](../model-driven-apps/advanced-navigation.md#settings)** > **Решения**.   
  
2.  Выберите **Создать** и создайте решение. Заполните необходимые поля. Выберите **Сохранить и закрыть**.  
  
3.  Откройте только что созданное решение. В раскрывающемся списке **Добавить существующий** выберите **Сущность**.  
  
4.  В диалоговом окне **Выберите компоненты решения** выберите одну или несколько сущностей, которые требуется добавить в решение. Нажмите **ОК**.  
  
5.  Откроется мастер. Следуйте указаниям мастера для добавления в решение активов для каждой выбранной сущности.  
  
6.  Выберите **Опубликовать**, чтобы изменения вступили в силу.  
  
 Следующие иллюстрации содержат примеры создания сегментированного решения путем выбора активов сущностей `Account`, `Case` и `Contact`.  
  
 Начните с выбора компонента **Сущность**.  
  
 ![Добавьте существующие ресурсы.](media/solution-segmentation-add-existing-resources-admin.png "Добавьте существующие ресурсы.")  
  
 Затем выберите компоненты решения.  
  
 ![Выберите компоненты решения.](media/solution-segmentation-select-components-admin.png "Выберите компоненты решения.")  
  
 Следуйте указаниям мастера. В шаге 1 выберите активы (упорядочены по алфавиту) для первой сущности — `Account`, как показано ниже.  
  
 ![Запустите мастера.](media/solution-segmentation-wizard-starts-admin.png "Запустите мастера.")  
  
 Откройте вкладку **Поля** и выберите поле **Код организации**.  
  
 ![Выберите активы сущности "Организация".](media/solution-segmentation-select-account-assets-admin.png "Выберите активы сущности \"Организация\".")  
  
 В шаге 2 для сущности **Обращение** добавьте все активы.  
  
 ![Выберите активы сущности "Обращение".](media/solution-segmentation-select-case-assets-admin.png "Выберите активы сущности \"Обращение\".")  
  
 В шаге 3 добавьте поле **Годовщина** для сущности **Контакт**.  
  
 ![Выберите активы сущности "Контакт".](media/solution-segmentation-select-contact-assets-admin.png "Выберите активы сущности \"Контакт\".")  
  
 В результате созданное сегментированное решение содержит три сущности — `Account`, `Case` и `Contact`. Каждая сущность содержит только те активы, которые были выбраны.  
  
 ![Решение с сущностями.](media/solution-segmentation-solution-entities-admin.png "Решение с сущностями.")  
  
## <a name="create-a-solution-patch"></a>Создание исправления решения  
 Исправление содержит изменения родительского решения, например добавление или изменение активов и компонентов. Не следует включать компоненты родительского решения, если вы не планируете изменять их.  
  
 #### <a name="create-a-patch-for-an-unmanaged-solution"></a>Создание исправления для неуправляемого решения  
  
1. Перейдите в раздел **[Параметры](../model-driven-apps/advanced-navigation.md#settings)** > **Решения**.   
  
2.  В списке выберите неуправляемое решение для создания для исправления. Выберите **Клонировать исправление**. Открывшееся диалоговое окно содержит имя базового решения и номер версии исправления. Нажмите кнопку **Сохранить**.  
  
3.  В таблице, найдите и откройте только что созданное исправление. Как и в случае базового решения, следуйте указаниям мастера для добавления нужных компонентов и активов.  
  
4.  Выберите **Опубликовать**, чтобы изменения вступили в силу.  
  
 Ниже приведен пример создания исправления для существующего решения. Для начала выберите **Клонировать исправление** (в компактном представлении значок **Клонировать исправление** содержит два небольших прямоугольника, как показано ниже).  
  
 ![Значок клонирования исправления.](media/solution-segmentation-click-patch-icon-admin.png "Значок клонирования исправления.")  
  
 В диалоговом окне **Клонировать в исправление** видно, что номер версии для исправления основан на номере версии родительского решения, а номер сборки увеличен на единицу. Каждое последующее исправление имеет более высокий номер сборки или редакции по сравнению с предыдущим исправлением.  
  
 ![Используйте диалоговое окно "Клонировать в исправление".](media/solution-segmentation-clone-patch-dialog-admin.png "Используйте диалоговое окно \"Клонировать в исправление\".")  
  
 Следующий скриншот показывает базовое решение **SegmentedSolutionExample**, версия **1.0.1.0** и исправление **SegmentedSolutionExample_Patch**, версия **1.0.2.0**.  
  
 ![Сетка с решениями и исправлениями.](media/solution-segmentation-solution-patch-grid-admin.png "Сетка с решениями и исправлениями.")  
  
 В исправление мы добавили новую настраиваемую сущность `Book`и включили все активы сущности `Book` в это исправление.  
  
 ![Добавьте настраиваемую сущность в исправление.](media/solution-segmentation-add-book-patch-admin.png "Добавьте настраиваемую сущность в исправление.")  
  
## <a name="clone-a-solution"></a>Клонирование решения  
 При клонировании неуправляемого решения все относящиеся к нему исправления добавляются в новую версию исходного решения.  
  
1. Перейдите в раздел **[Параметры](../model-driven-apps/advanced-navigation.md#settings)** > **Решения**.   
  
2.  В списке выберите неуправляемое решение, которое нужно клонировать. Выберите **Клонировать решение**. Открывшееся диалоговое окно содержит имя базового решения и новый номер версии. Нажмите кнопку **Сохранить**.  
  
3.  Выберите **Опубликовать**, чтобы изменения вступили в силу.  
  
 В продолжении примера вы видите диалоговое окно **Клонировать в решение**, которое содержит новый номер версии решения.  
  
 ![Используйте диалоговое окно "Клонировать в решение".](media/solution-segmentation-clone-solution-dialog-admin.png "Используйте диалоговое окно \"Клонировать в решение\".")  
  
 После клонирования новая версия решения содержит 3 первоначальных сущности (`Account`, `Case` и `Contact`) и настраиваемую сущность `Book`, добавленную в исправлении. Каждая сущность содержит только те активы, которые были добавлены в примере.  
  
 ![Клонированное решение со свернутым исправлением.](media/solution-segmentation-solution-rolled-up-patch-admin.png "Клонированное решение со свернутым исправлением.")  
  
## <a name="next-steps"></a>Дальнейшие действия  
 [Обзор решений](solutions-overview.md) [Создание исправлений для упрощения обновления решений]

