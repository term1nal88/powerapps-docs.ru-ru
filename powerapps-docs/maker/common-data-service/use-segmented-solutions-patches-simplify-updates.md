---
title: Использование сегментированных решений и исправлений для упрощения обновления решений с помощью PowerApps | Документация Майкрософт
description: Сведения о сегментированных решениях, используемых для обновления решений
ms.custom: ''
ms.date: 06/18/2018
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- powerapps
author: Mattp123
ms.assetid: 5c05f683-e1bd-4885-be23-b6973128773f
caps.latest.revision: 15
ms.author: matp
manager: kvivek
ms.openlocfilehash: 274e2914d65b6bcb644821c044adb3b0246a75fc
ms.sourcegitcommit: aba996b1773ecdf62758e06b34eaf57bede29e08
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/08/2018
ms.locfileid: "39701792"
---
# <a name="use-segmented-solutions-and-patches-to-export-selected-entity-assets"></a>Сегментированные решения и исправления используются для экспорта выбранных ресурсов сущности

Чтобы усилить контроль над тем, что именно распространяется в решениях и исправлениях, используйте сегментацию решений. С помощью сегментации решений можно экспортировать такие выбранные ресурсы, как поля, формы и представления сущности, вместо всей сущности с ее содержимым. Чтобы создать сегментированные решения и исправления, используйте пользовательский интерфейс решений. При этом написание кода не требуется.  
  
 В дополнение к полученному контролю над решениями вы также сможете контролировать содержимое исправления. Также можно создавать исправления для родительского решения и экспортировать его в базовое решение как дополнительное обновление. При клонировании решения система выполняет сведение всех связанных исправлений в базовом решении и создает его новую версию.  
  
 Работая с исправлениями и клонированными решениями, необходимо помнить о следующем.  
  
-   Исправление представляет собой дополнительное обновление к родительскому решению. После установки на целевую систему исправления можно использовать для добавления или обновления компонентов и сущностей в родительском решении. При этом удаление любых компонентов и сущностей из родительского решения невозможно.  
  
-   Исправление может принадлежать только одному родительскому решению, но в родительское решение может входить несколько исправлений.  
  
-   Исправление создается для неуправляемого решения. Исправление невозможно создать для управляемого решения.  
  
-   При экспорте исправления в целевую систему его следует экспортировать как управляемое исправление. Использование неуправляемых исправлений в рабочей среде запрещено.  
  
-   Чтобы установить исправление, родительское решение должно быть представлено в целевой системе.  
  
-   Исправление можно обновить или удалить.  
  
-   При удалении родительского решения дочерние исправления также будут удалены. Система выдаст сообщение, содержащее предупреждение, что операцию удаления невозможно отменить. Операция удаления выполняется в рамках отдельной транзакции. Если одно из исправлений или родительских решений удалить не удастся, операция удаления будет отменена.  
  
-   После создания первого исправления родительское решение становится заблокированным, что делает его невосприимчивым к экспорту или изменениям. Но если удалить все дочерние исправления, состояние родительского решения изменится на разблокированное.  
  
-   В процессе клонирования решения все дочерние исправления будут сведены в базовом решении, версия которого изменится. В клонированном решении можно добавлять, изменять или удалять ресурсы.  
  
-   Клонированное решение представляет собой замену базового решения, если оно устанавливается на целевую систему в качестве управляемого решения. Как правило, клонированное решение используется для доставки значительных обновлений к предыдущему решению.  
  
## <a name="understanding-version-numbers-for-cloned-solutions-and-patches"></a>Основные сведения о номерах версий клонированных решений и исправлений  
 Версия решения представлена в следующем формате: major.minor.build.revision. Номер построения или редакции исправления должен быть выше, чем у родительского решения. Номер исправления не может быть ниже основного или дополнительного номера версии. Например, для базового решения версии 3.1.5.7 можно использовать исправление версии 3.1.5.8 или 3.1.7.0, но не 3.2.0.0. Номер версии клонированного решения должен быть выше или равен номеру версии базового решения. Например, для базового решения версии 3.1.5.7 версия клонированного решения может быть 3.2.0.0 или 3.1.5.7. В пользовательском интерфейсе можно установить значения для дополнительной и основной версии, а также значения построения или редакции для исправления.  
  
## <a name="create-a-segmented-solution-with-the-entity-assets-you-want"></a>Создание сегментированного решения с помощью выбранных ресурсов сущности  
 Чтобы создать сегментированное решение, сначала необходимо создать неуправляемое решение и добавить в него существующие ресурсы. Можно добавить несколько системных или настраиваемых сущностей, а для каждой из них выбрать ресурсы, которые необходимо включить в решение. Установка, схожая с работой мастера, позволяет пошагово выполнить процесс добавления ресурсов сущности.  
  
1. Выберите **[Параметры](../model-driven-apps/advanced-navigation.md#settings)** > **Решения**.   
  
2.  Выберите **Создать** и создайте решение. Заполните необходимые поля. Выберите **Сохранить и закрыть**.  
  
3.  Откройте созданное решение. Из раскрывающегося списка **Добавить существующий** выберите **Сущность**.  
  
4.  В диалоговом окне **Select solution components** (Выбор компонентов решения) выберите одну или несколько сущностей, которые требуется добавить в решение. Выберите **ОК**.  
  
5.  Откроется окно мастера. Чтобы добавить ресурсы для каждой выбранной сущности, следуйте подсказкам мастера.  
  
6.  Чтобы изменения вступили в силу, выберите **Опубликовать**.  
  
 На следующих рисунках приведен пример создания сегментированного решения путем выбора ресурсов сущности из сущностей `Account`, `Case` и `Contact`.  
  
 Сначала необходимо выбрать компонент **Сущность**.  
  
 ![Добавление существующих ресурсов.](media/solution-segmentation-add-existing-resources-admin.png "Добавление существующих ресурсов.")  
  
 Затем выберите компоненты решения.  
  
 ![Выбор компонентов решения.](media/solution-segmentation-select-components-admin.png "Выбор компонентов решения.")  
  
 Следуйте подсказкам мастера. На первом шаге, где все приведено в алфавитном порядке, выберите ресурсы для первой сущности (`Account`), как показано ниже.  
  
 ![Запуск мастера.](media/solution-segmentation-wizard-starts-admin.png "Запуск мастера.")  
  
 Откройте вкладку **Поля** и выберите поле **Номер счета**.  
  
 ![Выбор ресурса сущности Account.](media/solution-segmentation-select-account-assets-admin.png "Выбор ресурса сущности Account.")  
  
 На втором шаге добавьте все ресурсы в сущность **Case**.  
  
 ![Выбор ресурсов сущности Case.](media/solution-segmentation-select-case-assets-admin.png "Выбор ресурсов сущности Case.")  
  
 На третьем шаге добавьте поле **Anniversary** в сущность **Contact**.  
  
 ![Выбор ресурсов сущности Contact.](media/solution-segmentation-select-contact-assets-admin.png "Выбор ресурсов сущности Contact.")  
  
 В результате созданное сегментированное решение содержит три сущности: `Account`, `Case` и `Contact`. Каждая сущность содержит только те ресурсы, которые были выбраны.  
  
 ![Решение с сущностями.](media/solution-segmentation-solution-entities-admin.png "Решение с сущностями.")  
  
## <a name="create-a-solution-patch"></a>Создание исправления решения  
 В исправлении содержатся такие изменения родительского решения, как добавление или изменение компонентов и сущностей. Нет необходимости включать родительские компоненты, если только не планируется их изменять.  
  
 #### <a name="create-a-patch-for-an-unmanaged-solution"></a>Создание исправления для неуправляемого решения  
  
1. Выберите **[Параметры](../model-driven-apps/advanced-navigation.md#settings)** > **Решения**.   
  
2.  В списке необходимо выбрать неуправляемое решение, для которого требуется создать исправление. Выберите **Клонировать исправление**. Откроется диалоговое окно, содержащее имя базового решения и номер версии исправления. Щелкните **Сохранить**.  
  
3.  Найдите и откройте созданное исправление в сетке. Чтобы добавить выбранные компоненты и ресурсы, следуйте подсказкам мастера (так же, как и для базового решения).  
  
4.  Чтобы изменения вступили в силу, выберите **Опубликовать**.  
  
 Пример создания исправления для существующего решения приведен на следующих изображениях. Сначала щелкните значок **Клонировать исправление** (в сжатом представлении значок **Клонировать исправление** выглядит как два маленьких квадрата, как показано далее).  
  
 ![Значок клонирования исправления.](media/solution-segmentation-click-patch-icon-admin.png "Значок клонирования исправления.")  
  
 В диалоговом окне **Clone To Patch** (Клонировать в исправление) появится номер версии исправления, основанный на номере версии родительского решения, но номер версии построения увеличен на единицу. Каждое последующее исправление обладает более высоким номером построения или редакции, нежели предыдущее.  
  
 ![Работа в диалоговом окне "Клонировать в исправление".](media/solution-segmentation-clone-patch-dialog-admin.png "Работа в диалоговом окне \"Клонировать в исправление\".")  
  
 На приведенном далее снимке экрана показано базовое решение **SegmentedSolutionExample** версии **1.0.1.0** и исправление **SegmentedSolutionExample_Patch** версии **1.0.2.0**.  
  
 ![Сетка с решениями и исправлениями.](media/solution-segmentation-solution-patch-grid-admin.png "Сетка с решениями и исправлениями.")  
  
 В исправление была добавлена сущность под названием `Book`, которая включает все ресурсы сущности `Book` из предыдущего исправления.  
  
 ![Добавление настраиваемой сущности в исправление.](media/solution-segmentation-add-book-patch-admin.png "Добавление настраиваемой сущности в исправление.")  
  
## <a name="clone-a-solution"></a>Клонирование решения  
 В процессе клонирования неуправляемого решения все связанные с ним исправления сводятся к созданной версии исходного решения.  
  
1. Выберите **[Параметры](../model-driven-apps/advanced-navigation.md#settings)** > **Решения**.   
  
2.  Из списка выберите необходимое неуправляемое решение для клонирования. Выберите **Клонировать решение**. Появившееся диалоговое окно содержит имя базового решения и номер новой версии. Щелкните **Сохранить**.  
  
3.  Чтобы изменения вступили в силу, выберите **Опубликовать**.  
  
 Продолжая работу с примером, вы увидите диалоговое окно **Clone to Solution** (Клонировать в решение), содержащее номер версии нового решения.  
  
 ![Работа в диалоговом окне "Клонировать в решение".](media/solution-segmentation-clone-solution-dialog-admin.png "Работа в диалоговом окне \"Клонировать в решение\".")  
  
 После клонирования новая версия решения будет содержать три исходные сущности (`Account`, `Case` и `Contact`) и настраиваемую сущность `Book`, которая была добавлена в исправление. Каждая сущность содержит только те ресурсы, которые были добавлены в примере.  
  
 ![Клонированное решение со сведенным исправлением.](media/solution-segmentation-solution-rolled-up-patch-admin.png "Клонированное решение со сведенным исправлением.")  
  
## <a name="next-steps"></a>Дальнейшие действия  
 [Обзор решений](solutions-overview.md) [Create patches to simplify solution updates (Создание исправлений для упрощения процесса обновления решений)]

