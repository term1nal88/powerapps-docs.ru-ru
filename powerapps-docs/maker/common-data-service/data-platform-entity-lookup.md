---
title: Создание отношения между сущностями с помощью поля подстановки | Microsoft Docs
description: Пошаговые инструкции по созданию отношения между сущностями в PowerApps с помощью поля подстановки.
author: clwesene
manager: kfile
ms.service: powerapps
ms.component: cds
ms.topic: conceptual
ms.date: 03/21/2018
ms.author: clwesene
search.audienceType:
  - maker
search.app:
  - PowerApps
  - D365CE
---

# <a name="create-a-relationship-between-entities"></a>Создание отношения между сущностями
Данные в одной сущности часто связаны с данными в другой сущности. Например, может иметься сущность **Преподаватели** и сущность **Класс**,и сущность **Класс** может иметь отношение подстановки с сущностью **Преподаватели** для отображения того, какой преподаватель преподает в этом классе. Можно использовать поле подстановки для отображения данных из сущности **Преподаватели**. Обычно это называется полем подстановки.

## <a name="define-a-relationship"></a>Определение отношения
Можно создать несколько типов отношений одной сущности с другой (или между сущностью и ей самой). Каждая сущность может иметь отношение с несколькими сущностями, и каждая сущность может иметь несколько отношений с другой сущностью. Некоторые распространенные типы отношений:

* **Многие к одному** — в этом типе отношений каждая запись в сущности A может соответствовать нескольким записям в сущности B, но каждая запись в сущности B может соответствовать только одной записи в сущности A. Например, класс имеет одну классную комнату. Это самый распространенный тип отношения, и он отображается в списке полей как **Поле подстановки**
* **Один ко многим** — в этом типе отношений каждая запись в сущности B может соответствовать нескольким записям в сущности A, но каждая запись в сущности A может соответствовать только одной записи в сущности B. Например, один преподаватель может преподавать в нескольких классах.
* **Многие ко многим** — в этом типе отношений каждой записи в сущности A может соответствовать несколько записей в сущности B и наоборот. Например, учащиеся посещают много классов, и в каждом классе имеется несколько учащихся.

## <a name="add-a-lookup-field-many-to-one-relationship"></a>Добавление поля подстановки (отношение "многие-к-одному")

Для добавления отношения подстановки в сущность создайте отношение на вкладке **Отношения** и укажите сущность, с которой требуется создать отношение.

1. На сайте [powerapps.com](https://web.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc) разверните раздел **Данные** и щелкните или нажмите **Сущности** на левой панели навигации.

    ![Сведения о сущности](./media/data-platform-cds-create-entity/entitylist.png "Список сущностей")

2. Щелкните или нажмите существующую сущность или [Создайте новую сущность](data-platform-create-entity.md)

3. Щелкните **Отношения**

4. Щелкните **Добавить отношение**, при этом открывается новая панель, в которой можно выбрать сущность, с которой требуется создать отношение. Выберите сущность в раскрывающемся списке **Связанная сущность**.

    > [!div class="mx-imgBorder"] 
    > ![Отношение "многие к одному"](./media/data-platform-cds-newrelationship/manytoone-1.png "Отношение \"многие к одному\"")

5. После выбора сущности поля подстановки будут отображаться в основной сущности с именем по умолчанию, совпадающим с именем сущности (в данном примере это аудитория), однако их можно изменить при необходимости.

    ![Отношение "многие к одному"](./media/data-platform-cds-newrelationship/manytoone-2.png "Отношение \"многие к одному\"")

6. Щелкните **Готово** для добавления отношения к сущности, затем щелкните **Сохранить сущность**.

    > [!div class="mx-imgBorder"] 
    > ![Отношение "многие к одному"](./media/data-platform-cds-newrelationship/manytoone-3.png "Отношение \"многие к одному\"")

## <a name="add-a-one-to-many-relationship"></a>Добавление отношения "один-ко-многим"

Для добавления отношения "один-ко-многим" создайте отношение на вкладке **Отношения** и укажите сущность, с которой требуется создать отношение.

1. На сайте [powerapps.com](https://web.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc) разверните раздел **Данные** и щелкните или нажмите **Сущности** на левой панели навигации.

    ![Сведения о сущности](./media/data-platform-cds-create-entity/entitylist.png "Список сущностей")

2. Щелкните или нажмите существующую сущность или [Создайте новую сущность](data-platform-create-entity.md)

3. Щелкните **Отношения**

4. Нажмите на стрелку вниз справа от **Добавить отношение**, это позволит выбирать оба типа отношений. Щелкните **Один-ко-многим**, при этом открывается новая панель, в которой можно выбрать сущность, с которой требуется создать отношение. Выберите сущность в раскрывающемся списке **Связанная сущность**.

    ![Отношение "один-ко-многим"](./media/data-platform-cds-newrelationship/onetomany-1.png "Отношение \"один-ко-многим\"")

5. После выбора сущности поля подстановки будут отображаться в основной сущности с именем по умолчанию, совпадающим с именем сущности (в данном примере это класс), однако их можно изменить при необходимости.

    > [!NOTE]
    > В случае отношений "один-ко-многим" поле подстановки будет создано в связанной сущности, а не в текущей выбранной сущности. Если нужно поле подстановки в текущей сущности, создайте отношение типа "многие к одному".

    > [!div class="mx-imgBorder"] 
    > ![Отношение "один-ко-многим"](./media/data-platform-cds-newrelationship/onetomany-2.png "Отношение \"один-ко-многим\"")

6. Щелкните **Готово** для добавления отношения к сущности, затем щелкните **Сохранить сущность**.

    > [!div class="mx-imgBorder"] 
    > ![Отношение "один-ко-многим"](./media/data-platform-cds-newrelationship/onetomany-3.png "Отношение \"один-ко-многим\"")

## <a name="add-a-many-to-many-relationship"></a>Добавление отношения "многие ко многим"

В настоящее время это доступно только посредством меню "Дополнительно". На домашней странице PowerApps щелкните "Дополнительно" в левом меню. Сведения о том, как создать отношение, см. в разделе [Создание отношений N:N](/dynamics365/customer-engagement/customize/create-and-edit-nn-many-to-many-relationships)

## <a name="use-a-lookup-field-in-an-app"></a>Использование поля подстановки в приложении
Если [приложение создается автоматически](../canvas-apps/data-platform-create-app.md) из сущности, которая содержит поле подстановки, оно отображается как элемент управления **Раскрывающийся список**, содержащий данные из поля **Основное имя** сущности.

## <a name="next-steps"></a>Дальнейшие действия
* [Формирование приложения с использованием базы данных Common Data Service](../canvas-apps/data-platform-create-app.md)
* [Создание приложения с нуля с помощью базы данных Common Data Service](../canvas-apps/data-platform-create-app-scratch.md)

