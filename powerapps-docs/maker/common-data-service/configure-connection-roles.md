---
title: Настройка ролей подключения | Документы Майкрософт
ms.custom: ''
ms.date: 05/27/2018
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- PowerApps
ms.author: matp
manager: brycho
ms.openlocfilehash: 4faf195f1c751e3796267d52725c1cb753c4889d
ms.sourcegitcommit: aba996b1773ecdf62758e06b34eaf57bede29e08
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/08/2018
ms.locfileid: "39704032"
---
# <a name="configure-connection-roles"></a>Настройка ролей подключения

С помощью Common Data Service для приложений можно определить **подключения** между записями сущности, не создавая отношения сущности. В приложениях на основе модели можно установить именованную связь между записями для установления менее формальной связи, для которой создание полноценного отношения сущности не оправдано. Примеры таких связей включают: *друг*, *брат или сестра*, *супруг*, *участник*, *заинтересованное лицо*. Некоторые подключения могут быть также взаимно обратными, например: *ребенок* и *родитель*, *муж* и *жена* или *врач* и *пациент*.

При установлении соединения между двумя записями также можно добавить описание и дополнительную информацию, например дату начала и окончания этого отношения. Дополнительные сведения: [Создание соединений для определения и просмотра отношений между записями](/dynamics365/customer-engagement/basics/create-connections-view-relationships-between-records)

Все, кто имеет доступ на запись к сущности **Роль подключения**, могут установить, какие подключения доступны для пользователей.

## <a name="view-connection-roles"></a>Просмотр ролей подключения

Существует ряд стандартных ролей подключения, уже настроенных в CDS для приложений. Для их просмотра необходимо перейти в область параметров. 

### <a name="navigate-to-the-settings-area"></a>Переход в область параметров

1. При просмотре приложения на основе модели измените URL-адрес, удалив все, что находится после `dynamics.com`, и обновите страницу.
1. Перейдите к разделу **Параметры** > **Бизнес** > **Управление бизнесом** и выберите **Роли подключения**.

![Роли подключения в параметрах управления бизнесом](media/navigate-settings-connection-roles.png)

В этом представлении отображаются все роли подключения, доступные для этой среды, и здесь их можно изменять.

> [!NOTE]
> Если необходимо распространять роли подключения вместе с решением, убедитесь, что они включены в решение, которое требуется распространить. Дополнительные сведения: [Добавление ролей подключения в решение](#add-connection-roles-to-a-solution)

## <a name="view-connection-roles-in-the-solution-explorer"></a>Просмотр ролей подключения в обозревателе решений.

Поскольку роли подключения *связаны с решением*, то есть они могут быть включены в решение, можно также добавить роли подключения в распространяемое решение.

[!INCLUDE [cc_navigate-solution-from-powerapps-portal](../../includes/cc_navigate-solution-from-powerapps-portal.md)]

Большинство ролей подключения, которые отображаются в области **Параметры**, определены в пределах *встроенного* **Решения по умолчанию** (не путать с **Решением по умолчанию Common Data Services**). Это внутреннее **Решение по умолчанию** содержит все изменения в системе. Чтобы просмотреть **Решение по умолчанию**, выберите представление **Все решения — внутренние**.

## <a name="add-connection-roles-to-a-solution"></a>Добавление ролей подключения в решение

Обычно не рекомендуется изменять компоненты во внутреннем **Решении по умолчанию**. В рамках **Решения по умолчанию Common Data Services** или любого решения, созданного вами для работы, можно использовать команду **Добавить существующий** для переноса в ваше решение любой роли подключения по умолчанию.

![Добавление существующей роли подключения](media/add-existing-connection-role.png)

После добавления роли подключения в решение его можно изменить из любого места, где она отображается.

## <a name="create-or-edit-connection-roles"></a>Создание или изменение ролей подключения.

> [!IMPORTANT]
> Если планируется распространять решение, содержащее новые или измененные роли подключения, необходимо добавить их в распространяемое решение. Изменение или добавление новых ролей подключения с помощью области **Параметры** добавляет эти роли подключения во внутреннее **Решение по умолчанию**. Эти роли подключения не будут включены в распространяемое решение, пока вы не добавите их в это решение. Дополнительные сведения: [Добавление ролей подключения в решение](#add-connection-roles-to-a-solution)

В списке **ролей подключения** выберите одну роль подключения для ее изменения.
Для определения роли подключения необходимо пройти три этапа, назначение которых понятно из их названия на форме.

![Форма создания роли подключения](media/create-connection-role-form.png)

### <a name="describe-the-connection-role"></a>Описание роли подключения

Заполните следующие поля:

|Поле|Описание|
|--|--|
|**Name** (Наименование)|Текстовое описание подключения (обязательно).|
|**Категория роли подключения**|Группа, описывающая категорию подключения. Дополнительные сведения: [Категории ролей подключения](#connection-role-category-values)|
|**Description;**|Предоставьте определение роли.|

#### <a name="connection-role-category-values"></a>Категории ролей подключения

Заданы следующие **категории ролей подключения** по умолчанию:
- Business
- Семья
- Социальное взаимодействие
- Продажи
- Прочее
- Заинтересованное лицо
- Отдел продаж
- Служба

Можно добавить новые категории или изменить существующие путем изменения набора глобальных параметров **Категория**. Дополнительные сведения: [Создание и изменение глобальных наборов параметров для Common Data Service для приложений (списков выбора)](create-edit-global-option-sets.md)

### <a name="select-record-types"></a>Выбор типов записей

Выберите, какие типы записей должны быть доступны для подключения.

> [!NOTE]
> Несмотря на то, что по умолчанию выбираются **все** типы, необходимо решить, какие типы подходят для роли подключения, которую вы добавляете.

### <a name="matching-connection-roles"></a>Сопоставление ролей подключения

На этом необязательном шаге можно определить роли, которые будут взаимно обратными. Это необязательно, но подключения будут более понятными, если определить этот параметр.

Например, пользователи могут установить, что Глен является *другом* Мэри, но означает ли это, что Мэри является *другом* Глена? Мы полагаем, что да. Но если Глен — *отец* Мэри, то это не значит, что Мэри — *отец* Глена. Для установки правильной обратимости и требуется этот дополнительный шаг.

Если установить роль подключения, у которой нет сопоставленной роли подключения, то эта роль будет отображаться только при просмотре соединения из записи, к которой эта роль была применена. При просмотре из подключенной записи роль будет пустой, пока не будет установлено сопоставление роли.

Для определения таких ролей, как *друг*, *супруг*, *коллега* или *брат или сестра*, лучше сопоставить роль самой себе. Если настроена одиночное сопоставление ролей подключения, то в обоих направлениях будет применяться одна роль.

> [!IMPORTANT]
> Чтобы назначить сопоставление роли подключения самой себе, необходимо сначала сохранить ее без назначенной сопоставленной роли.

Вы обнаружите, что для некоторых ролей подключения уже настроены сопоставления с другими ролями. *Бывший сотрудник* сопоставляется с *Бывшим работодателем*, и наоборот. Чаще всего происходит именно такое сопоставление ролей подключения вида один к одному.

Можно настроить несколько сопоставлений ролей подключения для описания сложных отношений. При создании такой роли подключения, как *отец*, можно настроить две роли, *дочь* и *сын*, и указать обе из них в качестве сопоставленных ролей для роли *отец*. В свою очередь, обе роли подключения *дочь* и *сын* должны сопоставляться с ролью *отец*. Само собой, затем следует установить аналогичную роль *мать*, которая таким же образом сопоставляется с ролями *дочь* и *сын*.

> [!TIP]
> Перед созданием сложного набора ролей подключения подумайте, возможно, для вашей задачи будет достаточно более простого набора ролей. Например, вместо создания сложного набора ролей подключения, такого как *отец*, *мать*, *сын* и *дочь*, возможно, в данном конкретном случае будет достаточно использования ролей *родитель* и *ребенок*.

Если настроено более одной сопоставленной роли подключения, то будет установлена только одна из разрешенных пар сопоставленных ролей. Сначала автоматически будет применяться роль по умолчанию. Если это значение неправильное, пользователю необходимо вручную изменить подключение и выбрать один из допустимых вариантов, определенных в конфигурации.

### <a name="see-also"></a>См. также
<!-- This is in the basics guide. It needs to be migrated -->
[Создание соединений для определения и просмотра отношений между записями](/dynamics365/customer-engagement/basics/create-connections-view-relationships-between-records)<br />
[Создание и изменение глобальных наборов параметров для Common Data Service для приложений (списков выбора)](create-edit-global-option-sets.md)<br />
[Создание и изменение связей между сущностями](create-edit-entity-relationships.md)


