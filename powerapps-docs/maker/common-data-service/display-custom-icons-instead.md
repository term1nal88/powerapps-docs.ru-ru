---
title: Отображение настраиваемых значков вместо значения в представлениях списков с помощью PowerApps | Документация Майкрософт
description: Узнайте, как отобразить пользовательский значок графики в представлении
ms.custom: ''
ms.date: 06/21/2018
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- powerapps
author: Mattp123
ms.assetid: af866aed-2586-4b6f-bb1c-3519baae3645
caps.latest.revision: 25
ms.author: matp
manager: kvivek
ms.openlocfilehash: 592d2ad73b192d7f03c552563c4f91d52f3d201d
ms.sourcegitcommit: aba996b1773ecdf62758e06b34eaf57bede29e08
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/08/2018
ms.locfileid: "39699419"
---
# <a name="display-custom-icons-instead-of-values-in-list-views"></a>Отображение настраиваемых значков вместо значения в представлениях списков

<a name="GridIcons"></a>   

 Администраторы и настройщики среды PowerApps с помощью JavaScript могут добавлять графики в представление и устанавливать логику, используемую для выбора изображения, на основании значений столбцов. Возможность отображения представлений списков, отображающих значки, а не текстовые или числовые значения в некоторых столбцах, была введена в Relationship Insights. 
  
> [!NOTE]
>  Значки сетки отображаются только в веб-интерфейсе. Они не отображаются в [!INCLUDE[pn_Outlook_short](../../includes/pn-outlook-short.md)] или в мобильном приложении.  
  
### <a name="add-custom-graphics-and-javascript-as-web-resources"></a>Добавление выборочной графики и JavaScript в качестве веб-ресурсов  
  
1.  Создайте новые графические файлы, необходимые для настройки. Рекомендуемый размер значка 16 x 16 пикселей (большие изображения будут уменьшены).  
  
2.  Запишите одну или несколько функций JavaScript, которые устанавливают какие значки отображать и для какого значения (обычно необходима одна функция для каждого столбца, который требуется настроить). Каждая функция должна принимать объект строки данных и код языка (LCID) в качестве входных данных и возвращать массив, содержащий текст для имени изображения и всплывающей подсказки. Пример функции, см. далее в разделе [Пример функции JavaScript](#SampleJavascript) далее в этом разделе.  
  
3.  Войдите в среду с правами администратора и откройте [обозреватель решений](../model-driven-apps/advanced-navigation.md#solution-explorer).  
  
4.  Откроется всплывающее окно**Решения по умолчанию**. Перейдите к **Компоненты** > **Веб-ресурсы**.  
  
5.  Теперь настраиваемая графика будет отправлена поочередно, как веб-ресурсы. Нажмите кнопку **Создать** на панели инструментов, чтобы создать новый веб-ресурс. Откроется другое всплывающее окно для создания ресурса. Нужно сделать приведенное ниже.  
  
    1.  Предоставьте новому ресурсу значительное **имя**. Это имя, которое будет использоваться для ссылки на каждый рисунок из кода JavaScript.  
  
    2.  Задайте **тип** графического формата, который вы использовали для сохранения графического файла (PNG, JPEG или GIF).  
  
    3.  Щелкните **Выбрать файл**, чтобы открыть окно обозревателя. Используйте его, чтобы найти и выбрать графический файл.  
  
    4.  При необходимости добавьте **Отображаемое имя** и **Описание**.  
  
    5.  Выберите **Сохранить** и закройте окно **веб-ресурса**.  
  
6.  Повторите предыдущий шаг для всех графических файлов, которые у вас есть.  
  
7.  Теперь добавим JavaScript как окончательный веб-ресурс. На панели инструментов нажмите кнопку **Создать**, чтобы создать новый веб-ресурс. Откроется другое всплывающее окно для создания ресурса. Нужно сделать приведенное ниже.  
  
    1.  Предоставьте новому ресурсу значительное **имя**.  
  
    2.  Задайте **тип** для **Script (JScript)**.  
  
    3.  Выберите **текстовый редактор** (рядом с параметром **тип**), чтобы открыть окно текстового редактора. Вставьте код Javascript сюда и нажмите **ОК**, чтобы сохранить его.  
  
    4.  При необходимости добавьте **Отображаемое имя** и **Описание**.  
  
    5.  Выберите **Сохранить** и закройте окно **веб-ресурса**.  
  
8.  С помощью **решения по умолчанию** всплывающее окно все еще открыто, разверните **Компоненты** > **Сущности** дерева и найдите сущность, которую нужно настроить.  
  
9. Разверните сущность и выберите значок **Представления**.  
  
10. Теперь появится список представлений для выбранной сущности. Выберите представление из списка. Затем откройте стрелку раскрывающегося списка **Дополнительные действия** на панели инструментов и выберите **Изменить**.  
  
11. Откроется всплывающее окно с элементами управления для редактирования выбранного представления. В нем отображается каждый столбец, который является частью представления. Выберите целевой столбец, а затем в поле **Общие задачи** выберите **Изменить свойства**. Откроется диалоговое окно **Изменить свойства столбца**. Задайте следующие параметры в следующем:  
  
    - **Веб-ресурс**. Укажите имя веб-ресурса, созданного для хранения функций Javascript (чтобы выбрать из списка, кликните **Обзор**).  
  
    - **Имя функции**. Введите имя функции, которая была написана для изменения выбранного столбца и представления.  
  
12. Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно **Изменить свойства столбца**.  
  
13. Выберите **Сохранить и Закрыть**, чтобы сохранить представление.  
  
14. При необходимости повторите эти шаги для каждой сущности, представления и столбцов.  
  
15. Когда будете готовы, выберите **Опубликовать все настройки**, чтобы опубликовать изменения. Закройте окно **Решения по умолчанию**.  
  
<a name="SampleJavascript"></a>   

### <a name="sample-javascript-function"></a>Пример функции JavaScript  
 Функция JavaScript для отображения пользовательских значков и подсказок ожидает следующие два аргумента: всю строку объекта, указанного в layoutXml и идентификатора вызывающего пользователя языкового стандарта (LCID). Параметр кода языка позволяет указать текст подсказки на нескольких языках. Дополнительные сведения о языках, поддерживаемых средой см. в разделе [Параметры языка и региональных стандартов для вашей организации](https://docs.microsoft.com/dynamics365/customer-engagement/admin/enable-languages) и [Установка или обновление языковых пакетов для Dynamics 365](https://technet.microsoft.com/library/hh699674.aspx). Список значений идентификатор языка (LCID), которые можно использовать в коде, см. в разделе [Идентификаторы языка назначаемые Microsoft](https://go.microsoft.com/fwlink/?linkid=829588).

  
 Предположим, что вы будете добавлять пользовательские значки для атрибута типа набора параметров, который имеет ограниченный набор предопределенных параметров. Убедитесь, что используется значение целого числа для параметров вместо метки, чтобы избежать проблем с локализацией.  
  
 В следующем примере кода отображаются значки и всплывающие подсказки на основе одного из трех значений (1: Hot, 2: Warm, 3: Cold) в атрибуте opportunityratingcode (оценка). В примере кода также показано, как отображать локализованный текст всплывающей подсказки. Этот пример работал, необходимо создать три образа веб-ресурсов с изображениями размером 16 x 16, со следующими именами: new_Hot, new_Warm, and new_Cold.  
  
```  
function displayIconTooltip(rowData, userLCID) {      
    var str = JSON.parse(rowData);  
    var coldata = str.opportunityratingcode_Value;  
    var imgName = "";  
    var tooltip = "";  
    switch (parseInt(coldata,10)) { 
        case 1:  
            imgName = "new_Hot";  
            switch (userLCID) {  
                case 1036:  
                    tooltip = "French: Opportunity is Hot";  
                    break;  
                default:  
                    tooltip = "Opportunity is Hot";  
                    break;  
            }  
            break;  
        case 2:  
            imgName = "new_Warm";  
            switch (userLCID) {  
                case 1036:  
                    tooltip = "French: Opportunity is Warm";  
                    break;  
                default:  
                    tooltip = "Opportunity is Warm";  
                    break;  
            }  
            break;  
        case 3:  
            imgName = "new_Cold";  
            switch (userLCID) {  
                case 1036:  
                    tooltip = "French: Opportunity is Cold";  
                    break;  
                default:  
                    tooltip = "Opportunity is Cold";  
                    break;  
            }  
            break;  
        default:  
            imgName = "";  
            tooltip = "";  
            break;  
    }  
    var resultarray = [imgName, tooltip];  
    return resultarray;  
}  
```  
  
 В результате отображаются значки с подсказками в столбце **Оценка**, которые зависят от значения в каждой строке. Результат может выглядеть следующим образом:  
  
 ![Пример графики настраиваемого столбца](media/custom-column-graphics-example.png "Пример графики настраиваемого столбца")  
 
 ### <a name="see-also"></a>См. также
 [Создание и изменение представлений](../model-driven-apps/create-edit-views.md)
